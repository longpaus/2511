"use strict";(self._cf=self._cf||[]).push([[15677],{425529:(e,n,t)=>{t.d(n,{M:()=>c});var o=t(275513),i=t(392261),r=t(207976),a=t(147824);const s="X-Atl-Experience";function c(){return(e,n={})=>{const t=(0,o.Nq)();return t&&(n.headers=n.headers||{},(0,i.N)(n.headers,s,(0,a.Uq)(n.headers,s)||t)),(0,r.y)(e,n)}}},315677:(e,n,t)=>{t.d(n,{e1:()=>ae,si:()=>oe,WQ:()=>re});var o=t(331377),i=t(991332),r=t(853102),a=t(984218),s=t(274158),c=t(314549),l=t(892539),u=t(724421),d=t.n(u),m=t(392261),p=t(207976),E=t(12793),f=t(536347),y=t(115181);const v=new a.ApolloLink(((e,n)=>(delete e.extensions,n(e))));var A=t(443709),N=t(616158),h=t(147543),L=t(251846);let I;!function(e){e.IP_BLOCKED="IP_BLOCKED",e.OFFLINE="OFFLINE",e.ONLINE="ONLINE",e.RATE_LIMITED="RATE_LIMITED",e.SESSION_EXPIRED="SESSION_EXPIRED"}(I||(I={}));const w=o.ZP`query NetworkStatusLinkQuery{network{status}}`;function C(e,n){const t=function(e){try{var n;const t=e.readQuery({query:w});return null==t||null===(n=t.network)||void 0===n?void 0:n.status}catch(t){return}}(e);t!==I.SESSION_EXPIRED&&t!==n&&e.writeQuery({query:w,data:{network:{__typename:"ClientNetwork",status:n}}})}const O=()=>{const e=(0,N.j)(O);return new a.ApolloLink(((n,t)=>new A.Z((o=>{t(n).subscribe({next(e){var t;const i=n.getContext();null!==(t=e.errors)&&void 0!==t&&t.some(h.Fo)?(C(i.cache,I.SESSION_EXPIRED),o.error(new h.RX(n.operationName,i.response||{}))):(C(i.cache,I.ONLINE),o.next(e))},error(t){const i=n.getContext();if(t instanceof L.K)switch(t.response.status){case 403:return e.log`IP blocked for ${n}`,void C(i.cache,I.IP_BLOCKED);case 429:return e.log`Rate limit was reached for ${n}`,C(i.cache,I.RATE_LIMITED),void o.error(t)}else if(t instanceof E.f&&!t.ignore)return e.log`Network is offline for ${n}`,void C(i.cache,I.OFFLINE);o.error(t)},complete(){o.complete()}})}))))};var g=t(538639);const b=new a.ApolloLink(((e,n)=>{const{allowOnExternalPage:t=!1}=e.getContext(),o=!!g.LH.match(window.location.pathname);return t||!o?n(e):new A.Z((e=>{e.complete()}))}));var S=t(969518);const k="asSuperAdmin",T=new a.ApolloLink(((e,n)=>{const{asSuperAdmin:t=!0}=e.getContext();return t&&(0,S.TT)()&&e.query.definitions.forEach((e=>{if(!("operation"in e))return;const{operation:n,directives:t}=e;if("query"===n||"mutation"===n){if(!(null==t?void 0:t.some((e=>e.name.value===k)))){const e={arguments:[],kind:"Directive",name:{kind:"Name",value:k}};null==t||t.push(e)}}})),n(e)}));var _=t(974771);let P=!1;const R=new _.W({delay:{initial:500,max:5e3,jitter:!0},attempts:{max:2,retryIf:(e,n)=>!!P&&(!n.query.definitions.some((e=>"operation"in e&&"mutation"===e.operation))&&(e instanceof E.f&&(((e,n)=>{Promise.resolve().then(t.bind(t,443033)).then((({getAnalyticsWebClient:t})=>{t().then((t=>{t.sendOperationalEvent({source:"ui",actionSubject:"graphql",action:"errored",attributes:{eventName:"network.error.retry",queryName:n.operationName,priorRetries:n.getContext().networkRetries||0,message:e.message}})}))}))})(e,n),n.setContext((e=>({networkRetries:(e.networkRetries||0)+1}))),!0)))}});var F=t(704737),x=t(598728),q=t(977332),D=t(401487);let U=!1;const j=new _.W({delay:{initial:500,max:5e3,jitter:!0},attempts:{max:2,retryIf:(e,n)=>!!U&&(e instanceof L.K&&n.query.definitions.some((e=>"operation"in e&&"mutation"===e.operation)),!1)}});const M=()=>new a.ApolloLink(((e,n)=>n(e)));var B=t(210678);const Q=JSON.parse('[{"possibleTypes":[{"name":"SmartFeaturesUserResultResponse"},{"name":"SmartFeaturesSpaceResultResponse"},{"name":"SmartFeaturesPageResultResponse"}],"kind":"INTERFACE","name":"SmartFeaturesResultResponse"},{"possibleTypes":[{"name":"ActivitiesTransitionedEvent"},{"name":"ActivitiesCommentedEvent"}],"kind":"UNION","name":"ActivitiesEventExtension"},{"possibleTypes":[{"name":"UpdateConfluenceSpacePayload"},{"name":"CreateConfluenceSpacePayload"}],"kind":"INTERFACE","name":"Payload"},{"possibleTypes":[{"name":"UnknownUser"},{"name":"KnownUser"},{"name":"Anonymous"},{"name":"User"}],"kind":"INTERFACE","name":"Person"},{"possibleTypes":[{"name":"CreateUpdate"},{"name":"EditUpdate"},{"name":"CommentUpdate"}],"kind":"INTERFACE","name":"AllUpdatesFeedEvent"},{"possibleTypes":[{"name":"ActivitiesJiraIssue"}],"kind":"UNION","name":"ActivitiesObjectExtension"},{"possibleTypes":[{"name":"ActivitiesObject"},{"name":"ActivitiesItem"},{"name":"ActivitiesEvent"}],"kind":"INTERFACE","name":"Node"},{"possibleTypes":[{"name":"MediaAttachment"},{"name":"MediaAttachmentError"}],"kind":"UNION","name":"MediaAttachmentOrError"},{"possibleTypes":[],"kind":"INTERFACE","name":"MutationErrorExtension"},{"possibleTypes":[{"name":"ConfluencePage"},{"name":"ConfluenceBlogPost"}],"kind":"UNION","name":"ConfluenceInlineTaskContainer"},{"possibleTypes":[{"name":"InlineComment"},{"name":"FooterComment"}],"kind":"INTERFACE","name":"CommentLocation"},{"possibleTypes":[{"name":"FeedEventCreate"},{"name":"FeedEventEdit"},{"name":"FeedEventComment"}],"kind":"INTERFACE","name":"FeedEvent"},{"possibleTypes":[{"name":"ConfluenceContentSearchResult"},{"name":"ConfluenceSpaceSearchResult"}],"kind":"INTERFACE","name":"ConfluenceSearchResult"},{"possibleTypes":[{"name":"PageActivityEventCreatedComment"},{"name":"PageActivityEventCreatedPage"},{"name":"PageActivityEventUpdatedPage"}],"kind":"INTERFACE","name":"PageActivityEvent"},{"possibleTypes":[{"name":"ConfluencePage"},{"name":"ConfluenceBlogPost"}],"kind":"INTERFACE","name":"ConfluenceAbstractPage"}]'),K=new l.Jd({introspectionQueryResultData:{__schema:{types:Q}}}),$=e=>"WebItem"===e.__typename?`${e.completeKey||e.id}; ${e.url}`:"OnboardingState"===e.__typename?e.key:"WebSection"===e.__typename?e.cacheKey||e.id:null!==e.id?(0,l.uG)(e):void 0,G={Query:{singleContent:(e,{id:n},{getCacheKey:t})=>t({__typename:"Content",id:n})}};var Z=t(147824),W=t(425529);const X=o.ZP`type FabricEditor{editorMode:String}directive@client on FIELD directive@connection(key:String!filter:[String])on FIELD extend type Query{network:ClientNetwork fabricEditor:FabricEditor localActivity:[LocalActivityEvent!]!}type ClientNetwork{status:ClientNetworkStatus}enum ClientNetworkStatus{IP_BLOCKED OFFLINE ONLINE RATE_LIMITED SESSION_EXPIRED}type LocalActivityEvent{id:ID!action:LocalActivityAction!timestamp:String!content:Content!}enum LocalActivityAction{viewed deleted}`,H=(0,W.M)(),J="/cgraphql",Y=()=>new l.h4({fragmentMatcher:K,dataIdFromObject:$,cacheRedirects:G}),z=(e,n)=>{e=d().GLOBAL_APOLLO_CLIENT_URI||e;const t=[].concat("string"==typeof n.body?JSON.parse(n.body):[]),o=t.map((({operationName:e,variables:n})=>"WebItemLocationQuery"===e?`${e}:${(null==n?void 0:n.location)||((null==n?void 0:n.locations)||[]).join(",")||""}`:e)),i=o.join(",");return n.headers||(n.headers={}),(0,m.N)(n.headers,"X-APOLLO-OPERATION-NAME",i),n.referrerPolicy=n.referrerPolicy||"same-origin",y.H.run(`fetch:${o}`,(()=>(t.some((e=>e.query.includes("@SLA")))?H:p.y)(`${e}?q=${i}`,n)))},V=[],ee=(e,n)=>{if(V.length>=8){const t=(async()=>(await V.shift(),z(e,n)))();return V.push(t),t}const t=z(e,n);return V.push(t),t},ne=({experimentalSchemaLinkOverride:e,ccGraphqlSchemaLinkOverride:n})=>{const o={uri:J,credentials:"same-origin",fetch:z};{const r=(0,a.split)((({getContext:e})=>e().single||d().Cypress),new s.u(o),(0,a.split)((({getContext:e})=>!!e().throttle),new s.u((0,i.Z)((0,i.Z)({},o),{},{fetch:ee})),new c.A(o))),l=[(0,f.b)(),v,T,O(),j,R,b];let u;u=(0,a.from)(l).split(Z.SR,(0,B.jH)(),r);const m=[(0,F.q)((({operation:e,graphQLErrors:n,networkError:t})=>{let{response:o}=e.getContext();o||(o=null==n?void 0:n.map((e=>e.originalError instanceof L.K?e.originalError.response:null)).find((e=>null!=e)));const i=(0,q.Y)(o);var r;n&&n.length>0&&n.forEach((n=>{var t,r;(0,x.Qp)(n,{operationName:e.operationName,traceId:i,statusCode:null===(t=o)||void 0===t?void 0:t.status,graphqlPath:null===(r=n.path)||void 0===r?void 0:r.join(".")}),(0,D.wY)(n)})),t&&((0,x.Qp)(t,{operationName:e.operationName,traceId:i,graphqlPath:void 0,statusCode:"object"==typeof t&&"response"in t?null===(r=t.response)||void 0===r?void 0:r.status:void 0}),(0,D.wY)(t))})),M()];return(0,a.from)(m).split((e=>(0,Z.Zg)(e)),e||new a.ApolloLink((e=>new A.Z((n=>{Promise.all([t.e(61769),t.e(78248),t.e(54936),t.e(11216),t.e(28201),t.e(61284),t.e(42035),t.e(18041)]).then(t.bind(t,507126)).then((({getSchemaLink:t})=>{(0,a.execute)(t(),e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}))})))),n||u)}},te=Y();function oe(){return te}let ie=null;function re(){return window.GLOBAL_APOLLO_CLIENT?window.GLOBAL_APOLLO_CLIENT:(ie||(ie=((e={})=>{const n=e.initializeNewCache?Y():te;"object"==typeof d().__APOLLO_STATE__&&n.restore(d().__APOLLO_STATE__);const t=new r.fe({ssrMode:Boolean(!1),link:ne(e),typeDefs:X,cache:n});return e.ccGraphqlSchemaLinkOverride||C(t.cache,I.ONLINE),p.y.subscribe(((e,n)=>{var o;e?-1===(null===(o=e.url)||void 0===o?void 0:o.indexOf(J))&&C(t.cache,I.ONLINE):n instanceof E.f&&!n.ignore&&C(t.cache,I.OFFLINE)})),t})()),window.GLOBAL_APOLLO_CLIENT=ie,window.GLOBAL_GQL=o.ZP,ie)}function ae(){P=!0,U=!0}},210678:(e,n,t)=>{t.d(n,{Vs:()=>l,jH:()=>u,GH:()=>d});var o=t(894346),i=t(679190),r=t(98138);let a,s,c;function l(){return c||(c=new i.SubscriptionClient(a,{reconnect:!0,reconnectionAttempts:2,minTimeout:5e3,lazy:!0})),c}a=`wss://${window.location.host}/subscriptions/subscriptions`;const u=()=>new o.A(l()),d=()=>(void 0===s&&(s=(0,r.D)(a)),s)},147824:(e,n,t)=>{function o(e){return"operation"in e}function i(e){return n=>{if(!n.query.definitions)return!1;for(const{operation:t,directives:i}of n.query.definitions.filter(o))if("query"===t||"mutation"===t)return(null!=i?i:[]).some((n=>n.name.value===e));return!1}}t.d(n,{Zg:()=>r,Eh:()=>a,SR:()=>s,Uq:()=>c});const r=i("experimental"),a=i("SLA"),s=e=>{if(!e.query.definitions)return!1;for(const{operation:n}of e.query.definitions.filter(o))if("subscription"===n)return!0;return!1};function c(e,n){var t;if(Array.isArray(e)){const t=e.find((([e])=>e===n));return t?t[1]:null}return e instanceof Headers?e.get(n):null!==(t=e[n])&&void 0!==t?t:null}},392261:(e,n,t)=>{function o(e,n,t){Array.isArray(e)?e.push([n,t]):e instanceof Headers?e.append(n,t):e[n]=t}t.d(n,{N:()=>o})},98138:(e,n,t)=>{function o(e){if("undefined"!=typeof window&&void 0!==window.WebSocket)try{const n=new window.WebSocket(e,"graphql-ws");return n.onopen=()=>{setTimeout((()=>{n.close()}),100)},!0}catch(n){}return!1}t.d(n,{D:()=>o})},969518:(e,n,t)=>{t.d(n,{TT:()=>a,Yb:()=>s,Uc:()=>c});var o=t(281071),i=t.n(o);const r="confluence.asSuperAdmin";function a(){return Boolean(i().get(r))}function s(){i().remove(r)}function c(){i().set(r,"true")}}}]);
//# sourceMappingURL=15677.6CDGL5E3qo.js.map