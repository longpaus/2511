"use strict";(self._cf=self._cf||[]).push([[35657],{878010:(e,t,n)=>{function o(e){let t=e.offsetTop;for(;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function r(e,t){if(!e)return!1;if(!(t=t||document.scrollingElement||document.body.parentNode))return!1;const n=e.offsetHeight,r=o(e),l=o(t)+t.scrollTop,i=t.offsetHeight;return r>=l&&r+n<=l+i}function l(e){if(!e||e===document)return null;const t=window.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==t.overflow?e:l(e.parentNode)}function i(e,t){t=t||l(e),e&&t&&!r(e,t)&&(t.scrollTop=o(e)-o(t)-t.clientHeight/2)}function d(e){return e.getBoundingClientRect()}function a(e,t){const n=t?t.documentElement:window.document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r,bottom:l}=o,i=n.offsetHeight;return 0<=r&&r<i||0<=l&&l<=i||r<=0&&0<=l&&l>=i}function s(e,t){const n=t?t.documentElement:window.document.documentElement;if(!e||!n)return;const o=e.getBoundingClientRect(),{top:r}=o,l=n.offsetHeight;return 0<=r&&r<l}n.d(t,{U4:()=>o,PZ:()=>r,Mm:()=>l,F1:()=>i,Pi:()=>d,VX:()=>a,nX:()=>s})},998033:(e,t,n)=>{n.d(t,{x:()=>r});const o=()=>{},r=n(122551).createContext(o);r.displayName="EditContentButtonPreloaderContext"},605524:(e,t,n)=>{n.d(t,{B:()=>i});var o=n(29298);let r;class l{constructor(){(0,o.Z)(this,"preloadedContentIdSet",new Set),(0,o.Z)(this,"shouldPreload",(e=>!!e&&(!this.preloadedContentIdSet.has(e)&&(this.preloadedContentIdSet.add(e),!0)))),(0,o.Z)(this,"removePreloadedId",(e=>{e&&this.preloadedContentIdSet.delete(e)}))}}const i=()=>r||(r=new l,r)},350680:(e,t,n)=>{n.d(t,{z:()=>r,p:()=>l});var o=n(331377);const r=o.ZP`fragment ContentOperationsFragment on Content{id type operations{operation targetType}}`,l=o.ZP`fragment SpaceOperationsFragment on Space{id operations{operation targetType}}`},517105:(e,t,n)=>{n.d(t,{xP:()=>o,vt:()=>r});const o=({operationCheckResult:e,operation:t,contentType:n})=>{var o,r,l,i,d,a,s;const c=null!==(o=null==e||null===(r=e.content)||void 0===r||null===(l=r.nodes)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.operations)&&void 0!==o?o:[],u=n||(null==e||null===(d=e.content)||void 0===d||null===(a=d.nodes)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.type);return!!u&&c.some((e=>(null==e?void 0:e.operation)===t&&(null==e?void 0:e.targetType)===u))},r=({operationCheckResult:e,operation:t,contentType:n})=>{var o,r;return(null!==(o=null==e||null===(r=e.space)||void 0===r?void 0:r.operations)&&void 0!==o?o:[]).some((e=>(null==e?void 0:e.operation)===t&&(null==e?void 0:e.targetType)===n))}},488271:(e,t,n)=>{let o;n.d(t,{B:()=>o}),function(e){e.USE="use",e.LIMITED_USE="limited_use",e.EXTERNAL_COLLABORATOR_USE="external_collaborator_use",e.CREATE="create",e.READ="read",e.UPDATE="update",e.DELETE="delete",e.COPY="copy",e.MOVE="move",e.EXPORT="export",e.ARCHIVE="archive",e.PURGE="purge",e.PURGE_VERSION="purge_version",e.ADMINISTER="administer",e.RESTORE="restore",e.CREATE_SPACE="create_space",e.RESTRICT_CONTENT="restrict_content",e.CLEAR_PERMISSIONS="clear_permissions"}(o||(o={}))},134431:(e,t,n)=>{n.d(t,{iq:()=>o,nA:()=>r,z7:()=>l});const o={EDITOR_ONBOARDING_ELIGIBLE_NEW:"editor-state:editorOnboardingEligiblity",EDITOR_VISITED:"editor-state:editorVisited",WAS_DRAFT_BANNER_SEEN:"editor-state:wasDraftBannerSeen",IS_DRAFT_BANNER_VISIBLE:"editor-state:isDraftBannerVisible",HAS_USER_PUBLISHED:"editor-state:hasUserPublished",SUCCESS_FLAG_SEEN:"editor-state:successFlagCompleted",RECENT_SPOTLIGHT_OPEN:"editor-state:recentSpotlightOpen",RECENT_SPOTLIGHT_SEEN:"editor-state:recentSpotlightCompleted",WAS_EDITOR_TEMPLATE_PUBLISHED:"editor-state:wasEditorTemplatePublished",EDITOR_TUTORIAL_SUCCESS_FLAG_SEEN:"editor-state:editorTutorialSuccessFlagCompleted",IMPORT_RELEVANCE_ELIGIBLE_USER:"editor-state:importRelevanceEligibleNewUser",IMPORT_RELEVANCE_ACCORDION_STATE:"editor-state:importRelevanceAccordionState"},r="com.atlassian.confluence.plugins.confluence-onboarding:using-the-editor-template-blueprint",l="editor-onboarding"},528365:(e,t,n)=>{n.d(t,{tl:()=>d,tv:()=>a,Oi:()=>s,es:()=>c,So:()=>u,_N:()=>m});var o=n(991332),r=n(917068),l=n(443033),i=n(596207);const d=e=>{window.performance&&window.performance.clearMarks&&e.forEach((e=>window.performance.clearMarks(e)))},a=e=>{if(window.performance&&window.performance.getEntriesByName){const t=window.performance.getEntriesByName(e);return t&&t[0]}},s=(e,t)=>{const n=a(e),o=a(t);if(n&&o)return Math.abs(n.startTime-o.startTime)},c=e=>{const t=a(e);if(t)return t.startTime},u=({subject:e,subjectId:t=""})=>{const n=`${e}.${t}.start`;d([n,`${e}.${t}.end`]),window.performance.mark(n)},E=async({details:e,subject:t,subjectId:n,includeFeatureFlags:d})=>{const a=`${t}.${n}.end`;window.performance.mark(a);const c=s(`${t}.${n}.start`,a);if(void 0!==c)try{const i=(0,l.getAnalyticsWebClient)(),a=d?(0,r.g)():Promise.resolve({featureFlags:{}}),[s,{featureFlags:u}]=await Promise.all([i,a]),E=((e={})=>Object.keys(e).filter((t=>e[t])).reduce(((t,n)=>(t[n]=e[n],t)),{}))(u);s.sendOperationalEvent({tags:["performance"],source:"confluence-frontend",action:"done",actionSubject:t,actionSubjectId:n,attributes:(0,o.Z)({featureFlags:E,duration:c},e)})}catch(u){(0,i.U)().submitError(u,{attribution:"unknown"})}},m=({subject:e,subjectId:t="",details:n={},includeFeatureFlags:o=!1})=>{a(`${e}.${t}.end`)||E({details:n,includeFeatureFlags:o,subject:e,subjectId:t})}},872593:(e,t,n)=>{n.d(t,{TC:()=>s,SO:()=>c});var o=n(656562),r=n(361284),l=n(596207),i=n(878010);const d=e=>{const t=(e=>{const t=[];if(e)for(let n=0;n<e.length;n++)(0,i.VX)(e[n])&&t.push({targetElementIndex:n,visibleBlockEl:e[n]});return t})(e);let n=null;if(!t.some((e=>!!(0,i.nX)(e.visibleBlockEl)&&(n=e,!0)))&&t.length>0)return t[0];return n||{targetElementIndex:-1,visibleBlockEl:null}};function a(e,t){if(0===t||null===e)return null;const n={targetElementIndex:-1,offsetBetweenTargetAndCurrentScroll:0,columnLayoutPosition:{columnIndex:-1,rowIndex:-1}};if((e=>{if(!e)return!1;const t=e.children[0];return t&&t.classList.contains("contentLayout2")})(e)){const o=e.children[0].children,{targetElementIndex:r,visibleBlockEl:l}=d(o);if(l&&l.getElementsByClassName){const e=l.getElementsByClassName("innerCell"),{columnIndex:o,targetElementIndexInColumn:a,visibleBlockEl:s}=(e=>{const t={targetElementIndexInColumn:-1,columnIndex:-1,visibleBlockEl:null};for(let n=0;n<e.length;n++){const{visibleBlockEl:o,targetElementIndex:r}=d(e[n].children);if(o){t.columnIndex=n,t.targetElementIndexInColumn=r,t.visibleBlockEl=o;break}}return t})(e);s&&(n.targetElementIndex=a,n.offsetBetweenTargetAndCurrentScroll=t-(0,i.U4)(s),n.columnLayoutPosition={rowIndex:r,columnIndex:o})}}else{const{targetElementIndex:o,visibleBlockEl:r}=d(e.children);r&&(n.targetElementIndex=o,n.offsetBetweenTargetAndCurrentScroll=t-(0,i.U4)(r),delete n.columnLayoutPosition)}return-1!==n.targetElementIndex?n:null}const s=e=>{const{contentId:t,isInViewPage:n,docObject:l=document,winObject:i=window}=e;let d;d=n?l.getElementById(o.X.ID_START_CONTENT_IN_VIEW_PAGE):l.body;const s=a(d,i.pageYOffset);if(s)s.contentId=t,s.isInViewPage=n,r.R2.setItem(o.X.PERSIST_SCROLL_POSITION_IN_VIEW_PAGE,JSON.stringify(s));else{r.R2.getItem(o.X.PERSIST_SCROLL_POSITION_IN_VIEW_PAGE)&&r.R2.removeItem(o.X.PERSIST_SCROLL_POSITION_IN_VIEW_PAGE)}},c=e=>{const{contentId:t,isInViewPage:n,contentReadyState:d=0,docObject:a=document,winObject:s=window,hash:c}=e;let u,E=r.R2.getItem(o.X.PERSIST_SCROLL_POSITION_IN_VIEW_PAGE);try{if(E=JSON.parse(E),c){const e=decodeURIComponent(c),t=a.getElementById(e);null==t||t.scrollIntoView()}}catch(p){(0,l.U)().submitError(p,{attribution:"backbone"})}finally{1===d&&r.R2.removeItem(o.X.PERSIST_SCROLL_POSITION_IN_VIEW_PAGE)}if(c||!E||E.contentId!==t)return;if(u=n?a.getElementById(o.X.ID_START_CONTENT_IN_VIEW_PAGE):a.body,!u||!u.children[0])return;const{columnLayoutPosition:m}=E;let I;if(m){var f;const e=u.children[0].children[m.rowIndex],t=null==e?void 0:e.getElementsByClassName("innerCell"),n=null==t?void 0:t[m.columnIndex];I=n&&(null==n||null===(f=n.children)||void 0===f?void 0:f[E.targetElementIndex])}else I=u.children[E.targetElementIndex];if(I){let e=(0,i.U4)(I)+E.offsetBetweenTargetAndCurrentScroll;if(n){var g,v;const t=(null==a||null===(g=a.querySelector)||void 0===g||null===(v=g.call(a,"#main-content"))||void 0===v?void 0:v.clientHeight)||0;e=Math.min(t,e)}s.scrollTo(0,e)}}},998597:(e,t,n)=>{n.r(t),n.d(t,{ViewPage:()=>w});var o=n(991332),r=n(122551),l=n(621070),i=n(607213),d=n(872593),a=n(772610);function s(e){const{getHash:t}=(0,r.useContext)(a.M),n=(0,r.useRef)(t);var o;(0,r.useEffect)((()=>{(0,d.SO)({contentId:e,isInViewPage:!0,contentReadyState:1,docObject:document,winObject:window,hash:n.current()})}),[e]),o=()=>{(0,d.TC)({contentId:e,isInViewPage:!0,docObject:document,winObject:window})},(0,r.useEffect)((()=>(window.addEventListener("beforeunload",o),()=>{window.removeEventListener("beforeunload",o)})),[o])}var c=n(933083),u=n(542210),E=n(628657),m=n(998033),I=n(605524),f=n(483565),g=n(517105),v=n(488271),p=n(315677),S=n(247418),_=n(450855);var h=n(331377),P=n(350680);const T=h.ZP`query ViewPageEditorPreloadQuery($contentId:ID){content(id:$contentId){nodes{...ContentOperationsFragment metadata{frontend{embedded}}}}}${P.z}`,w=({contentId:e,spaceKey:t,classicComments:n,children:d})=>{const{createAnalyticsEvent:a}=(0,l._)(),[h,P]=(0,r.useState)({doPreload:!1,isEmbeddedEditor:!1}),{versionOverride:w}=(0,c.I)();s(e);const C=(0,r.useContext)(m.x),b=parseInt((0,f.hS)("confluence.frontend.fabric.editor.preload.timeout")||"10000",10);let O=null;e&&t&&(O=r.createElement(i.yW,{spaceKey:t,contentId:e,isSticky:!1,versionOverride:w})),(0,r.useEffect)((()=>((0,S.Z)({listener:"ViewPage",globalProperty:"AJS.bind"},(()=>{window.AJS.bind("createGASv3Event",((e,t)=>{a(t).fire()}))})),()=>{(0,S.Z)({listener:"ViewPage",globalProperty:"AJS.unbind"},(()=>{window.AJS.bind("createGASv3Event")}))})),[a]),(0,r.useEffect)((()=>{if(!b)return;const t=setTimeout((async()=>{const t=(await(0,p.WQ)().query({query:T,variables:{contentId:e}})).data,n=(0,g.xP)({operationCheckResult:t,operation:v.B.UPDATE});if((0,I.B)().shouldPreload(e)&&n){var o,r,l,i,d,a;const e=null!==(o=null==t||null===(r=t.content)||void 0===r||null===(l=r.nodes)||void 0===l||null===(i=l[0])||void 0===i||null===(d=i.metadata)||void 0===d||null===(a=d.frontend)||void 0===a?void 0:a.embedded)&&void 0!==o&&o;P({doPreload:!0,isEmbeddedEditor:e})}}),isFinite(b)?b:1e4);return()=>clearTimeout(t)}),[P,b,e]),(0,r.useEffect)((()=>()=>{h.doPreload&&(0,I.B)().removePreloadedId(e)}),[h.doPreload,e]);return(()=>{const{doPreload:l,isEmbeddedEditor:i}=(0,o.Z)({},h);return r.createElement(r.Fragment,null,r.createElement(u.$,{contentId:e}),r.createElement(E.j,{spaceKey:t,contentId:e,contentHeader:O,classicComments:n,hasPageComments:!0,hasLabels:!0,hasReactions:!0,hasInlineComments:!0,hasEOPRecs:!0},d,r.createElement(_.W,null)),C&&l&&C(e,t,i))})()}},615139:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(122551))&&o.__esModule?o:{default:o},l=n(386056);const i=e=>r.default.createElement(l.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 000 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 000-1.419.987.987 0 00-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 00-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));i.displayName="ChevronDownIcon";var d=i;t.default=d},941117:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(122551))&&o.__esModule?o:{default:o},l=n(386056);const i=e=>r.default.createElement(l.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M6 14c0-1.105.902-2 2.009-2h7.982c1.11 0 2.009.894 2.009 2.006v4.44c0 3.405-12 3.405-12 0V14z"/><circle cx="12" cy="7" r="4"/></g></svg>'},e));i.displayName="PersonIcon";var d=i;t.default=d},311933:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(122551))&&o.__esModule?o:{default:o},l=n(386056);const i=e=>r.default.createElement(l.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M6 12h8v-2H6v2zM4 8.99C4 8.445 4.456 8 5.002 8h9.996C15.55 8 16 8.451 16 8.99V14H4V8.99z" fill-rule="nonzero"/><path d="M6 7.005C6 5.898 6.898 5 7.998 5h2.004C11.106 5 12 5.894 12 7.005V10H6V7.005zm4 0V7H7.999c.005 0 .002.003.002.005V8h2v-.995z"/><path d="M4.5 17h13.994l1.002-3H4.14l.36 3zm-2.495-4.012A.862.862 0 012.883 12h18.393c.55 0 .857.417.681.944l-1.707 5.112c-.174.521-.758.944-1.315.944H3.725a1.149 1.149 0 01-1.118-.988l-.602-5.024z" fill-rule="nonzero"/></g></svg>'},e));i.displayName="ShipIcon";var d=i;t.default=d}}]);
//# sourceMappingURL=35657.WYZ8kdmf8t.js.map