/*! License: 50926.4z4UGCv2yK.js.LICENSE.txt */
(self._cf=self._cf||[]).push([[50926,66365,76140],{499253:e=>{"use strict";e.exports=function(e,t){if("string"==typeof e)return a(e);if("number"==typeof e)return n(e,t);return null},e.exports.format=n,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,i=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},s=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function n(e,s){if(!Number.isFinite(e))return null;var n=Math.abs(e),a=s&&s.thousandsSeparator||"",o=s&&s.unitSeparator||"",l=s&&void 0!==s.decimalPlaces?s.decimalPlaces:2,d=Boolean(s&&s.fixedDecimals),c=s&&s.unit||"";c&&r[c.toLowerCase()]||(c=n>=r.pb?"PB":n>=r.tb?"TB":n>=r.gb?"GB":n>=r.mb?"MB":n>=r.kb?"KB":"B");var p=(e/r[c.toLowerCase()]).toFixed(l);return d||(p=p.replace(i,"$1")),a&&(p=p.replace(t,a)),p+o+c}function a(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,i=s.exec(e),n="b";return i?(t=parseFloat(i[1]),n=i[4].toLowerCase()):(t=parseInt(e,10),n="b"),Math.floor(r[n]*t)}},185338:(e,t,i)=>{var r;!function(){"use strict";var s=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:s,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:s&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:s&&!!window.screen};void 0===(r=function(){return n}.call(t,i,t,e))||(e.exports=r)}()},307271:(e,t,i)=>{"use strict";i.d(t,{s:()=>l});var r=i(122551),s=i(474258),n=i.n(s),a=i(38952),o=i(60244);function l(e){var t=e.children,i=e.innerRef,s=r.useContext(a.mq),l=r.useCallback((function(e){(0,o.k$)(i,e),(0,o.DL)(s,e)}),[i,s]);return r.useEffect((function(){return function(){return(0,o.k$)(i,null)}}),[]),r.useEffect((function(){n()(Boolean(s),"`Reference` should not be used outside of a `Manager` component.")}),[s]),(0,o.$p)(t)({ref:l})}},461654:e=>{e.exports=function(e,t){t=t||{};var i,r,s,n=e.ownerDocument||e,a=[],o=[],l=function(e){var t=[];function i(r,s){if(r===e.documentElement)return!1;for(var n=0,a=t.length;n<a;n++)if(t[n][0]===r)return t[n][1];var o=!1;return"none"===(s=s||e.defaultView.getComputedStyle(r)).display?o=!0:r.parentNode&&(o=i(r.parentNode)),t.push([r,o]),o}return function(t){if(t===e.documentElement)return!1;var r=e.defaultView.getComputedStyle(t);return!!i(t,r)||"hidden"===r.visibility}}(n),d=["input","select","a[href]","textarea","button","[tabindex]"],c=e.querySelectorAll(d.join(","));if(t.includeContainer){var p=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;d.some((function(t){return p.call(e,t)}))&&(c=Array.prototype.slice.apply(c)).unshift(e)}for(var u=0,h=c.length;u<h;u++)i=c[u],r=parseInt(i.getAttribute("tabindex"),10),(s=isNaN(r)?i.tabIndex:r)<0||"INPUT"===i.tagName&&"hidden"===i.type||i.disabled||l(i,n)||(0===s?a.push(i):o.push({index:u,tabIndex:s,node:i}));var m=o.sort((function(e,t){return e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex})).map((function(e){return e.node}));return Array.prototype.push.apply(m,a),m}},400505:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r=i(879142).Z},312193:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(415911),s=i(953307),n=i(122551),a=i(982930),o=i(992018),l=i(225385),d=i(283137);const c=function(){const{registerRef:e}=(0,n.useContext)(d.K),t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{null!==t.current&&e(t.current)}),[e]),t},p=e=>{const{component:t,elemBefore:i,elemAfter:d,shouldTitleWrap:p=!0,shouldDescriptionWrap:u=!0}=e,h=(0,r.Z)(e,["component","elemBefore","elemAfter","shouldTitleWrap","shouldDescriptionWrap"]),m=c();return t?n.createElement(o.Z,(0,s.Z)({component:t,iconBefore:i,iconAfter:d,shouldTitleWrap:p,shouldDescriptionWrap:u},h)):e.href?n.createElement(l.Z,(0,s.Z)({href:e.href,iconBefore:i,iconAfter:d,role:"menuitem",ref:m,shouldTitleWrap:p,shouldDescriptionWrap:u},h)):n.createElement(a.Z,(0,s.Z)({role:"menuitem",iconBefore:i,iconAfter:d,ref:m,shouldTitleWrap:p,shouldDescriptionWrap:u},h))}},487158:(e,t,i)=>{"use strict";i.d(t,{Z:()=>k});var r=i(991332),s=i(415911),n=i(953307),a=i(122551),o=i(451598),l=i(395937),d=i(654632),c=i(437705),p=i(682968);var u=i(615139),h=i(824464),m=i(676424),v=i(283137),f=i(321534),g=i(60252),b=i(685753),y=i(852665);const w=(0,f.iv)({display:"flex",minWidth:"160px",padding:"var(--ds-space-250, 20px)",justifyContent:"center"}),x=({statusLabel:e="Loading"})=>(0,f.tZ)("div",{css:w},(0,f.tZ)(b.Z,{size:"small"}),(0,f.tZ)(y.Z,{role:"status"},e)),E=e=>{let{onClose:t,onUpdate:i,isLoading:r,statusLabel:o,setInitialFocusRef:l,children:d}=e,c=(0,s.Z)(e,["onClose","onUpdate","isLoading","statusLabel","setInitialFocusRef","children"]);const{menuItemRefs:p}=(0,a.useContext)(v.K);return(0,a.useLayoutEffect)((()=>{i()}),[r,i]),(0,a.useEffect)((()=>{null==l||l(p[0])}),[p,l]),(0,f.tZ)(g.Z,(0,n.Z)({role:"menu",onClick:e=>{p.some((t=>{const i=function(e){const t=e.getAttribute("role");return"checkbox"===t||"menuitemcheckbox"===t}(t)||function(e){const t=e.getAttribute("role");return"radio"===t||"menuitemradio"===t}(t);return t.contains(e.target)&&!i}))&&t&&t(e)}},c),r?(0,f.tZ)(x,{statusLabel:o}):d)},S=(0,a.createContext)({setItemState:c.Z,getItemState:()=>{},setGroupState:c.Z,getGroupState:()=>({})}),C=e=>{const{children:t}=e,i=(0,a.useRef)({}),r=(0,a.useMemo)((()=>({setItemState:(e,t,r)=>{i.current[e]||(i.current[e]={}),i.current[e][t]=r},getItemState:(e,t)=>{if(i.current[e])return i.current[e][t]},setGroupState:(e,t)=>{i.current[e]=t},getGroupState:e=>i.current[e]||{}})),[]);return a.createElement(S.Provider,{value:r},t)};function I(){return(0,a.useRef)(`ds--dropdown--${Math.random().toString(16).substr(2,8)}`).current}const Z=`calc(100vh - ${2*(0,m.ww)()}px)`,R={top:"bottom",bottom:"top",left:"right",right:"left",start:"end",auto:"auto",end:"start"},k=e=>{const{defaultOpen:t=!1,isOpen:i,onOpenChange:f=c.Z,children:g,placement:b="bottom-start",trigger:y,spacing:w,shouldFlip:x=!0,isLoading:S=!1,autoFocus:k=!1,testId:T,statusLabel:B,zIndex:$=m.ug.modal()}=e,[D,P]=(0,p.Z)(i,(()=>t)),[F,A]=(0,a.useState)(!1),M=(0,a.useMemo)((()=>(e=>{const t=e.split("-"),i=t[0];if(["top","bottom"].includes(i)){if(2===t.length&&["start","end"].includes(t[1])){const e=t[1];return[`${i}`,`${i}-${R[e]}`,`${R[i]}-${e}`,`${R[i]}`,`${R[i]}-${R[e]}`,"auto"]}return[`${i}-start`,`${i}-end`,`${R[i]}`,`${R[i]}-start`,`${R[i]}-end`,"auto"]}})(b)),[b]),N=(0,a.useCallback)((e=>{const t=!D,{clientX:i,clientY:r,type:s}=e;"keydown"===s?A(!0):0!==i&&0!==r||A(!0),P(t),f({isOpen:t,event:e})}),[f,D,P]),O=(0,a.useCallback)((e=>{P(false),f({isOpen:false,event:e})}),[f,P]),{isFocused:U,bindFocus:L}=function(){const[e,t]=(0,a.useState)(!1),i=(0,a.useRef)({onFocus:()=>t(!0),onBlur:()=>t(!1)});return(0,a.useEffect)((()=>()=>t(!1)),[]),{isFocused:e,bindFocus:i.current}}();(0,a.useEffect)((()=>U?D?c.Z:(0,o.ak)(window,{type:"keydown",listener:function(e){e.key===d.Hb&&(e.preventDefault(),N(e))}}):c.Z),[U,D,N]);const _=I();return a.createElement(C,null,a.createElement(h.Z,{id:D?_:void 0,shouldFlip:x,isOpen:D,onClose:O,zIndex:$,placement:b,fallbackPlacements:M,testId:T&&`${T}--content`,shouldUseCaptureOnOutsideClick:!0,trigger:e=>{if("function"==typeof y){const{ref:t}=e,i=(0,s.Z)(e,["ref"]);return y((0,r.Z)((0,r.Z)((0,r.Z)({},i),L),{},{triggerRef:t,isSelected:D,onClick:N,testId:T&&`${T}--trigger`}))}return a.createElement(l.Z,(0,n.Z)({},L,{ref:e.ref,"aria-controls":e["aria-controls"],"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],isSelected:D,iconAfter:a.createElement(u.default,{size:"medium",label:""}),onClick:N,testId:T&&`${T}--trigger`}),y)},content:({setInitialFocusRef:e,update:t})=>a.createElement(v.Z,null,a.createElement(E,{spacing:w,maxHeight:Z,maxWidth:800,onClose:O,onUpdate:t,isLoading:S,statusLabel:B,setInitialFocusRef:F||k?e:void 0},g))}))}},283137:(e,t,i)=>{"use strict";i.d(t,{K:()=>c,Z:()=>p});var r=i(122551),s=i(451598),n=i(437705),a=i(654632);const o={[a.Hb]:"next",[a.R4]:"prev",[a.hv]:"first",[a.yM]:"last"},l=(e,t)=>{for(;t+1<e.length;){if(!(null!==e[t+1].getAttribute("disabled")))return e[t+1];t++}},d=(e,t)=>{for(;t>0;){if(!(null!==e[t-1].getAttribute("disabled")))return e[t-1];t--}};const c=(0,r.createContext)({menuItemRefs:[],registerRef:n.Z}),p=({children:e})=>{const t=(0,r.useRef)([]),i=(0,r.useCallback)((e=>{e&&!t.current.includes(e)&&t.current.push(e)}),[]);(0,r.useEffect)((()=>{return(0,s.ak)(window,{type:"keydown",listener:(e=t.current,t=>{const i=e.findIndex((e=>{var t;return null===(t=document.activeElement)||void 0===t?void 0:t.isSameNode(e)}));switch(o[t.key]){case"next":if(i<e.length-1){t.preventDefault();const r=l(e,i);r&&r.focus()}break;case"prev":if(i>0){t.preventDefault();const r=d(e,i);r&&r.focus()}break;case"first":t.preventDefault();const r=l(e,-1);r&&r.focus();break;case"last":t.preventDefault();const s=d(e,e.length);s&&s.focus();break;default:return}})});var e}));const n={menuItemRefs:t.current,registerRef:i};return r.createElement(c.Provider,{value:n},e)}},497176:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(122551),s=i(321534);const n={center:(0,s.iv)({alignItems:"center"}),baseline:(0,s.iv)({alignItems:"baseline"}),flexStart:(0,s.iv)({alignItems:"flex-start"}),flexEnd:(0,s.iv)({alignItems:"flex-end"}),start:(0,s.iv)({alignItems:"start"}),end:(0,s.iv)({alignItems:"end"})},a={center:(0,s.iv)({justifyContent:"center"}),flexStart:(0,s.iv)({justifyContent:"flex-start"}),"space-between":(0,s.iv)({justifyContent:"space-between"}),flexEnd:(0,s.iv)({justifyContent:"flex-end"}),start:(0,s.iv)({justifyContent:"start"}),end:(0,s.iv)({justifyContent:"end"}),spaceBetween:(0,s.iv)({justifyContent:"space-between"})},o={wrap:(0,s.iv)({flexWrap:"wrap"})},l=(0,s.iv)({display:"flex",boxSizing:"border-box",flexDirection:"row"}),d=(0,s.iv)({margin:"0 -2px",color:"var(--ds-text-subtle, #42526E)",pointerEvents:"none",userSelect:"none"}),c=({children:e})=>(0,s.tZ)("span",{css:d},e),p=(0,r.memo)((0,r.forwardRef)((({gap:e,alignItems:t,justifyContent:i,flexWrap:d,divider:p,UNSAFE_style:u,children:m,testId:v},f)=>{const g="string"==typeof p?(0,s.tZ)(c,null,p):p,b=p?r.Children.toArray(m).filter(Boolean).map(((e,t)=>(0,s.tZ)(r.Fragment,{key:t},p&&t>0?g:null,e))):m;return(0,s.tZ)("div",{style:u,css:[l,e&&h[e],t&&n[t],i&&a[i],d&&o[d]],"data-testid":v,ref:f},b)})));p.displayName="Inline";const u=p,h={"space.0":(0,s.iv)({columnGap:"var(--ds-space-0, 0px)"}),"space.025":(0,s.iv)({columnGap:"var(--ds-space-025, 2px)"}),"space.050":(0,s.iv)({columnGap:"var(--ds-space-050, 4px)"}),"space.075":(0,s.iv)({columnGap:"var(--ds-space-075, 6px)"}),"space.100":(0,s.iv)({columnGap:"var(--ds-space-100, 8px)"}),"space.1000":(0,s.iv)({columnGap:"var(--ds-space-1000, 80px)"}),"space.150":(0,s.iv)({columnGap:"var(--ds-space-150, 12px)"}),"space.200":(0,s.iv)({columnGap:"var(--ds-space-200, 16px)"}),"space.250":(0,s.iv)({columnGap:"var(--ds-space-250, 20px)"}),"space.300":(0,s.iv)({columnGap:"var(--ds-space-300, 24px)"}),"space.400":(0,s.iv)({columnGap:"var(--ds-space-400, 32px)"}),"space.500":(0,s.iv)({columnGap:"var(--ds-space-500, 40px)"}),"space.600":(0,s.iv)({columnGap:"var(--ds-space-600, 48px)"}),"space.800":(0,s.iv)({columnGap:"var(--ds-space-800, 64px)"})}},99616:(e,t,i)=>{"use strict";i.d(t,{K:()=>s,v:()=>n});var r=i(122551);const s=(0,r.createContext)("elevation.surface"),n=()=>(0,r.useContext)(s);s.displayName="SurfaceProvider"},302842:(e,t,i)=>{"use strict";i.d(t,{k:()=>r});const r={card:100,navigation:200,dialog:300,layer:400,blanket:500,modal:510,flag:600,spotlight:700,tooltip:800}},682968:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(122551);function s(e,t=(()=>e)){const i=void 0!==e,[s,n]=(0,r.useState)(t),a=(0,r.useRef)(i);(0,r.useEffect)((()=>{a.current=i}),[i]);return[i?e:s,(0,r.useCallback)((e=>{a.current||n(e)}),[])]}},129808:(e,t,i)=>{"use strict";let r;i.d(t,{a:()=>r}),function(e){e[e.Border=0]="Border",e[e.BoxShadow=1]="BoxShadow",e[e.Background=2]="Background",e[e.Blanket=3]="Blanket"}(r||(r={}))},980663:(e,t,i)=>{"use strict";i.d(t,{H:()=>n,G:()=>a});var r=i(404510),s=i(129808);const n=e=>e.map((e=>o(e))).concat(a).join("\n"),a="\n  ::selection,*::selection {\n    background-color: transparent;\n  }\n  ::-moz-selection,*::-moz-selection {\n    background-color: transparent;\n  }\n",o=e=>{switch(e){case s.a.Border:return`\n        border: ${r.fO};\n\n        // Fixes ED-15246: Trello card is visible through a border of a table border\n        &::after {\n          height: 100%;\n          content: '\\00a0';\n          background: ${r.EG};\n          position: absolute;\n          right: -1px;\n          top: 0;\n          bottom: 0;\n          width: 1px;\n          border: none;\n          display: inline-block;\n        }\n      `;case s.a.BoxShadow:return`\n        box-shadow: ${r.qR};\n        border-color: transparent;\n        `;case s.a.Background:return`background-color: var(--ds-background-selected, ${r.pX});`;case s.a.Blanket:return`\n        position: relative;\n\n        // Fixes ED-9263, where emoji or inline card in panel makes selection go outside the panel\n        // in Safari. Looks like it's caused by user-select: all in the emoji element\n        -webkit-user-select: text;\n\n        ::before {\n          position: absolute;\n          content: '';\n          left: 0;\n          right: 0;\n          top: 0;\n          bottom: 0;\n          width: 100%;\n          pointer-events: none;\n          z-index: ${r.aE};\n          background-color: var(--ds-blanket-selected, #B3D4FF4C)\n        }`;default:return""}}},588022:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M6.735 12.322a1 1 0 00-1.47 1.356l3.612 3.919c.537.526 1.337.526 1.834.03l.364-.359a2335.638 2335.638 0 003.939-3.883l.04-.04a492.598 492.598 0 003.658-3.643 1 1 0 00-1.424-1.404 518.42 518.42 0 01-3.64 3.625l-.04.04a2049.114 2049.114 0 01-3.775 3.722l-3.098-3.363z" fill="currentColor"/></svg>'},e));a.displayName="CheckIcon";var o=a;t.default=o},615139:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.292 10.293a1.009 1.009 0 000 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 000-1.419.987.987 0 00-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 00-1.406 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));a.displayName="ChevronDownIcon";var o=a;t.default=o},692214:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M10.687 17.292a.983.983 0 00-1.397 0 1 1 0 000 1.407l1.964 1.98a1.082 1.082 0 001.538 0l1.919-1.933a1 1 0 000-1.408.983.983 0 00-1.398 0l-1.29 1.3-1.336-1.346z" fill-rule="nonzero"/><path d="M13.001 19.993L13 10.006C13 9.451 12.552 9 12 9s-1 .45-1 1.007l.001 9.987c0 .555.448 1.006 1 1.006s1-.45 1-1.007z" fill-rule="nonzero"/><path d="M7.938 5.48a4.8 4.8 0 00-.777-.062C4.356 5.418 2 7.62 2 10.498 2 13.409 4.385 16 7.1 16h2.881v-1.993H7.1c-1.657 0-3.115-1.663-3.115-3.508 0-1.778 1.469-3.087 3.104-3.087h.012c.389 0 .686.05.97.15l.17.063c.605.248.875-.246.875-.246l.15-.267c.73-1.347 2.201-2.096 3.716-2.12a4.14 4.14 0 014.069 3.645l.046.34s.071.525.665.525c.013 0 .012.005.023.005h.254c1.136 0 1.976.959 1.976 2.158 0 1.207-.987 2.342-2.07 2.342h-3.964V16h3.964C20.105 16 22 13.955 22 11.665c0-2-1.312-3.663-3.138-4.074-.707-2.707-3.053-4.552-5.886-4.591-1.975.02-3.901.9-5.038 2.48z"/></g></svg>'},e));a.displayName="DownloadIcon";var o=a;t.default=o},213715:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));a.displayName="LockFilledIcon";var o=a;t.default=o},281743:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></g></svg>'},e));a.displayName="MoreIcon";var o=a;t.default=o},115472:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=i(122551))&&r.__esModule?r:{default:r},n=i(386056);const a=e=>s.default.createElement(n.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M8.595 19.522C7.162 20.364 6 19.702 6 18.04V5.963C6 4.3 7.158 3.635 8.595 4.479l11.083 6.51c.951.559.958 1.46 0 2.023l-11.083 6.51z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));a.displayName="VidPlayIcon";var o=a;t.default=o},552119:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Card:()=>br,CardBase:()=>gr});var r=i(991332),s=i(29298),n=i(122551),a=i(833486),o=i(130860),l=i(299774),d=i(692214),c=i(594047),p=i(795425),u=i(79680),h=i(727467),m=i(954889),v=i(700406),f=i(317520),g=i(609115),b=i(603494),y=i(321534),w=i(316864),x=i(940373),E=i(685753),S=i(112261),C=i(603070),I=i(412024),Z=i(332691),R=i(736250),k=i(397916),T=i(980142),B=i(115472),$=i(943566),D=i.n($),P=i(588022),F=i(692319),A=i(866738);const M=y.iv`
  float: left;
  margin-right: 6px;
  position: relative;
  top: 1px;
  img {
    ${(0,A.dp)("12px !important")};
  }
`,N="file-type-icon";class O extends n.Component{render(){const{mediaType:e,iconUrl:t,style:i}=this.props,r=e||"unknown",s=(0,y.tZ)(F.w,{type:e,size:"small",className:N}),n=t?(0,y.tZ)("img",{src:t,className:"custom-icon",alt:r}):s;return(0,y.tZ)("div",{css:M,style:i,className:N},n)}}O.displayName="FileIcon";var U=i(83710),L=i(131436),_=i(676424);const z=()=>y.iv`
  box-sizing: border-box;
  font-family: ${(0,_.I8)()};

  * {
    box-sizing: border-box;
  }
`;var j=i(490132);const W=y.iv`
  ${z()}
  display: flex;
  position: relative;
  line-height: 0;
`;let V;!function(e){e.default="default",e.filled="filled"}(V||(V={}));const G=({variant:e})=>y.iv`
  ${A.be}
  ${A.E0}
    ${(0,A.dp)(26)}
    color: ${`var(--ds-icon, ${L.Mx})`};

  &:hover {
    cursor: pointer;
  }

  ${(e=>"filled"===e?`\n    background-color: var(--ds-surface-overlay, ${(0,j.m4)(L.N0,.8)});\n    margin-right: 8px;\n\n    &:last-child {\n      margin-right: 0;\n    }\n\n    &:hover {\n      background-color: var(--ds-surface-overlay-hovered, ${(0,j.m4)(L.N0,.6)})\n    }\n  `:"\n    &:hover {\n      background-color: var(--ds-background-neutral-subtle-hovered, rgba(9, 30, 66, 0.06));\n    }\n  ")(e)}
`,H=(0,n.forwardRef)(((e,t)=>(0,y.tZ)("div",{id:"cardActionButton","data-testid":"media-card-primary-action",css:G(e),style:e.style,onClick:e.onClick,onMouseDown:e.onMouseDown,ref:t},e.children)));class q extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"onMouseDown",(e=>{e.preventDefault()}))}render(){const{icon:e,triggerColor:t,onClick:i,variant:r}=this.props;return n.createElement(H,{onClick:i,onMouseDown:this.onMouseDown,style:{color:t},variant:r},e)}}q.displayName="CardActionIconButton";var J=i(415911),K=i(953307),Y=i(281743),X=i(312193),Q=i(487158),ee=i(400505),te=i(411299);const ie=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"mediaCardDropDownMenu",attributes:{}})})(H),re=e=>n.createElement(X.Z,(0,K.Z)({testId:"media-card-actions-menu-item"},e)),se=(e,t)=>{const{label:i,handler:r}=e,s=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:"mediaCardDropDownMenuItem",attributes:{label:i}})})(re);return n.createElement(s,{key:t,onClick:r},i)};class ne extends n.Component{render(){const{actions:e,triggerColor:t,onOpenChange:i,triggerVariant:r}=this.props;return e.length>0?n.createElement(Q.Z,{testId:"media-card-actions-menu",onOpenChange:i,trigger:e=>{let{triggerRef:i}=e,s=(0,J.Z)(e,["triggerRef"]);return n.createElement(ie,(0,K.Z)({variant:r,style:{color:t},ref:i},s),n.createElement(Y.default,{label:"more"}))}},n.createElement(ee.Z,null,e.map(se))):null}}function ae({children:e}){return n.createElement("span",{onClick:e=>{e.stopPropagation(),e.preventDefault()},"data-testid":"prevent-click-through"},e)}ne.displayName="CardActionsDropdownMenu";const oe=e=>(0,y.tZ)(q,e);class le extends n.Component{render(){const{actions:e}=this.props;if(!e.length)return null;const t=e.find(de),i=e.filter(ce(t));return(0,y.tZ)(ae,null,(0,y.tZ)("div",{css:W},t?this.renderActionIconButton(t,!0):null,this.renderOtherActionButtons(i)))}renderActionIconButton(e,t){const{triggerColor:i,variant:r}=this.props,{icon:s,handler:n,label:a}=e,l=t?"mediaCardPrimaryActionButton":"mediaCardSecondaryActionButton",d=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"button",actionSubjectId:l,attributes:{label:a}})})(oe);return(0,y.tZ)(d,{icon:s,triggerColor:i,onClick:()=>n(),variant:r})}renderOtherActionButtons(e){if(0===e.length)return null;{const{triggerColor:t,onToggle:i,variant:r}=this.props,s=e.find(de),n=e.filter(ce(s));return s&&0===n.length?this.renderActionIconButton(s,!1):(0,y.tZ)(ne,{actions:e,triggerColor:t,onOpenChange:i,triggerVariant:r})}}}function de(e){return!!e.icon}function ce(e){return t=>t!==e}le.displayName="CardActionsView";var pe=i(479517);const ue=y.iv`
  ${(0,A.dp)(14)}
  ${(0,j.eR)()}
  background-color: ${`var(--ds-surface-overlay, ${(0,j.m4)("#ffffff",.5)})`};
  position: absolute;
  top: 8px;
  right: 8px;
  border-radius: 20px;
  color: ${"var(--ds-icon-subtle, #798599)"}; /* CLEANUP - TODO FIL-3884: Align color with new design */
  display: flex;
  opacity: 0;

  &.selected {
    opacity: 1;
    color: ${"var(--ds-icon-inverse, white)"};
    background-color: ${"var(--ds-icon-selected, #0052cc)"}; /* CLEANUP - TODO FIL-3884: Align with tickbox icons */
  }

  /* Enforce dimensions of "tick" icon */
  svg {
    position: absolute;
    width: 14px;
  }
`,he=e=>y.iv`
  ${(0,A.dp)()}
  ${(0,A.AG)()}
  ${A.E0} display: flex;
  justify-content: space-between;
  flex-direction: column;
  background: transparent;
  transition: 0.3s background ${"cubic-bezier(0.215, 0.61, 0.355, 1)"}, 0.3s border-color;
  padding: 16px;

  ${(({hasError:e,noHover:t})=>{if(e||t)return"\n        cursor: default;\n\n        &:hover {\n          background: transparent;\n        }\n      "})(e)}
  &:not(.persistent):hover, &.active {
    .top-row {
      .title {
        color: ${`var(--ds-text-information, ${L.AX})`};
      }
    }
  }

  &.noHover:hover {
    .top-row {
      .title {
        color: ${`var(--ds-text, ${L.q2})`};
      }
    }
  }

  .file-type-icon {
    display: block;
  }

  &:not(.persistent) {
    &:not(.error, .noHover):hover {
      background-color: ${`var(--ds-background-neutral-hovered, ${(0,j.m4)(L.xA,.06)})`};
    }

    &.selectable {
      &.selected {
        background-color: ${`var(--ds-background-selected, ${L.VY})`};

        &:hover {
          /* CLEANUP - TODO FIL-3884 add new overlay with rgba(colors.N900, 0.16) */
          background-color: ${`var(--ds-background-selected-hovered, ${(0,j.m4)(L.xA,.16)})`};
        }

        .title,
        .bottom-row,
        .file-size {
          color: ${`var(--ds-text, ${L.xA})`};
        }
      }
    }
  }

  &.persistent {
    &:not(.active) {
      overflow: hidden;
    }

    .top-row {
      .title {
        transition: opacity 0.3s;
        opacity: 0;
        color: ${"var(--ds-text, white)"};
        visibility: hidden;
      }
    }

    .bottom-row {
      opacity: 0;
      transition: transform 0.2s, opacity 0.5s;
      /* This is the height of the overlay footer, needs to be present now since the parent uses flex and 100% doesn't look right anymore */
      transform: translateY(35px);

      .file-type-icon {
        display: none;
      }

      .file-size {
        color: ${"var(--ds-text, white)"};
        display: none;
      }
    }

    &:hover,
    &.active {
      background-color: ${`var(--ds-interaction-hovered, ${(0,j.m4)(L.xA,.5)})`};

      .title {
        opacity: 1;
        visibility: visible;
      }

      .file-type-icon,
      .file-size {
        display: block;
      }

      .bottom-row {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Selectable */
    &.selectable {
      &:hover {
        .tickbox {
          opacity: 1;
        }
      }

      &.selected {
        .tickbox {
          background-color: ${`var(--ds-background-selected-bold, ${L.VY})`} !important;
          color: ${"var(--ds-icon-inverse, white)"};
        }
      }
    }
  }

  &.error {
    .top-row {
      overflow: visible;
    }
    &:hover,
    &.active {
      .top-row {
        .title {
          color: ${`var(--ds-text, ${L.q2})`};
        }
      }
    }
  }
`,me=y.iv`
  height: 24px;
  display: flex;
  align-items: center;
`,ve=y.iv`
  width: 100%;
  position: relative;
  box-sizing: border-box;
  vertical-align: middle;
`,fe=y.iv``,ge=y.iv`
  display: flex;
  align-items: center;
  height: 16px;
`,be=y.iv``,ye=y.iv`
  ${j.Dl} display: inline-block;
  vertical-align: middle;
  font-weight: bold;
  color: ${`var(--ds-text-subtlest, ${L.n2})`};
  font-size: 12px;
  line-height: 15px;
  overflow: hidden;
  max-width: 'calc(100% - 24px)';
  text-overflow: ellipsis;
  white-space: nowrap;
  margin: auto 3px;
`,we=y.iv`
  ${ye}
  font-weight: normal;
`,xe=e=>y.iv`
  box-sizing: border-box;
  word-wrap: break-word;
  color: ${(0,pe.Z)({light:`var(--ds-text, ${L.q2})`,dark:`var(--ds-text, ${L.fR})`})({theme:e})};
  font-size: 12px;
  line-height: 18px;
`,Ee=y.iv`
  ${(0,A.LH)("100px")} font-size: 12px;
  color: ${"var(--ds-text-subtlest, #5e6c84)"};
`,Se=y.iv`
  display: flex;
  align-items: center;
`;var Ce=i(529845);const Ie=e=>{const{hasError:t,noHover:i,className:r}=e;return(0,y.tZ)("div",{css:he({hasError:t,noHover:i}),className:r},e.children)},Ze=e=>(0,y.tZ)("div",{css:ye},e.children),Re=e=>(0,y.tZ)("div",{css:we},e.children),ke=e=>{const t=(0,Ce.m)();return(0,y.tZ)("div",{css:xe(t),className:"title"},e.children)},Te=e=>(0,y.tZ)("div",{css:Se,className:e.className},e.children);class Be extends n.Component{constructor(e){super(e),(0,s.Z)(this,"onMenuToggle",(e=>{this.setState({isMenuExpanded:e.isOpen})})),this.state={isMenuExpanded:!1}}get wrapperClassNames(){const{error:e,noHover:t,selectable:i,selected:r,mediaType:s,persistent:n}=this.props,{isMenuExpanded:a}=this.state;return e?D()("overlay",{error:e,active:a}):D()("overlay",s,{active:a,selectable:i,selected:r,persistent:!n,noHover:t})}render(){const{cardStatus:e,error:t,noHover:i,mediaName:r,persistent:s,selected:n,actions:a}=this.props,o=((e,t,i,r)=>i||!t||"uploading"===e&&!r?"":t)(e,r,t,n),l=s?void 0:"var(--ds-icon-inverse, white)";return(0,y.tZ)(Ie,{hasError:!!t,noHover:i,className:this.wrapperClassNames},(0,y.tZ)("div",{css:fe,className:"top-row"},this.errorLine(),(0,y.tZ)(ke,null,o?(0,y.tZ)(T.l,{testId:"media-card-file-name",text:o,lines:2}):null),this.tickBox()),(0,y.tZ)("div",{css:ge,className:"bottom-row"},(0,y.tZ)("div",{css:ve},this.bottomLeftColumn()),(0,y.tZ)("div",{css:be},a?(0,y.tZ)(le,{actions:a,onToggle:this.onMenuToggle,triggerColor:l}):null)))}errorLine(){const{error:e,alt:t}=this.props;return e&&(0,y.tZ)(n.Fragment,null,(0,y.tZ)("div",{css:me},(0,y.tZ)(U.P,null),(0,y.tZ)(Ze,null,e)),t&&(0,y.tZ)("div",{css:me},(0,y.tZ)(Re,null,t)))}tickBox(){const{selected:e,selectable:t}=this.props,i=(0,y.tZ)(P.default,{label:"tick"}),r=D()("tickbox",{selected:e});return t&&(0,y.tZ)("div",{css:ue,className:r},i)}bottomLeftColumn(){const{error:e}=this.props;if(!e){const{mediaType:e,subtitle:t,icon:i}=this.props,r=D()("metadata"),s=e||i?(0,y.tZ)(O,{mediaType:e,iconUrl:i}):null,n=t?(0,y.tZ)("div",{css:Ee,className:"file-size"},t):null;return(0,y.tZ)("div",null,(0,y.tZ)(Te,{className:r},s,n))}}removeBtnClick(e){return t=>{t.preventDefault(),t.stopPropagation(),e()}}}Be.displayName="CardOverlay",(0,s.Z)(Be,"defaultProps",{actions:[],mediaName:""});var $e=i(837159);const De=e=>y.iv`
  ${z()}
  ${(e=>{const{disableOverlay:t}=e;return t?"":"\n  box-shadow: var(--ds-shadow-raised, 0 1px 1px rgba(9, 30, 66, 0.2), 0 0 1px 0 rgba(9, 30, 66, 0.24));\n"})(e)}
  ${A.E0}
  ${(e=>{const{mediaType:t}=e;return`background: ${"image"===t?"transparent":(0,pe.Z)({light:`var(--ds-background-neutral, ${L.IR})`,dark:`var(--ds-background-neutral, ${L.H8})`})(e)};`})(e)}

  line-height: normal;
  position: relative;

  ${(0,$e.W)(e)}

  ${(0,A.dp)()} .wrapper {
    ${A.E0};
    display: block;
    height: inherit;
    position: relative;

    .img-wrapper {
      position: relative;
      width: inherit;
      height: inherit;
      overflow: hidden;
      display: block;
      ${A.E0}
    }
  }
`,Pe=y.iv`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${"var(--ds-icon-inverse, white)"};

  /* we want to override default icon size and hover state */
  &:hover > * {
    width: 64px;
    height: 64px;
  }
`,Fe=y.iv`
  background: ${"var(--ds-background-neutral-bold, rgba(23, 43, 77, 0.7))"};
  border-radius: 100%;
  padding: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition-property: width, height;
  transition-duration: 0.1s;
  width: 56px;
  height: 56px;
`,Ae=y.iv`
  position: absolute;
  height: 100%;
  width: 100%;
`,Me=y.iv`
  ${(0,A.AG)()}
  ${(0,A.dp)()}
  border-radius: inherit;
  background-color: ${"var(--ds-blanket, rgba(9, 30, 66, 0.5))"};
`,Ne=y.iv`
  ${(0,A.AG)()} width: 100%;
  padding: 8px;
  color: ${`var(--ds-text-inverse, ${L.N0})`};
  font-size: 12px;
  line-height: 18px;
  word-wrap: break-word;
`,Oe=y.iv`
  display: flex;
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 8px;
  color: ${`var(--ds-text-inverse, ${L.N0})`};
`,Ue=y.iv`
  flex-grow: 1;

  /*
    force the height to always be 20px (the height of the cancel icon),
    so that the height of the progress bar doesn't jump when cards with
    and without a cancel icon are rendered side-by-side.
  */
  height: ${26}px;

  /*
    vertically center the progress bar within the 20px, keeping the progress bar full width
  */
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Le=y.iv`
  margin-left: 4px;
  /*
    button must appear above overlay
   */
  z-index: 2;
`;var _e=i(931318),ze=i(849646);const je=(e,t,i,r,s)=>!("doc"===r||!s&&"file"===t)&&(!!i&&("external-image"===t||s&&(0,ze.isMimeTypeSupportedByBrowser)(s)||"complete"===e||"loading-preview"===e)),We=y.iv`
  ${A.E0} z-index: 30;
  overflow: hidden;
  background-color: rgba(255, 255, 255, 0.3);

  .progressBar {
    width: 0%;
    height: 3px;
    transition: width 0.25s ease-in;
    background-color: white;
  }
`;class Ve extends n.Component{render(){if("number"!=typeof this.props.progress)return null;const e={width:100*Math.min(1,Math.max(0,this.props.progress))+"%"};return(0,y.tZ)("div",{css:We},(0,y.tZ)("div",{className:"progressBar",style:e}))}}Ve.displayName="ProgressBar";var Ge=i(110724);const He=e=>{const{disableOverlay:t,selectable:i,selected:r,mediaType:s,mediaName:n,status:a,progress:o}=e,l=(0,Ce.m)();return(0,y.tZ)("div",{id:"cardImageViewWrapper","data-testid":"media-file-card-view","data-test-media-name":n,"data-test-status":a,"data-test-progress":o,"data-test-selected":!!r||void 0,css:De({theme:l,disableOverlay:t,selectable:i,selected:r,mediaType:s}),className:`${Ge.n} ${r?Ge.z:""}`},e.children)},qe=e=>(0,y.tZ)("div",{css:Pe},e.children),Je=e=>(0,y.tZ)("div",{css:Ae},e.children);class Ke extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"wasThumbnailDisplayed",!1),(0,s.Z)(this,"renderCardContents",(()=>{const{status:e,mediaType:t,fileSize:i}=this.props;if("error"===e)return this.renderErrorContents();if("failed-processing"===e)return this.renderFailedContents();const r=""===i&&["processing","loading-preview"].includes(e);return"video"===t||this.isFileCardImageReadyForDisplay||r?this.renderSuccessCardContents():this.renderLoadingContents()})),(0,s.Z)(this,"renderLoadingContents",(()=>(0,y.tZ)("div",{className:"wrapper"},(0,y.tZ)("div",{className:"img-wrapper"},(0,y.tZ)(_e.o,null))))),(0,s.Z)(this,"renderErrorContents",(()=>{const{status:e,error:t,alt:i,mediaName:r,mediaType:s,actions:a,fileSize:o}=this.props;return(0,y.tZ)(n.Fragment,null,(0,y.tZ)("div",{className:"wrapper"}),(0,y.tZ)(Be,{cardStatus:e,error:t,persistent:!0,mediaName:r,mediaType:s,alt:i,subtitle:o,actions:a}))})),(0,s.Z)(this,"renderFailedContents",(()=>{const{status:e,mediaName:t,mediaType:i,actions:r,fileSize:s}=this.props;return(0,y.tZ)(n.Fragment,null,(0,y.tZ)("div",{className:"wrapper"}),(0,y.tZ)(Be,{cardStatus:e,noHover:!0,persistent:!0,mediaName:t,mediaType:i,subtitle:s,actions:r}))})),(0,s.Z)(this,"renderUploadingCardOverlay",(()=>{const{status:e,mediaName:t,mediaType:i,dataURI:r,selectable:s,selected:n}=this.props,a="doc"===i||!r;return(0,y.tZ)(Be,{cardStatus:e,persistent:a,mediaName:t,selectable:s,selected:n})})),(0,s.Z)(this,"renderPlayButton",(()=>{const{status:e,mediaItemType:t,mediaType:i,mimeType:r,selectable:s,dataURI:n}=this.props;return"video"!==i||s&&!je(e,t,n,i,r)?null:(0,y.tZ)(qe,null,(0,y.tZ)("div",{css:Fe},(0,y.tZ)(B.default,{testId:"media-card-play-button",label:"play",size:"large"})))})),(0,s.Z)(this,"onImageLoad",(()=>{const{onImageLoad:e,cardPreview:t}=this.props;e&&e(t)})),(0,s.Z)(this,"onImageError",(()=>{const{onImageError:e,cardPreview:t}=this.props;e&&e(t)})),(0,s.Z)(this,"renderMediaImage",(()=>{const{status:e,mediaItemType:t,dataURI:i,mediaType:r,mimeType:s,previewOrientation:n,onDisplayImage:a,alt:o}=this.props;return je(e,t,i,r,s)?(!this.wasThumbnailDisplayed&&a&&"image"===r&&(a(),this.wasThumbnailDisplayed=!0),(0,y.tZ)(k.j,{dataURI:i,alt:o,crop:this.isCropped,stretch:this.isStretched,previewOrientation:n,onImageLoad:this.onImageLoad,onImageError:this.onImageError})):null})),(0,s.Z)(this,"renderProgressBar",(()=>{const{mediaName:e,progress:t,actions:i,status:r}=this.props;return"uploading"!==r?null:(0,y.tZ)(Je,null,(0,y.tZ)("div",{css:Me},(0,y.tZ)("div",{css:Ne},(0,y.tZ)(T.l,{testId:"media-card-file-name",text:e||"",lines:2})),(0,y.tZ)("div",{css:Oe},(0,y.tZ)("div",{css:Ue},(0,y.tZ)(Ve,{progress:t})),(0,y.tZ)("div",{css:Le},i?(0,y.tZ)(le,{actions:i,triggerColor:"var(--ds-icon-inverse, white)"}):null))))})),(0,s.Z)(this,"renderSuccessCardContents",(()=>{const{disableOverlay:e,selectable:t,status:i}=this.props;let r=null;return e||("uploading"===i?t&&(r=this.renderUploadingCardOverlay()):r=this.renderSuccessCardOverlay()),(0,y.tZ)("div",{className:"wrapper"},(0,y.tZ)("div",{className:"img-wrapper"},this.renderMediaImage(),this.renderProgressBar(),this.renderPlayButton()),r)})),(0,s.Z)(this,"renderSuccessCardOverlay",(()=>{const{status:e,mediaName:t,mediaType:i,fileSize:r,dataURI:s,selectable:n,selected:a,actions:o}=this.props,l="doc"===i||!s;return(0,y.tZ)(Be,{cardStatus:e,persistent:l,mediaName:t,mediaType:i,selectable:n,selected:a,subtitle:r,actions:o})}))}render(){const{disableOverlay:e,selectable:t,selected:i,mediaType:r,progress:s,status:n,mediaName:a}=this.props;return(0,y.tZ)(He,{mediaName:a,status:n,progress:s,disableOverlay:e,selectable:t,selected:i,mediaType:r},this.renderCardContents())}get isFileCardImageReadyForDisplay(){const{dataURI:e,status:t}=this.props;return!!e||!["loading","processing","loading-preview"].includes(t)}get isCropped(){const{resizeMode:e}=this.props;return"crop"===e}get isStretched(){const{resizeMode:e}=this.props;return"stretchy-fit"===e}}Ke.displayName="FileCardImageView",(0,s.Z)(Ke,"defaultProps",{resizeMode:"crop",disableOverlay:!1});var Ye=i(82708),Xe=i(893865),Qe=i(659004),et=i(171124),tt=i(656246);function it(e,t){return e.map((e=>(0,r.Z)((0,r.Z)({},e),{},{handler:()=>{e.handler({type:"file",details:t})}})))}var rt=i(883383);var st=i(793519);const nt=({cardPreview:e,alt:t,resizeMode:i,onImageLoad:r,onImageError:s,onDisplayImage:a,mediaType:o,nativeLazyLoad:l,forceSyncDisplay:d})=>{(0,n.useEffect)((()=>{"image"===o&&a&&a()}),[o,a]);return n.createElement(k.j,(0,K.Z)({dataURI:e.dataURI,alt:t,previewOrientation:e.orientation,onImageLoad:()=>{r&&r(e)},onImageError:()=>{s&&s(e)},loading:l?"lazy":void 0,forceSyncDisplay:d},function(e){return{crop:"crop"===e,stretch:"stretchy-fit"===e}}(i)))};var at=i(213715),ot=i(790632);const lt="\n  display: inline-block;\n  vertical-align: bottom;\n  white-space: nowrap;\n  overflow: hidden;\n",dt=(0,ot.Z)("span",{target:"evjscy50"})(lt," max-width:calc(100% - ",(({fontSizePX:e,endFixedChars:t})=>pt(e)*t+1),"em);min-width:",(({fontSizePX:e,startFixedChars:t})=>pt(e)*t),";text-overflow:ellipsis;"),ct=(0,ot.Z)("span",{target:"evjscy51"})(lt," max-width:calc(100% - ",(({fontSizePX:e,startFixedChars:t})=>pt(e)*t),");position:relative;"),pt=e=>e/11*.46,ut=({text:e,fontSizePX:t=11,startFixedChars:i=4,endFixedChars:r=7})=>{const{left:s,right:a}=((e,t,i)=>{const r=i+t;if(e.length<=r)return{left:e,right:e};const s=e.length-i;return{left:e.substr(0,s),right:e.substr(s)}})(e,i,r);return s===a?n.createElement(n.Fragment,null,e):n.createElement(n.Fragment,null,n.createElement(dt,{fontSizePX:t,startFixedChars:i,endFixedChars:r},s),n.createElement(ct,{fontSizePX:t,startFixedChars:i,endFixedChars:r},a))};var ht=i(377751),mt=i(542646);const vt=/^#[0-9A-F]{6}$/i,ft=({breakpoint:e,titleBoxBgColor:t,theme:i})=>y.iv`
  position: absolute;
  bottom: 0;
  width: 100%;
  background-color: ${(0,pe.Z)({light:`var(--ds-surface, ${(0,j.m4)(t&&vt.test(t)?t:L.N0,1)})`,dark:`var(--ds-surface, ${(0,j.m4)(t&&vt.test(t)?t:"#161a1d",1)})`})({theme:i})};
  color: ${(0,pe.Z)({light:`var(--ds-text, ${L.q2})`,dark:"var(--ds-text, #C7D1DB)"})({theme:i})};
  cursor: inherit;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
  ${((e=mt.Uo.SMALL)=>{const t=mt.a6[e],i=t.titleBox.verticalPadding,r=t.titleBox.horizontalPadding;return`height: ${(0,mt.EY)(e)}px;\n    padding: ${i}px ${r}px;`})(e)}
`;ft.displayName="TitleBoxWrapper";const gt="white-space: nowrap;overflow: hidden;",bt="padding-right: 10px;",yt=({hasIconOverlap:e})=>y.iv`
  font-weight: 600;
  ${gt}
  ${e&&bt}
`;yt.displayName="FailedTitleBoxHeader";const wt=({hasIconOverlap:e})=>y.iv`
  text-overflow: ellipsis;
  ${gt}
  ${e&&bt}
`;wt.displayName="TitleBoxFooter";const xt=y.iv`
  position: absolute;
  right: 4px;
  bottom: 0px;
`,Et=y.iv`
  display: flex;
  align-items: center;
  justify-content: flex-start;
  span {
    vertical-align: middle;
    :nth-child(2) {
      margin-left: 4px;
      margin-right: 4px;
    }
  }
`,St=e=>{const{breakpoint:t,titleBoxBgColor:i}=e,r=(0,Ce.m)();return(0,y.tZ)("div",{id:"titleBoxWrapper",css:ft({breakpoint:t,titleBoxBgColor:i,theme:r})},e.children)},Ct=e=>{const{hasIconOverlap:t}=e;return(0,y.tZ)("div",{id:"titleBoxHeader",css:yt({hasIconOverlap:t})},e.children)},It=e=>{const{hasIconOverlap:t}=e;return(0,y.tZ)("div",{id:"titleBoxFooter",css:wt({hasIconOverlap:t})},e.children)},Zt=e=>(0,y.tZ)("div",{id:"titleBoxIcon",css:xt},e.children),Rt=e=>(0,y.tZ)("div",{css:Et},e.children),kt=(0,b.ZP)((({timestamp:e,intl:t})=>{const{locale:i="en"}=t||{locale:"en"};return n.createElement(n.Fragment,null,(0,ht.p6)(e,i))})),Tt=({name:e,createdAt:t,breakpoint:i,titleBoxBgColor:r,titleBoxIcon:s})=>n.createElement(St,{breakpoint:i,titleBoxBgColor:r},n.createElement(Ct,{hasIconOverlap:!!s&&!t},n.createElement(ut,{text:e})),t?n.createElement(It,{hasIconOverlap:!!s},n.createElement(kt,{timestamp:t})):null,"LockFilledIcon"===s&&n.createElement(Zt,null,n.createElement(at.default,{label:"",size:"small"})));var Bt=i(144024);const $t=({breakpoint:e,customMessage:t=I.s.failed_to_load})=>n.createElement(St,{breakpoint:e},n.createElement(Rt,null,n.createElement(Bt.default,{label:"Warning",size:"small",primaryColor:`var(--ds-text-danger, ${L.rt})`}),n.createElement("span",null,n.createElement(rt.Z,t))));var Dt=i(294416),Pt=i(65664);const Ft=e=>(0,y.tZ)("div",{css:Pt.$g,className:Pt.Wt},e.children),At=()=>(0,y.tZ)("div",{css:Pt.Oe,className:Pt.hi}),Mt=()=>n.createElement(Ft,null,n.createElement(At,null),n.createElement(B.default,{label:"play",size:"large"}));var Nt=i(375170);const Ot=e=>(0,y.tZ)("div",{id:"tickBoxWrapper",css:(0,Nt.eZ)(e.selected),className:Nt.j5},e.children),Ut=({selected:e})=>n.createElement(Ot,{selected:e},n.createElement(P.default,{label:"tick"})),Lt="media-card-blanket",_t=`background-color: var(--ds-blanket, ${L.xS});`,zt=e=>y.iv`
  ${(0,j.eR)()}
  position: absolute;
  width: 100%;
  height: 100%;
  max-height: 100%;
  max-width: 100%;
  left: 0;
  top: 0;
  ${e?_t:""}
`;zt.displayName="Blanket";const jt=e=>{const{isFixed:t}=e;return(0,y.tZ)("div",{css:zt(t),className:Lt})},Wt="media-card-actions-bar",Vt="opacity: 1;",Gt=e=>y.iv`
  ${e?Vt:"opacity: 0;"}
  ${(0,j.eR)()}
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
`;Gt.displayName="ActionsBarWrapper";const Ht=e=>(0,y.tZ)("div",{id:"actionsBarWrapper",css:Gt(e.isFixed),className:Wt},e.children);class qt extends n.Component{render(){const{isFixed:e,actions:t}=this.props;return 0===t.length?null:n.createElement(Ht,{isFixed:e},n.createElement(le,{actions:t,variant:V.filled}))}}qt.displayName="ActionsBar";const Jt=({hasTitleBox:e,breakpoint:t})=>y.iv`
  position: absolute;
  width: 100%;
  height: calc(100% - ${function(e,t){return e?`${(0,mt.EY)(t)}px`:"0px"}(e,t)});
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`;Jt.displayName="MediaIconWrapper";const Kt=e=>{const{breakpoint:t,hasTitleBox:i}=e;return(0,y.tZ)("div",{id:"iconWrapper",css:Jt({breakpoint:t,hasTitleBox:i})},e.children)},Yt=y.F4`
 0% { opacity: 1}
 50% { opacity: 0.3 }
 100% { opacity: 1; }`,Xt=y.iv`
  animation-name: ${Yt};
  animation-duration: 3.5s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
`,Qt=e=>y.iv`
  ${(({animated:e,reducedFont:t})=>y.iv`
  overflow: hidden;
  opacity: 1;
  font-weight: 450;
  ${t?"font-size: 0.7em;":""}
  color: ${`var(--ds-text-subtlest, ${L.hH})`};
  text-align: center;
  ${e?Xt:""}
  margin-bottom: -1em;
  padding: 3px 10px;
`)(e)}
`;Qt.displayName="IconMessageWrapper";const ei=e=>{const{animated:t,reducedFont:i}=e;return(0,y.tZ)("div",{id:"iconMessageWrapper",css:Qt({animated:t,reducedFont:i})},e.children)},ti=({messageDescriptor:e,animated:t=!1,reducedFont:i=!1})=>n.createElement(ei,{animated:t,reducedFont:i},n.createElement("span",null,n.createElement(rt.Z,e))),ii=({disableAnimation:e})=>n.createElement(ti,{messageDescriptor:I.s.creating_preview,animated:!e}),ri=e=>n.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.preview_unavailable})),si=e=>n.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.failed_to_load})),ni=e=>n.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.failed_to_upload})),ai=e=>n.createElement(ti,(0,K.Z)({},e,{messageDescriptor:I.s.preview_currently_unavailable,reducedFont:!0}));var oi=i(373839),li=i(654910),di=i(980663);const ci=({breakpoint:e,dimensions:t,appearance:i,disableOverlay:r,displayBackground:s,selected:n,isPlayButtonClickable:a,isTickBoxSelectable:o,shouldDisplayTooltip:l,mediaCardCursor:d,theme:c})=>y.iv`
  ${(0,j.eR)()}
  box-sizing: border-box;
  * {
    box-sizing: border-box;
  }
  position: relative;
  font-family: ${(0,_.I8)()};
  ${(0,st.mY)(t,i)}
  ${s&&`background: ${(0,pe.Z)({light:`var(--ds-background-neutral, ${L.IR})`,dark:"var(--ds-background-neutral, #22272C)"})({theme:c})};`}
  ${A.E0}
  ${(0,st.Nn)(d)}
  ${(0,st.Dl)(r,n)}
  ${(0,st.U8)(e)};
  ${di.G}

  /* We use classnames from here exceptionally to be able to handle styles when the Card is on hover */
  ${(0,st.gz)(a)}
  ${(0,st.lh)(o)}
  &:hover .${Lt} {
    ${_t}
  }
  &:hover .${Wt} {
    ${Vt}
  }

  /* Tooltip does not support percentage dimensions. We enforce them here */
  ${l&&"> div { width: 100%; height: 100%; }"}
`;ci.displayName="NewFileExperienceWrapper";const pi=e=>{const{testId:t,dimensions:i,appearance:r,onClick:s,onMouseEnter:n,innerRef:a,breakpoint:o,mediaCardCursor:l,disableOverlay:d,selected:c,displayBackground:p,isPlayButtonClickable:u,isTickBoxSelectable:h,shouldDisplayTooltip:m}=e,v=(0,Ce.m)();return(0,y.tZ)("div",{id:"newFileExperienceWrapper",className:li.A,"data-testid":t,css:ci({breakpoint:o,dimensions:i,appearance:r,disableOverlay:d,displayBackground:p,selected:c,isPlayButtonClickable:u,isTickBoxSelectable:h,shouldDisplayTooltip:m,mediaCardCursor:l,theme:v}),ref:a,onClick:s,onMouseEnter:n},e.children)};var ui=i(874325);const hi=e=>{const{testId:t,shouldUsePointerCursor:i,breakpointSize:r,dimensions:s,onClick:n,onMouseEnter:a,innerRef:o}=e;return(0,y.tZ)("div",{id:"cardViewWrapper","data-testid":t,css:(0,ui.eZ)({shouldUsePointerCursor:i,breakpointSize:r,dimensions:s}),onClick:n,onMouseEnter:a,ref:o},e.children)};class mi extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{didImageRender:!1}),(0,s.Z)(this,"divRef",n.createRef()),(0,s.Z)(this,"onImageLoad",(e=>{const{onImageLoad:t,cardPreview:i}=this.props;e.dataURI===(null==i?void 0:i.dataURI)&&(this.setState({didImageRender:!0}),t&&t(i))})),(0,s.Z)(this,"onImageError",(e=>{const{onImageError:t}=this.props;this.setState({didImageRender:!1}),t&&t(e)})),(0,s.Z)(this,"saveElementWidth",(()=>{const{dimensions:e}=this.props;if(!e)return;const{width:t}=e;if(t&&(0,Qe.v)(t)&&this.divRef.current){const e=(0,tt.z)(this.divRef.current,"width");this.setState({elementWidth:e})}})),(0,s.Z)(this,"renderFileNewExperience",(()=>{const{dimensions:e,appearance:t,onClick:i,onMouseEnter:r,testId:s,metadata:n,status:a,selected:o,selectable:l,disableOverlay:d,cardPreview:c,mediaCardCursor:p}=this.props,{name:u}=n||{},h=!c||!d||"error"===a||"failed-processing"===a,m=!(!this.shouldRenderPlayButton()||!d),v=!d&&!!l&&!o,f=!d;return(0,y.tZ)(pi,{testId:s||"media-card-view",dimensions:e,appearance:t,onClick:i,onMouseEnter:r,innerRef:this.divRef,breakpoint:this.breakpoint,mediaCardCursor:p,disableOverlay:!!d,selected:!!o,displayBackground:h,isPlayButtonClickable:m,isTickBoxSelectable:v,shouldDisplayTooltip:f},f?(0,y.tZ)(S.Z,{content:u,position:"bottom",tag:"div"},this.renderNewExperienceCard()):this.renderNewExperienceCard())})),(0,s.Z)(this,"renderFile",(()=>{const{cardPreview:e,status:t,mediaItemType:i,metadata:r,progress:s,resizeMode:a,dimensions:o,selectable:l,selected:d,disableOverlay:c,alt:p,onDisplayImage:u,actions:h}=this.props,{dataURI:m,orientation:v}=e||{},{name:f,mediaType:g,mimeType:b,size:w}=r||{},x=r&&h?it(h,r):[],E=(e=>"error"===e&&n.createElement(rt.Z,I.s.failed_to_load))(t),S=w?(0,C.n)(w):"";return(0,y.tZ)(Ke,{error:E,dimensions:o,selectable:l,selected:d,dataURI:m,mediaName:f,mediaType:g,mimeType:b,fileSize:S,status:t,mediaItemType:i,progress:s,resizeMode:a,onDisplayImage:u,actions:x,disableOverlay:c,previewOrientation:v,alt:p,onImageLoad:this.onImageLoad,onImageError:this.onImageError,cardPreview:e})})),(0,s.Z)(this,"getRenderConfigByStatus",(()=>{const{cardPreview:e,status:t,metadata:i,disableOverlay:s,error:n,selectable:a,disableAnimation:o}=this.props,{name:l,mediaType:d}=i||{},{didImageRender:c}=this.state,p=!(!i||0!==i.size),u={renderTypeIcon:!c,renderImageRenderer:!!e,renderPlayButton:!!e&&"video"===d,renderBlanket:!s,renderTitleBox:!s&&!!l,renderTickBox:!s&&!!a};switch(t){case"uploading":return(0,r.Z)((0,r.Z)({},u),{},{renderBlanket:!s||"video"!==d,isFixedBlanket:!0,renderProgressBar:!0});case"processing":return(0,r.Z)((0,r.Z)({},u),{},{iconMessage:c||p?void 0:(0,y.tZ)(ii,{disableAnimation:o})});case"complete":return u;case"error":case"failed-processing":const e=(0,r.Z)((0,r.Z)({},u),{},{renderTypeIcon:!0,renderImageRenderer:!1,renderTitleBox:!1,renderPlayButton:!1});let t,a;const{secondaryError:h}=n||{};if((0,Z.no)(h)||(0,R.C)(h)?t=(0,y.tZ)(ai,null):(0,oi.dG)(n)?(t=(0,y.tZ)(ni,null),a=I.s.failed_to_upload):t=i?(0,y.tZ)(ri,null):(0,y.tZ)(si,null),!s){const i=!l||!!a;return(0,r.Z)((0,r.Z)({},e),{},{renderTitleBox:!!l&&!a,renderFailedTitleBox:i,iconMessage:i?void 0:t,customTitleMessage:a})}return(0,r.Z)((0,r.Z)({},e),{},{iconMessage:t});case"loading-preview":case"loading":default:return(0,r.Z)((0,r.Z)({},u),{},{renderPlayButton:!1,renderTypeIcon:!1,renderSpinner:!c})}})),(0,s.Z)(this,"renderNewExperienceCard",(()=>{const{renderTypeIcon:e,iconMessage:t,renderImageRenderer:i,renderSpinner:r,renderPlayButton:s,renderBlanket:a,renderProgressBar:o,renderTitleBox:l,renderFailedTitleBox:d,renderTickBox:c,isFixedBlanket:p,customTitleMessage:u}=this.getRenderConfigByStatus(),{progress:h,selected:m,status:v,metadata:f}=this.props,{name:g}=f||{},b=!!l||!!d;return(0,y.tZ)(n.Fragment,null,(0,y.tZ)("div",{css:st.u9,className:"media-file-card-view","data-testid":"media-file-card-view","data-test-media-name":g,"data-test-status":v,"data-test-progress":h,"data-test-selected":!!m||void 0},e&&this.renderMediaTypeIcon(b,t),r&&this.renderSpinner(b),i&&this.renderImageRenderer(),s&&this.renderPlayButton(b),a&&this.renderBlanket(!!p),l&&this.renderTitleBox(),d&&this.renderFailedTitleBox(u),o&&this.renderProgressBar(!b),c&&this.renderTickBox()),this.renderActionsBar())}))}componentDidMount(){this.saveElementWidth();const{innerRef:e}=this.props;e&&this.divRef.current&&e(this.divRef.current)}componentDidUpdate({cardPreview:e}){const{cardPreview:t}=this.props;e&&!t&&this.setState({didImageRender:!1})}get width(){const{elementWidth:e}=this.state;if(e)return e;const{width:t}=this.props.dimensions||{width:void 0};return t?(0,et.g)(t):Xe.tN.width}get breakpoint(){const e=this.state.elementWidth||(this.props.dimensions?this.props.dimensions.width:"")||Xe.tN.width;return(0,st.Gd)(parseInt(`${e}`,10))}render(){const{featureFlags:e}=this.props;if((0,w.OC)("newCardExperience",e))return this.renderFileNewExperience();const{dimensions:t,appearance:i,onClick:r,onMouseEnter:s,testId:n}=this.props,a=t||(0,Xe.$0)(i);return(0,y.tZ)(hi,{testId:n||"media-card-view",shouldUsePointerCursor:!0,breakpointSize:(0,Ye.M0)(this.width),dimensions:a,onClick:r,onMouseEnter:s,innerRef:this.divRef},this.renderFile())}renderSpinner(e){return(0,y.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,y.tZ)(E.Z,null))}shouldRenderPlayButton(){const{metadata:e,cardPreview:t}=this.props,{mediaType:i}=e||{};return!("video"!==i||!t)}renderPlayButton(e){return(0,y.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,y.tZ)(Mt,null))}renderBlanket(e){return(0,y.tZ)(jt,{isFixed:e})}renderTitleBox(){const{metadata:e,titleBoxBgColor:t,titleBoxIcon:i}=this.props,{name:r,createdAt:s}=e||{};return!!r&&(0,y.tZ)(Tt,{name:r,createdAt:s,breakpoint:this.breakpoint,titleBoxIcon:i,titleBoxBgColor:t})}renderFailedTitleBox(e){return(0,y.tZ)($t,{breakpoint:this.breakpoint,customMessage:e})}renderProgressBar(e){const{progress:t}=this.props;return(0,y.tZ)(Dt.k,{progress:t,breakpoint:this.breakpoint,positionBottom:e})}renderImageRenderer(){const{cardPreview:e,metadata:{mediaType:t="unknown"}={},alt:i,resizeMode:r,onDisplayImage:s,nativeLazyLoad:n,forceSyncDisplay:a}=this.props;return!!e&&(0,y.tZ)(nt,{cardPreview:e,mediaType:t,alt:i,resizeMode:r,onDisplayImage:s,onImageLoad:this.onImageLoad,onImageError:this.onImageError,nativeLazyLoad:n,forceSyncDisplay:a})}renderTickBox(){const{selected:e}=this.props;return(0,y.tZ)(Ut,{selected:e})}renderMediaTypeIcon(e,t){const{metadata:i}=this.props,{mediaType:r,mimeType:s,name:n}=i||{};return(0,y.tZ)(Kt,{breakpoint:this.breakpoint,hasTitleBox:e},(0,y.tZ)(x.q,{testId:"media-card-file-type-icon",mediaType:r,mimeType:s,name:n}),t)}renderActionsBar(){const{disableOverlay:e,actions:t,metadata:i}=this.props,r=i&&t?it(t,i):[];return e||!t||0===t.length?null:(0,y.tZ)(qt,{actions:r})}}mi.displayName="CardViewBase",(0,s.Z)(mi,"defaultProps",{appearance:"auto"});const vi=(0,o.Z)({onClick:(0,te.Jo)({eventType:"ui",action:"clicked",actionSubject:"mediaCard",attributes:{}})})(mi),fi=()=>{if("undefined"!=typeof window&&void 0!==window.document)return window.document},gi=e=>(t,i)=>{for(let r of t)if(r.isIntersecting){e(),i.disconnect();break}},bi=({onVisible:e,cardEl:t,children:i})=>((0,n.useEffect)((()=>{let i;try{i=new IntersectionObserver(gi(e),{root:fi(),rootMargin:"900px"})}catch(r){i=new IntersectionObserver(gi(e),{root:null,rootMargin:"900px"})}return t&&i.observe(t),()=>{i.disconnect()}}),[t,e]),n.createElement(n.Fragment,null,i)),yi=({cardEl:e,onVisible:t,children:i})=>"undefined"==typeof IntersectionObserver?n.createElement(n.Fragment,null,i):n.createElement(bi,{cardEl:e,onVisible:t},i);const wi=e=>"px"===e.substr(-2)&&!isNaN(+e.slice(0,-2)),xi=(e,t)=>{const i=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches?2:1,r=t.dimensions&&t.dimensions[e]||"";return(0,Qe.v)(r)&&t.element?(0,tt.z)(t.element,e)*i:"number"==typeof r?r*i:wi(`${r}`)?parseInt(`${r}`,10)*i:Xe.tN[e]*i};var Ei=i(737001),Si=i(629413),Ci=i(608259),Ii=i(791306);class Zi extends Ci.LRUMap{constructor(e){super(e),this.eventEmitter=new Ii.EventEmitter2}shift(){const e=super.shift();return this.eventEmitter.emit("shift",e),e}on(e,t){this.eventEmitter.on(e,t)}}class Ri{constructor(e){this.cache=new Zi(e),this.cache.on("shift",(e=>{e&&e[1].dataURI&&URL.revokeObjectURL(e[1].dataURI)}))}has(e){return!!this.cache.find(e)}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t)}remove(e){const t=this.cache.delete(e);t&&URL.revokeObjectURL(t.dataURI)}}const ki=(e,t)=>[e,t||"crop"].join("-");const Ti=new class{constructor(e){(0,s.Z)(this,"get",((e,t)=>{const i=ki(e,t);return this.previewCache.get(i)})),(0,s.Z)(this,"set",((e,t,i)=>{const r=ki(e,t);this.previewCache.set(r,i)})),(0,s.Z)(this,"remove",((e,t)=>{const i=ki(e,t);this.previewCache.remove(i)})),this.previewCache=e}}(new Ri(50));var Bi=i(932125),$i=i(97077);const Di=async e=>{try{return{dataURI:await(async e=>new Promise(((t,i)=>{const r=URL.createObjectURL(e),s=document.createElement("video");s.preload="metadata",s.src=r,s.muted=!0,s.play().catch((()=>i(new Error("failed to play video")))),s.addEventListener("timeupdate",(function e(){if(s.removeEventListener("timeupdate",e),s.pause(),URL.revokeObjectURL(r),!s.videoWidth&&!s.videoHeight)return i(new Error("error retrieving video dimensions"));const n=document.createElement("canvas");n.width=s.videoWidth,n.height=s.videoHeight;const a=n.getContext("2d");if(!a)return i(new Error("error creating canvas context"));a.drawImage(s,0,0,n.width,n.height);const o=n.toDataURL("image/jpeg",.85);t(o)})),s.addEventListener("error",(()=>{i(new Error("failed to load video")),URL.revokeObjectURL(r)}))})))(e),orientation:1,source:"local"}}catch(t){throw new oi.go("local-preview-video",t instanceof Error?t:void 0)}},Pi=async e=>{let t;try{t=(await e).value}catch(i){throw new oi.go("local-preview-rejected",i instanceof Error?i:void 0)}if("string"==typeof t)return{dataURI:t,orientation:1,source:"local"};if(t instanceof Blob){const{type:e}=t;switch((0,Bi.L4)(e)){case"image":return(async e=>{try{const t=await(0,$i.T8)(e);return{dataURI:URL.createObjectURL(e),orientation:t,source:"local"}}catch(i){throw new oi.go("local-preview-image",i instanceof Error?i:void 0)}})(t);case"video":return Di(t)}}throw new oi.go("local-preview-unsupported")},Fi=e=>"number"==typeof e||wi(`${e}`),Ai=(e,t)=>{if(!e||!t)return!1;const i=Fi(e)&&Fi(t),r=(0,Qe.v)(e)&&(0,Qe.v)(t);return i||r},Mi=(e,t)=>{if(e&&t&&Ai(e.width,t.width)&&Ai(e.height,t.height)){const i=parseInt(`${e.width}`,10)<parseInt(`${t.width}`,10),r=parseInt(`${e.height}`,10)<parseInt(`${t.height}`,10);return i||r}return!1};var Ni=i(265139);const Oi=(e,t,i)=>{const r="size"in e&&!!e.size,{mediaType:s}="mediaType"in e&&e||{},{mimeType:n}="mimeType"in e&&e||{},a=!!s&&(0,Ni.dw)(s,i),o=!t&&(0,u.jL)(e)&&(e=>"image"===e||"video"===e)(s)&&!!n&&(0,Si.PU)(n),l=(0,u.mo)(e);return{hasFilesize:r,isPreviewable:a,hasPreview:o||l,isSupportedByBrowser:!!n&&(0,Si.PU)(n)}},Ui=(e,t,i)=>{const r=t=>(0,te.LO)(t,e);switch(t){case"cache-hit":r((0,te.np)(i));break;case"remote-success":r((0,te.C2)(i))}},Li=(e,t)=>{if(!e)return;const i=parseInt(`${null==e?void 0:e.width}`,10),r=parseInt(`${null==t?void 0:t.width}`,10),s=parseInt(`${null==e?void 0:e.height}`,10),n=parseInt(`${null==t?void 0:t.height}`,10);return{width:((r-i)/i*100).toFixed(2),height:((n-s)/s*100).toFixed(2)}},_i=Ti.get,zi=Ti.remove,ji=e=>"mimeType"in e&&(0,Si.PU)(e.mimeType)&&(0,u.jL)(e)?e.preview:void 0,Wi=(e,t,i,s)=>{let n;switch(i.source){case"local":n="cache-local";break;case"remote":n="cache-remote";break;case"ssr-server":n="cache-ssr-server";break;case"ssr-client":n="cache-ssr-client";break;default:n=i.source}const a=s?(0,Ei.NI)(i.dataURI,s):i.dataURI;return Ti.set(e,t,(0,r.Z)((0,r.Z)({},i),{},{source:n,dataURI:a})),(0,r.Z)((0,r.Z)({},i),{},{dataURI:a})},Vi=e=>["ssr-server","cache-ssr-server"].includes(e.source),Gi=e=>["ssr-client","cache-ssr-client"].includes(e.source),Hi=e=>"ssr-data"===e.source,qi=async(e,t,i,s,n,a)=>{const o=await(async(e,t,i,r)=>{try{const s=await e.getImage(t,i,void 0,void 0,r);return{dataURI:URL.createObjectURL(s),orientation:1,source:"remote"}}catch(s){throw new oi.Jj("remote-preview-fetch",s instanceof Error?s:void 0)}})(e,t,s,a);return Wi(t,s.mode,(0,r.Z)((0,r.Z)({},o),{},{dimensions:i}),n)},Ji=e=>{switch(e){case"processed":return"succeeded";case"processing":return"running";case"failed-processing":return"failed"}},Ki=(e,t)=>{return(0,h.J3)(e)?t&&!(0,u.f6)(t)?{id:(i=t).id,name:i.name,size:i.size,mimeType:i.mimeType,createdAt:i.createdAt,mediaType:i.mediaType,processingStatus:Ji(i.status)}:{id:e.id}:{id:e.mediaItemType,name:e.name||e.dataURI,mediaType:"image"};var i},Yi=(0,n.lazy)((async()=>{const{InlinePlayer:e}=await Promise.all([i.e(61769),i.e(78248),i.e(11216),i.e(89990),i.e(61201),i.e(83474),i.e(58516)]).then(i.bind(i,984138));return{default:e}})),Xi=e=>e.map((e=>{return"string"==typeof(t=e)?`'${t}'`:"object"==typeof t?JSON.stringify(t):void 0===t?"undefined":t;var t})).join(",");function Qi(e=window){const t="__MEDIA_INTERNAL";return e[t]||(e[t]={}),e[t]}function er(e=window){const t=Qi(e),i="mediaCardSsr";return t[i]||(t[i]={}),t[i]}const tr=e=>e?`-${e}`:"",ir=({id:e,collectionName:t,occurrenceKey:i})=>`${e}${tr(t)}${tr(i)}`,rr=(e,t,i,r,s=window)=>{er(s)[e]={dataURI:t,dimensions:i,error:r}},sr=(e,t,i,r)=>{const s=((e,...t)=>`(${e.toString()})(${Xi(t)});`)(rr,ir(e),t,i,r);return`(function(){\n  ${[er.toString(),Qi.toString(),s].join(";")}\n})();\n`},nr=({dataURI:e,identifier:t,dimensions:i,error:r})=>n.createElement("script",{dangerouslySetInnerHTML:{__html:sr(t,e,i,r)}}),ar=(e,t,i)=>{const r=((e,t,i)=>(0,w.OC)("fetchFileStateAfterUpload",i)?((e,{isPreviewable:t,hasPreview:i})=>{switch(e){case"uploading":case"failed-processing":case"error":case"processing":return e;case"processed":return t&&i?"loading-preview":"complete";default:return"loading"}})(e,t):((e,{hasFilesize:t,isPreviewable:i,hasPreview:r})=>{switch(e){case"uploading":case"failed-processing":case"error":return e;case"processing":return t?i?"processing":"complete":"processing";case"processed":return i&&r?"loading-preview":"complete";default:return"loading"}})(e,t))(e.status,Oi(e,t,i),i),s="error"===r&&(0,u.f6)(e)?new oi.Rq("error-file-state",new Error(e.message)):void 0;return{fileState:e,status:r,progress:"uploading"===r&&"uploading"===e.status?e.progress:1,error:s}};let or;!function(e){e.Action="pointer",e.NotReady="wait"}(or||(or={}));var lr=i(253851),dr=i(849278),cr=i(907086);const pr="@atlaskit/media-card",ur="74.6.0";let hr;const mr=e=>{if(!hr){const e={platform:{component:"media-card"},type:lr.Z.Experience,performanceType:lr.R.InlineResult,featureFlags:te.s};hr=new dr.I("media-card-render",e)}return hr.getInstance(e)},vr=(e,t)=>{mr(e).success({metadata:(0,r.Z)((0,r.Z)({},t),{},{packageName:pr,packageVersion:ur,mediaEnvironment:(0,cr.rl)(),mediaRegion:(0,cr.ro)()})})},fr=(e,t)=>{mr(e).failure({metadata:(0,r.Z)((0,r.Z)({},t),{},{packageName:pr,packageVersion:ur,mediaEnvironment:(0,cr.rl)(),mediaRegion:(0,cr.ro)()})})};class gr extends n.Component{constructor(e){super(e),(0,s.Z)(this,"internalOccurrenceKey",(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,"")),(0,s.Z)(this,"hasBeenMounted",!1),(0,s.Z)(this,"fileStateFlags",{wasStatusUploading:!1,wasStatusProcessing:!1}),(0,s.Z)(this,"ssrReliability",{server:{status:"unknown"},client:{status:"unknown"}}),(0,s.Z)(this,"timeElapsedTillCommenced",performance.now()),(0,s.Z)(this,"traceContext",{traceId:(0,c.QB)(8)}),(0,s.Z)(this,"getImageURLParams",(({collectionName:e})=>(0,r.Z)((0,r.Z)({collection:e,mode:(0,p.b)(this.props.resizeMode)},this.requestedDimensions),{},{allowAnimated:!0}))),(0,s.Z)(this,"getMediaBlobUrlAttrs",((e,t)=>{const{id:i,collectionName:s}=e,{originalDimensions:n,contextId:a,alt:o}=this.props,{mimeType:l,name:d,size:c}=Ki(e,t);return a?(0,r.Z)((0,r.Z)({id:i,collection:s,contextId:a,mimeType:l,name:d,size:c},n||this.requestedDimensions),{},{alt:o}):void 0})),(0,s.Z)(this,"getCardPreviewParams",((e,t)=>{const{isBannedLocalPreview:i}=this.state,{id:r}=e,{dimensions:s={},mediaClient:n,createAnalyticsEvent:a}=this.props;return{mediaClient:n,id:r,dimensions:s,onLocalPreviewError:this.fireNonCriticalErrorEvent,filePreview:i?void 0:ji(t),isRemotePreviewReady:(0,u.mo)(t),imageUrlParams:this.getImageURLParams(e),mediaBlobUrlAttrs:this.getMediaBlobUrlAttrs(e,t),createAnalyticsEvent:a,featureFlags:this.props.featureFlags,traceContext:this.traceContext}})),(0,s.Z)(this,"setCacheSSRPreview",(e=>{this.fetchAndCacheRemotePreview(e).catch((()=>{}))})),(0,s.Z)(this,"refetchSSRPreview",(async e=>{try{const t=await this.fetchAndCacheRemotePreview(e);this.safeSetState({cardPreview:t})}catch(t){const e=(0,oi.CV)("remote-preview-fetch-ssr",t,!0);this.fireNonCriticalErrorEvent(e)}})),(0,s.Z)(this,"resolveUpfrontPreview",(async e=>{const t=(0,r.Z)({},this.props.dimensions);try{const i=await this.fetchAndCacheRemotePreview(e),{dimensions:r}=this.props;!Mi(t,r)?this.safeSetState({cardPreview:i,wasResolvedUpfrontPreview:!0}):this.safeSetState({wasResolvedUpfrontPreview:!0})}catch(i){this.safeSetState({wasResolvedUpfrontPreview:!0})}})),(0,s.Z)(this,"fetchAndCacheRemotePreview",(e=>{const{mediaClient:t,dimensions:i={}}=this.props;return qi(t,e.id,i,this.getImageURLParams(e),this.getMediaBlobUrlAttrs(e))})),(0,s.Z)(this,"resolvePreview",(async(e,t)=>{try{const i=this.getCardPreviewParams(e,t),s=await(async({mediaClient:e,id:t,dimensions:i={},filePreview:s,onLocalPreviewError:n,isRemotePreviewReady:a,imageUrlParams:o,mediaBlobUrlAttrs:l,createAnalyticsEvent:d,featureFlags:c,traceContext:p})=>{const u=o.mode,h=Ti.get(t,u),m=Mi(null==h?void 0:h.dimensions,i);if(h&&!m)return(0,w.OC)("memoryCacheLogging",c)&&d&&Ui(d,"cache-hit",{fileId:t,prevDimensions:h.dimensions,currentDimensions:i,source:h.source}),h;try{if(s){const e=await Pi(s);return Wi(t,u,(0,r.Z)((0,r.Z)({},e),{},{dimensions:i}),l)}}catch(f){if((!(0,oi.G4)(f)||(0,oi.G4)(f)&&!a)&&n&&n(f),!a)throw f}if(!a)throw new oi.Rq("remote-preview-not-ready");const v=await qi(e,t,i,o,l,p);return(0,w.OC)("memoryCacheLogging",c)&&d&&Ui(d,"remote-success",{fileId:t,prevDimensions:null==h?void 0:h.dimensions,currentDimensions:i,dimensionsPercentageDiff:Li(null==h?void 0:h.dimensions,i),source:v.source}),v})(i);this.safeSetState({cardPreview:s})}catch(i){const e=(0,oi.CV)("preview-fetch",i);(0,oi.oH)(e)?this.safeSetState({isBannedLocalPreview:!0}):this.safeSetState({status:"error",error:e})}})),(0,s.Z)(this,"getPerformanceAttributes",(()=>{const{timeElapsedTillCommenced:e}=this,t=performance.now();return{overall:{durationSincePageStart:t,durationSinceCommenced:e&&t-e}}})),(0,s.Z)(this,"logSSRImageError",(e=>{if(e){const t=(0,r.Z)({status:"fail"},(0,te.dg)(new oi.gK(e.source)));Gi(e)&&(this.ssrReliability.client=t),Hi(e)&&(this.ssrReliability.server=t,this.ssrReliability.client=t)}})),(0,s.Z)(this,"onImageError",(e=>{this.logSSRImageError(e);const{cardPreview:t}=this.state;if((null==e?void 0:e.dataURI)!==(null==t?void 0:t.dataURI))return;const i=new oi.gK(null==e?void 0:e.source),r=e&&["local","cache-local"].includes(e.source);const s=e&&(Gi(e)||Hi(e));if(r||s){const e={cardPreview:void 0};r&&(e.isBannedLocalPreview=!0,this.fireNonCriticalErrorEvent(i));const{identifier:t,resizeMode:s}=this.props,n=(0,p.b)(s);(0,h.J3)(t)&&zi(t.id,n),this.safeSetState(e)}else this.safeSetState({status:"error",error:i})})),(0,s.Z)(this,"onImageLoad",(e=>{e&&(Gi(e)&&"unknown"===this.ssrReliability.client.status&&(this.ssrReliability.client={status:"success"}),Hi(e)&&"unknown"===this.ssrReliability.server.status&&(this.ssrReliability.server={status:"success"},this.ssrReliability.client={status:"success"}));const{cardPreview:t}=this.state;(null==e?void 0:e.dataURI)===(null==t?void 0:t.dataURI)&&this.safeSetState({previewDidRender:!0})})),(0,s.Z)(this,"fireCopiedEvent",(()=>{const{createAnalyticsEvent:e}=this.props,{cardRef:t}=this.state;t&&e&&((e,t,i)=>{if("function"==typeof window.getSelection){var r;const s=window.getSelection();null!=s&&null!==(r=s.containsNode)&&void 0!==r&&r.call(s,i,!0)&&(0,te.LO)((0,te.Jn)(t),e)}})(e,this.metadata.id,t)})),(0,s.Z)(this,"fireScreenEvent",(()=>{const{createAnalyticsEvent:e}=this.props;e&&((e,t)=>{(0,te.LO)((0,te.De)(t),e)})(e,this.fileAttributes)})),(0,s.Z)(this,"fireNonCriticalErrorEvent",(e=>{const{createAnalyticsEvent:t}=this.props,{fileState:i}=this.state;t&&((e,t,i,r,s=new oi.Rq("missing-error-data"),n,a)=>{const o=(0,te.Ln)(t,i,s,r,n,a);(0,te.LO)(o,e)})(t,this.state.status,this.fileAttributes,this.ssrReliability,e,this.traceContext,null==i?void 0:i.metadataTraceContext)})),(0,s.Z)(this,"safeSetState",(e=>{this.hasBeenMounted&&this.setState(((e,t)=>i=>{return e.status&&(r=i.status,["complete","error","failed-processing"].includes(r))&&"complete"!==e.status?(e.error&&t(e.error),i):e;var r})(e,this.fireNonCriticalErrorEvent))})),(0,s.Z)(this,"unsubscribe",(()=>{this.subscription&&this.subscription.unsubscribe(),this.hasBeenMounted&&this.setState({isBannedLocalPreview:!1})})),(0,s.Z)(this,"onCardViewClick",((e,t)=>{const{identifier:i,useInlinePlayer:r,shouldOpenMediaViewer:s}=this.props,{cardPreview:n}=this.state,{metadata:a}=this;if(this.onClick(e,t),!a)return;const o=a&&"video"===a.mediaType;if(r&&o&&n)this.setState({isPlayingFile:!0,shouldAutoplay:!0});else if(s){let e;e=(0,h.J3)(i)?{id:i.id,mediaItemType:"file",collectionName:i.collectionName,occurrenceKey:i.occurrenceKey}:{mediaItemType:"external-image",dataURI:i.dataURI,name:i.name},this.setState({mediaViewerSelectedItem:e})}})),(0,s.Z)(this,"onInlinePlayerError",(()=>{this.setState({isPlayingFile:!1})})),(0,s.Z)(this,"setRef",(e=>{e&&this.setState({cardRef:e})})),(0,s.Z)(this,"renderInlinePlayer",(()=>{const{identifier:e,mediaClient:t,dimensions:i,selected:r,testId:s,originalDimensions:a,onFullscreenChange:o}=this.props,{shouldAutoplay:l,cardPreview:d}=this.state,c=this.renderCard(!1,"loading",!1);return n.createElement(n.Suspense,{fallback:c},n.createElement(Yi,{mediaClient:t,dimensions:i,originalDimensions:a,identifier:e,autoplay:!!l,onFullscreenChange:o,onError:this.onInlinePlayerError,onClick:this.onClick,selected:r,ref:this.setRef,testId:s,cardPreview:d}))})),(0,s.Z)(this,"onMediaViewerClose",(()=>{this.setState({mediaViewerSelectedItem:void 0})})),(0,s.Z)(this,"onDisplayImage",(()=>{const{identifier:e}=this.props;let t;t=(0,h.J3)(e)?{fileId:e.id,isUserCollection:e.collectionName===m.a1}:{fileId:e.dataURI,isUserCollection:!1},v.h.emit("media-viewed",(0,r.Z)({viewingLevel:"minimal"},t))})),(0,s.Z)(this,"renderMediaViewer",(()=>{const{mediaViewerSelectedItem:e}=this.state,{mediaClient:t,identifier:i,mediaViewerDataSource:r,contextId:s,featureFlags:o}=this.props;if(!e)return;const l=(0,h.J3)(i)&&i.collectionName||"",d=r||{list:[]};return a.createPortal(n.createElement(f.Z,{collectionName:l,dataSource:d,mediaClientConfig:t.config,selectedItem:e,onClose:this.onMediaViewerClose,contextId:s,featureFlags:o}),document.body)})),(0,s.Z)(this,"renderCard",((e=!0,t,i)=>{const{identifier:r,isLazy:s,appearance:a,resizeMode:o,dimensions:l,selectable:d,selected:c,disableOverlay:p,alt:u,testId:h,featureFlags:m,titleBoxBgColor:v,titleBoxIcon:f,ssr:g,useInlinePlayer:b,shouldOpenMediaViewer:y}=this.props,{mediaItemType:w}=r,{status:x,progress:E,cardPreview:S,error:C,cardRef:I,isCardVisible:Z}=this.state,{metadata:R}=this,{onCardViewClick:k,onDisplayImage:T,actions:B,onMouseEnter:$}=this,D=void 0===i?s:i,P=D&&!Z,F=!!g,A=((e,t,i,r,s)=>{if(!i&&(e||t))return!s&&(e||e&&t)?or.NotReady:"video"===s&&r&&e||t?or.Action:void 0})(!!b,!!y,"error"===x||"failed-processing"===x,!!this.state.cardPreview,R.mediaType),M=n.createElement(vi,{status:t||x,error:C,mediaItemType:w,metadata:R,cardPreview:S,alt:u,appearance:a,resizeMode:o,dimensions:l,actions:B,selectable:d,selected:c,onClick:e?k:void 0,onMouseEnter:e?$:void 0,disableOverlay:p,progress:E,onDisplayImage:e?T:void 0,innerRef:this.setRef,testId:h,featureFlags:m,titleBoxBgColor:v,titleBoxIcon:f,onImageError:e?this.onImageError:void 0,onImageLoad:e?this.onImageLoad:void 0,nativeLazyLoad:P,forceSyncDisplay:F,mediaCardCursor:A});return D?n.createElement(yi,{cardEl:I,onVisible:this.onCardInViewport},M):M})),(0,s.Z)(this,"storeSSRData",(()=>{var e;const{ssr:t,identifier:i}=this.props,{cardPreview:{dataURI:r}={}}=this.state;return(0,h.J3)(i)&&"server"===t&&n.createElement(nr,{identifier:i,dataURI:r,dimensions:this.requestedDimensions,error:"fail"===(null===(e=this.ssrReliability.server)||void 0===e?void 0:e.status)?this.ssrReliability.server:void 0})})),(0,s.Z)(this,"onCardInViewport",(()=>{this.setState({isCardVisible:!0})})),(0,s.Z)(this,"onClick",((e,t)=>{const{onClick:i}=this.props,{metadata:r}=this;if(i){i({event:e,mediaItemDetails:r},t)}})),(0,s.Z)(this,"onMouseEnter",(e=>{const{onMouseEnter:t}=this.props,{metadata:i}=this;if(t){t({event:e,mediaItemDetails:i})}}));let t,i="loading";const{identifier:o,resizeMode:l,ssr:d,mediaClient:g}=this.props;if((0,h.J3)(o)){const{id:e}=o,i=(0,p.b)(l);t=_i(e,i),!t&&d&&(t=this.getSSRPreview(d,o,g))}else if((0,h.Yk)(o)){this.fireCommencedEvent(),i="loading-preview";const{dataURI:e}=o;t={dataURI:e,orientation:1,source:"external"}}const b=!this.props.isLazy||!!t&&!(Gi(y=t)||Vi(y));var y;this.state={status:i,isCardVisible:b,isPlayingFile:!1,shouldAutoplay:!1,cardPreview:t,cardRef:null,isBannedLocalPreview:!1,previewDidRender:!1,error:undefined,wasResolvedUpfrontPreview:!1}}getSSRPreview(e,t,i){var s,n;if(this.ssrData=(e=>{const t=er();if(t)return t[ir(e)]})(t),null!==(s=this.ssrData)&&void 0!==s&&s.error&&(this.ssrReliability.server=(0,r.Z)({status:"fail"},this.ssrData.error)),null!==(n=this.ssrData)&&void 0!==n&&n.dataURI)return{dataURI:this.ssrData.dataURI,source:"ssr-data"};try{return((e,t,i,r,s)=>{let n;try{const a=t.getImageUrlSync(i,r);return n=s?(0,Ei.NI)(a,s):a,{dataURI:n,source:"client"===e?"ssr-client":"ssr-server",orientation:1}}catch(a){const t="server"===e?"ssr-server-uri":"ssr-client-uri";throw new oi.LD(t,a instanceof Error?a:void 0)}})(e,i,t.id,this.getImageURLParams(t),this.getMediaBlobUrlAttrs(t))}catch(a){this.ssrReliability[e]=(0,r.Z)({status:"fail"},(0,te.dg)(a))}}componentDidMount(){var e;this.hasBeenMounted=!0;const{isCardVisible:t,cardPreview:i}=this.state,{identifier:r,ssr:s,dimensions:n}=this.props;var a;(t&&(0,h.J3)(r)&&(this.updateStateForIdentifier(r),i||this.resolveUpfrontPreview(r)),t&&s&&i&&(0,h.J3)(r))&&(Gi(i)&&this.setCacheSSRPreview(r),Hi(i)&&Mi(null===(a=this.ssrData)||void 0===a?void 0:a.dimensions,n)&&this.refetchSSRPreview(r));null===(e=fi())||void 0===e||e.addEventListener("copy",this.fireCopiedEvent)}componentDidUpdate(e,t){const{mediaClient:i,identifier:r,dimensions:s}=e,{isCardVisible:n}=t,{mediaClient:a,identifier:o,dimensions:l,featureFlags:d,useInlinePlayer:c,disableOverlay:m,resizeMode:v}=this.props,{isCardVisible:f,cardPreview:g,status:b,fileState:y,isBannedLocalPreview:x,previewDidRender:E,isPlayingFile:S,wasResolvedUpfrontPreview:C}=this.state,I=(0,h.ch)(r,o),Z=!n&&f,R=i!==a,k=(0,p.b)(v);if(this.updateFileStateFlag(y),(0,h.Yk)(o)&&I){this.fireCommencedEvent();const{dataURI:e}=o;this.setState({status:"loading-preview",cardPreview:{dataURI:e,orientation:1,source:"external"},isCardVisible:!0})}(0,h.J3)(o)&&(Z||this.subscription&&(R||I))&&this.updateStateForIdentifier(o),this.state.status!==t.status&&(this.fireOperationalEvent(),("complete"===this.state.status||"video"===this.fileAttributes.fileMediatype&&g&&"processing"===this.state.status)&&this.fireScreenEvent()),(0,h.J3)(o)&&Z&&!g&&!C?this.resolveUpfrontPreview(o):(0,h.J3)(o)&&y&&(({status:e,fileState:t,prevDimensions:i,dimensions:r,identifier:s,fileImageMode:n,hasCardPreview:a,isBannedLocalPreview:o,featureFlags:l,wasResolvedUpfrontPreview:d})=>{const c=((e,{isPreviewable:t,hasPreview:i,isSupportedByBrowser:r})=>i&&t&&("complete"===e||"loading-preview"===e||"uploading"===e||"processing"===e&&r))(e,Oi(t,o,l)),p=Mi(i,r);return d&&c&&(!a||p)})({status:b,fileState:y,prevDimensions:s,dimensions:l,identifier:o,fileImageMode:k,featureFlags:d,hasCardPreview:!!g,isBannedLocalPreview:x,wasResolvedUpfrontPreview:C})&&this.resolvePreview(o,y),Z&&this.props.ssr&&g&&Gi(g)&&(0,h.J3)(o)&&this.setCacheSSRPreview(o),E&&["loading-preview","processing"].includes(b)&&(this.safeSetState({status:"complete"}),this.unsubscribe());const T="video"===this.fileAttributes.fileMediatype,B=y&&(0,u.vh)(y);T&&!S&&m&&c&&B&&(0,w.OC)("timestampOnVideo",this.props.featureFlags)&&this.setState({isPlayingFile:!0})}componentWillUnmount(){var e;this.hasBeenMounted=!1,this.unsubscribe(),null===(e=fi())||void 0===e||e.removeEventListener("copy",this.fireCopiedEvent)}updateStateForIdentifier(e){this.fireCommencedEvent(),this.subscribeInternalFile(e)}updateFileStateFlag(e){if(!e)return;const{status:t}=e;"processing"===t?this.fileStateFlags.wasStatusProcessing=!0:"uploading"===t&&(this.fileStateFlags.wasStatusUploading=!0)}subscribeInternalFile(e){const{mediaClient:t}=this.props,{isBannedLocalPreview:i}=this.state,{id:r,collectionName:s,occurrenceKey:n}=e;this.unsubscribe(),this.subscription=t.file.getFileState(r,{collectionName:s,occurrenceKey:n}).subscribe({next:e=>{const{featureFlags:t}=this.props,r=ar(e,i,t);this.safeSetState(r)},error:e=>{const t="uploading"===this.state.status?"upload":"metadata-fetch",i=new oi.Rq(t,e);this.safeSetState({error:i,status:"error"})}})}get requestedDimensions(){const{dimensions:e}=this.props,{cardRef:t}=this.state||{};return{width:xi("width",i={dimensions:e,element:t}),height:xi("height",i)};var i}get metadata(){var e;return Ki(this.props.identifier,null===(e=this.state)||void 0===e?void 0:e.fileState)}get fileAttributes(){var e,t;return(0,te.A7)(this.metadata,null===(e=this.state)||void 0===e||null===(t=e.fileState)||void 0===t?void 0:t.status)}fireOperationalEvent(){const{status:e,error:t,fileState:i}=this.state,{createAnalyticsEvent:s}=this.props;s&&((e,t,i,r,s,n=new oi.Rq("missing-error-data"),a,o)=>{const l=t=>(0,te.LO)(t,e);switch(t){case"complete":l((0,te.dl)(i,r,s,a,o));break;case"failed-processing":l((0,te.Iw)(i,r,s,a,o));break;case"error":l((0,te.rw)(i,r,n,s,a,o))}})(s,e,this.fileAttributes,this.getPerformanceAttributes(),this.ssrReliability,t,this.traceContext,null==i?void 0:i.metadataTraceContext),((e,t,i,s,n,a=new oi.Rq("missing-error-data"))=>{switch(t){case"complete":vr(e,{fileAttributes:i,ssrReliability:n,fileStateFlags:s});break;case"failed-processing":fr(e,{fileAttributes:i,failReason:"failed-processing",ssrReliability:n,fileStateFlags:s});break;case"error":fr(e,(0,r.Z)((0,r.Z)({fileAttributes:i},(0,te.dg)(a)),{},{request:(0,te.dO)(a),ssrReliability:n,fileStateFlags:s}))}})(this.internalOccurrenceKey,e,this.fileAttributes,this.fileStateFlags,this.ssrReliability,t)}fireCommencedEvent(){this.timeElapsedTillCommenced=performance.now();const{createAnalyticsEvent:e}=this.props;var t;e&&((e,t,i,r)=>{(0,te.LO)((0,te.DU)(t,i,r),e)})(e,this.fileAttributes,{overall:{durationSincePageStart:this.timeElapsedTillCommenced}},this.traceContext),t=this.internalOccurrenceKey,mr(t).start()}get actions(){const{actions:e=[],identifier:t,shouldEnableDownloadButton:i}=this.props,{status:r}=this.state,{metadata:s}=this;if((0,h.J3)(t)&&("failed-processing"===r||i)){return[{label:"Download",icon:n.createElement(d.default,{label:"Download"}),handler:()=>this.props.mediaClient.file.downloadBinary(t.id,s.name,t.collectionName)},...e]}return e}render(){const{isPlayingFile:e,mediaViewerSelectedItem:t}=this.state,i=n.createElement(n.Fragment,null,e?this.renderInlinePlayer():this.renderCard(),t?this.renderMediaViewer():null,this.storeSSRData());return this.props.intl?i:n.createElement(g.Z,{locale:"en"},i)}}gr.displayName="CardBase",(0,s.Z)(gr,"defaultProps",{appearance:"auto",resizeMode:"crop",isLazy:!0,disableOverlay:!1,featureFlags:{}});const br=(0,l.z)({packageVersion:"74.6.0",packageName:"@atlaskit/media-card",componentName:"mediaCard",component:"mediaCard"},{filterFeatureFlags:te.tH})((0,o.Z)()((0,b.ZP)(gr,{enforceContext:!1})))},654910:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const r="new-file-experience-wrapper"},837159:(e,t,i)=>{"use strict";i.d(t,{W:()=>a});var r=i(866738),s=i(980663),n=i(129808);const a=({selected:e})=>`\n    ${s.G}\n\n    &::after {\n      content: '';\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      box-sizing: border-box;\n      pointer-events: none;\n      ${r.E0}\n      ${e?(0,s.H)([n.a.Border]):""}\n    }\n  `},490132:(e,t,i)=>{"use strict";i.d(t,{Dl:()=>s,m4:()=>a,eR:()=>n});var r=i(676424);const s="\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n",n=((0,r.E0)(),(0,r.E0)(),(e="all")=>`\n  transition: ${e} .3s;\n`),a=(e,t)=>`rgba(${(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)},${parseInt(t[2],16)},${parseInt(t[3],16)}`:null})(e)}, ${t})`},874325:(e,t,i)=>{"use strict";i.d(t,{lA:()=>d,eZ:()=>c,ZU:()=>p});var r=i(321534),s=i(676424),n=i(171124),a=i(82708),o=i(837159),l=i(840181);const d="media-card-inline-player",c=({dimensions:e,breakpointSize:t="medium",shouldUsePointerCursor:i})=>r.iv`
  ${(0,a.pt)({breakpointSize:t})}
  ${(e=>e&&e.height?`height: ${(0,n.g)(e.height)}; max-height: 100%;`:"")(e)}
      ${(e=>e&&e.width?`width: ${(0,n.g)(e.width)}; max-width: 100%;`:"")(e)}
  cursor: ${i?"pointer":"default"};
`;c.displayName="CardViewWrapper";const p=({dimensions:e,selected:t})=>r.iv`
  width: ${(0,l.M)(e).width||"100%"};
  height: ${(0,l.M)(e).height||"auto"};
  overflow: hidden;
  border-radius: ${(0,s.E0)()}px;
  position: relative;
  max-width: 100%;
  max-height: 100%;

  ${(0,o.W)(t)}

  video {
    width: 100%;
    height: 100%;
  }
`;p.displayName="InlinePlayerWrapper"},542646:(e,t,i)=>{"use strict";let r;i.d(t,{Uo:()=>r,a6:()=>s,EY:()=>n}),function(e){e.SMALL="small",e.LARGE="large"}(r||(r={}));const s={[r.SMALL]:{fontSize:11,lineHeight:14,titleBox:{verticalPadding:4,horizontalPadding:8}},[r.LARGE]:{fontSize:14,lineHeight:22,titleBox:{verticalPadding:8,horizontalPadding:12}}},n=e=>2*(s[e].lineHeight+s[e].titleBox.verticalPadding)},65664:(e,t,i)=>{"use strict";i.d(t,{Wt:()=>n,hi:()=>a,Cj:()=>o,$g:()=>l,Oe:()=>d});var r=i(321534),s=i(131436);const n="media-card-play-button",a="play-icon-background",o=`\n  .${a} {\n    width: 56px;\n    height: 56px;\n  }\n`,l=r.iv`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: ${`var(--ds-icon-inverse, ${s.N0})`};
  span {
    position: absolute;
  }
`,d=r.iv`
  transition-property: width, height;
  transition-duration: 0.1s;
  position: absolute;
  width: ${48}px;
  height: ${48}px;
  background: ${`var(--ds-background-neutral-bold, ${s.xS})`};
  border-radius: 100%;
`},294416:(e,t,i)=>{"use strict";i.d(t,{k:()=>v});var r=i(122551),s=i(321534),n=i(866738),a=i(490132),o=i(131436),l=i(542646);const d={marginBottom:4},c={marginBottom:12};const p=({progress:e,breakpoint:t,positionBottom:i,showOnTop:r})=>`\n${n.E0}\noverflow: hidden;\nposition: absolute;\nwidth: 95%;\nleft: 2.5%;\nbackground-color: ${(0,a.m4)(o.N0,.8)};\nheight: 5px;\npadding: 1px;\nbox-sizing: border-box;\n\n::before {\n  content: '';\n  width: ${e}%;\n  height: 100%;\n  background-color: #44546F;\n  ${n.E0}\n  display: block;\n}\n${function(e,t,i,r=1){const s=e===l.Uo.SMALL?d:c,n=l.a6[e].titleBox.verticalPadding;return`\n    ${i?"top":"bottom"}: ${s.marginBottom*r+(t?n:(0,l.EY)(e))}px\n  `}(t,i,r)}\n`,u=e=>s.iv`
    ${p(e)}
  `;u.displayName="StyledProgressBar";const h=e=>{const{progress:t,breakpoint:i,positionBottom:r,showOnTop:n}=e;return(0,s.tZ)("div",{id:"styledBar",css:u({progress:t,breakpoint:i,positionBottom:r,showOnTop:n})})},m=e=>100*Math.min(1,Math.max(0,e||0)),v=({progress:e,breakpoint:t=l.Uo.SMALL,positionBottom:i=!1,showOnTop:s=!1})=>r.createElement(h,{progress:m(e),breakpoint:t,positionBottom:i,showOnTop:s})},793519:(e,t,i)=>{"use strict";i.d(t,{Gd:()=>h,U8:()=>m,mY:()=>v,Dl:()=>f,Nn:()=>g,gz:()=>b,lh:()=>y,u9:()=>w});var r=i(321534),s=i(866738),n=i(131436),a=i(404510),o=i(171124),l=i(893865),d=i(375170),c=i(65664),p=i(542646);const u=[[p.Uo.SMALL,599],[p.Uo.LARGE,1/0]],h=(e=0)=>{const[t]=u.find((([t,i])=>e<=i))||[p.Uo.SMALL];return t},m=(e=p.Uo.SMALL)=>{const t=p.a6[e];return`\n    font-size: ${t.fontSize}px;\n    line-height: ${t.lineHeight}px;\n  `},v=(e,t)=>{const{width:i,height:r}=e||{},{width:s,height:n}=(0,l.$0)(t);return`\n    width: ${(0,o.g)(i||s)};\n    max-width: 100%;\n    height: ${(0,o.g)(r||n)};\n    max-height: 100%;\n  `},f=(e,t)=>{const i=e?"":`var(--ds-shadow-raised, 0 1px 1px ${n.VG}, 0 0 1px 0 ${n.VG})`,r=[t?a.qR:"",i].filter(Boolean).join(", ");return r?`box-shadow: ${r};`:""},g=e=>e?`cursor: ${e};`:"",b=e=>e?`\n    &:hover .${c.Wt} {\n      ${c.Cj}\n    }\n  `:"",y=e=>e?`\n    &:hover .${d.j5} {\n      ${d.IA}\n    }\n  `:"",w=r.iv`
  display: flex;
  position: relative;
  max-width: 100%;
  width: 100%;
  height: 100%;
  max-height: 100%;
  overflow: hidden;
  ${s.E0}
`},375170:(e,t,i)=>{"use strict";i.d(t,{j5:()=>a,IA:()=>o,eZ:()=>l});var r=i(321534),s=i(490132),n=i(131436);const a="media-card-tickbox",o=`\n  background-color: var(--ds-background-input, ${n.N0});\n  color: var(--ds-icon-subtle, ${n.Y8});\n`,l=e=>r.iv`
  ${(0,s.eR)()}
  font-size: 14px;
  width: 14px;
  height: 14px;
  position: absolute;
  top: 7px;
  left: 7px;
  border-radius: 20px;
  color: transparent;
  /* Enforce dimensions and position of "tick" icon */
  span {
    display: block;
    svg {
      height: 14px;
    }
  }
  ${(e=>e?`background-color: var(--ds-icon-information, ${n.VY});\n      color: var(--ds-icon-inverse, white);`:"")(e)}
`;l.displayName="TickBoxWrapper"},82708:(e,t,i)=>{"use strict";i.d(t,{M0:()=>s,pt:()=>a});var r=i(866738);const s=(e,t=n)=>{const i=parseInt(`${e}`,10),r=Object.keys(t),s=r[0];let a;return r.forEach((e=>{i<t[e]&&!a&&(a=e)})),a||s},n={small:173,medium:225,large:300,xlarge:1/0},a=({breakpointSize:e})=>{switch(e){case"small":return`\n        .title {\n          font-size: 12px;\n        }\n        .file-type-icon span {\n          // We need to use important here since we can't use the dimensions provided by the Icon component\n          ${(0,r.dp)("14px !important")}\n        }\n      `;case"medium":return`\n        .title {\n          font-size: 14px;\n        }\n        .file-type-icon span {\n          ${(0,r.dp)("16px !important")}\n        }\n      `;case"large":return`\n        .overlay {\n          padding: 24px;\n        }\n        .title {\n          font-size: 14px;\n        }\n        .file-size {\n          font-size: 14px;\n        }\n        .file-type-icon span {\n          ${(0,r.dp)("18px !important")}\n        }\n      `;case"xlarge":return`\n        border-radius: 2px;\n\n        .title {\n          font-size: 16px;\n        }\n\n        .file-size {\n          font-size: 14px;\n        }\n        \n        .wrapper, .img-wrapper {\n          border-radius: 2px;\n        }\n\n        .overlay {\n          padding: 24px;\n        }\n\n        .file-type-icon span {\n          ${(0,r.dp)("18px !important")}\n        }\n      `}}},893865:(e,t,i)=>{"use strict";i.d(t,{tN:()=>r,$0:()=>a});const r={width:156,height:125},s={width:435,height:125},n={width:300,height:300},a=e=>"image"===e?r:"square"===e?n:"horizontal"===e?s:r},83710:(e,t,i)=>{"use strict";i.d(t,{P:()=>l});var r=i(29298),s=i(321534),n=i(122551),a=i(144024);const o=s.iv`
  display: flex;
  color: ${"var(--ds-icon-warning, #ff991f)"};
`;class l extends n.Component{render(){const{size:e}=this.props;return(0,s.tZ)("div",{css:o},(0,s.tZ)(a.default,{label:"Error",size:e}))}}l.displayName="ErrorIcon",(0,r.Z)(l,"defaultProps",{size:"small"})},171124:(e,t,i)=>{"use strict";function r(e){return"string"==typeof e?e:`${e}px`}i.d(t,{g:()=>r})},656246:(e,t,i)=>{"use strict";i.d(t,{z:()=>r});const r=(e,t)=>{const i=e.getBoundingClientRect()[t];return Math.round(i)}},659004:(e,t,i)=>{"use strict";i.d(t,{v:()=>r});const r=e=>{const t=`${e}`;return"%"===t[t.length-1]&&!isNaN(+t.slice(0,-1))}},943566:(e,t)=>{var i;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var n=typeof i;if("string"===n||"number"===n)e.push(i);else if(Array.isArray(i)){if(i.length){var a=s.apply(null,i);a&&e.push(a)}}else if("object"===n)if(i.toString===Object.prototype.toString)for(var o in i)r.call(i,o)&&i[o]&&e.push(o);else e.push(i.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()},727467:(e,t,i)=>{"use strict";i.d(t,{J3:()=>n,Yk:()=>a,ch:()=>o});var r=i(465829),s=i.n(r);const n=e=>"file"===e.mediaItemType,a=e=>"external-image"===e.mediaItemType,o=(e,t)=>n(e)&&n(t)?e.id!==t.id||e.collectionName!==t.collectionName||e.occurrenceKey!==t.occurrenceKey:!s()(e,t)},849646:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CollectionFetcher:()=>y.Z,FileFetcherError:()=>b.y,FileFetcherImpl:()=>g.oT,MAX_RESOLUTION:()=>P.xQ,MediaClient:()=>w.Q,MediaStore:()=>r.Fq,MediaStoreError:()=>s.r,PollingError:()=>v.k,PollingFunction:()=>m.D,RECENTS_COLLECTION:()=>P.a1,RequestError:()=>u.L,StargateClient:()=>x.E,UploadController:()=>n.M,addFileAttrsToUrl:()=>$.NI,checkWebpSupport:()=>C,createMediaSubject:()=>Z.O,createMediaSubscribable:()=>D.g,createUrl:()=>h.uJ,getArtifactUrl:()=>o.l,getAttrsFromUrl:()=>$.Ny,getDimensionsFromBlob:()=>I.x,getMediaClient:()=>T.y,getMediaClientErrorReason:()=>l.r,getMediaEnvironment:()=>r.rl,getMediaRegion:()=>r.ro,getMediaTypeFromMimeType:()=>N,globalMediaEventEmitter:()=>B.h,imageResizeModeToFileImageMode:()=>f.b,isAbortedRequestError:()=>h.n0,isAudioMimeTypeSupportedByServer:()=>j,isDifferentIdentifier:()=>k.ch,isDocumentMimeTypeSupportedByBrowser:()=>U,isDocumentMimeTypeSupportedByServer:()=>z,isErrorFileState:()=>d.f6,isExternalImageIdentifier:()=>k.Yk,isFileFetcherError:()=>b.p,isFileIdentifier:()=>k.J3,isFinalFileState:()=>d.nT,isImageMimeTypeSupportedByBrowser:()=>O,isImageMimeTypeSupportedByServer:()=>_,isImageRemote:()=>E,isImageRepresentationReady:()=>d.mo,isMediaBlobUrl:()=>$.WD,isMediaClientError:()=>l.a,isMediaCollectionItemFullDetails:()=>a.oU,isMediaStoreError:()=>s.W,isMimeTypeSupportedByBrowser:()=>L,isMimeTypeSupportedByServer:()=>G,isPollingError:()=>v.C,isPreviewableFileState:()=>d.jL,isPreviewableType:()=>a.dw,isProcessedFileState:()=>d.vh,isProcessingFileState:()=>d.y2,isRateLimitedError:()=>h.no,isRequestError:()=>u.N,isUnknownMimeTypeSupportedByServer:()=>V,isUploadingFileState:()=>d.__,isVideoMimeTypeSupportedByServer:()=>W,mapMediaFileToFileState:()=>d.eS,mapMediaItemToFileState:()=>d.L5,mapResponseToBlob:()=>h.wc,mapResponseToJson:()=>h.nr,mapResponseToVoid:()=>h.pO,objectToQueryString:()=>$.nZ,request:()=>p.WY,safeUnsubscribe:()=>R,uploadFile:()=>c.c,withMediaClient:()=>T.b});var r=i(907086),s=i(140995),n=i(76230),a=i(265139),o=i(140776),l=i(612972),d=i(79680),c=i(289653),p=i(242494),u=i(388484),h=i(332691),m=i(374171),v=i(736250),f=i(795425),g=i(619569),b=i(920148),y=i(587616),w=i(309137),x=i(218435);const E=(e,t=window.location.origin)=>{if(URL&&URL.prototype){const i=new URL(e);return!!i.host&&i.origin!==t}return!0};let S;const C=()=>void 0!==S?Promise.resolve(S):new Promise((e=>{const t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=()=>{S=2===t.height,e(S)}}));var I=i(362716),Z=i(895524);const R=e=>{console.warn("safeUnsubscribe() is deprecated and will be removed in the next media-client major version"),setTimeout((()=>e&&e.unsubscribe()),0)};var k=i(727467),T=i(101054),B=i(700406),$=i(737001),D=i(933177),P=i(954889),F=i(932125),A=i(629413),M=i(172611);const N=F.L4,O=A.$k,U=A.k_,L=A.PU,_=M.$v,z=M.N5,j=M.p5,W=M.a6,V=M.ey,G=M.ld},76230:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});class r{constructor(){}setAbort(e){this.abortFunction=e}abort(){this.abortFunction&&this.abortFunction()}}},795425:(e,t,i)=>{"use strict";i.d(t,{b:()=>r});const r=e=>"stretchy-fit"===e?"full-fit":e},737001:(e,t,i)=>{"use strict";i.d(t,{WD:()=>n,Ny:()=>l,nZ:()=>d,NI:()=>c});var r=i(991332);const s="media-blob-url",n=e=>e.indexOf("media-blob-url=true")>-1,a=(e,t)=>{const i=e.get(t);return"string"!=typeof i||isNaN(parseInt(i))?void 0:parseInt(i)},o=(e,t)=>{const i=e.get(t);if(i)return decodeURIComponent(i)},l=e=>{const t=new URL(e).hash.replace("#",""),i=new URLSearchParams(t),r=i.get("id"),s=i.get("contextId");if(r&&s)return{id:r,contextId:s,collection:o(i,"collection"),alt:o(i,"alt"),height:a(i,"height"),width:a(i,"width"),size:a(i,"size"),name:o(i,"name"),mimeType:o(i,"mimeType")}},d=e=>Object.keys(e).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{const i=e[t];if(null!=i)return`${encodeURIComponent(t)}=${encodeURIComponent(i.toString())}`})).join("&"),c=(e,t)=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return e;const i={[s]:"true"},n=(0,r.Z)((0,r.Z)({},i),t);return`${e}#${d(n)}`}},603070:(e,t,i)=>{"use strict";i.d(t,{n:()=>s});var r=i(499253);function s(e){const t=parseInt(`${e}`,10),i=t<1048576?0:1;return r.format(t,{unitSeparator:" ",decimalPlaces:i}).toUpperCase()}},521777:(e,t,i)=>{"use strict";i.d(t,{j:()=>r});const r=(0,i(122551).createContext)("cozy")},982930:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(415911),s=i(953307),n=i(122551),a=i(321534),o=i(437705),l=i(299548);const d=(0,n.memo)((0,n.forwardRef)(((e,t)=>{const{children:i,cssFn:n=o.Z,description:d,iconAfter:c,iconBefore:p,isDisabled:u=!1,isSelected:h=!1,onClick:m,testId:v,overrides:f,onMouseDown:g,shouldTitleWrap:b,shouldDescriptionWrap:y}=e,w=(0,r.Z)(e,["children","cssFn","description","iconAfter","iconBefore","isDisabled","isSelected","onClick","testId","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]),x=g;return i?(0,a.tZ)(l.Z,(0,s.Z)({},w,{overrides:f,iconBefore:p,iconAfter:c,isDisabled:u,isSelected:h,description:d,title:i,shouldTitleWrap:b,shouldDescriptionWrap:y,css:n({isSelected:h,isDisabled:u})}),(({children:e,className:i})=>(0,a.tZ)("button",(0,s.Z)({"data-testid":v},w,{className:i,ref:t,disabled:u,onClick:m,onMouseDown:x,type:"button"}),e))):null})))},992018:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(415911),s=i(953307),n=i(122551),a=i(321534),o=i(437705),l=i(299548);const d=e=>{e.preventDefault()},c=(0,n.memo)((0,n.forwardRef)(((e,t)=>{let{component:i,cssFn:n=o.Z,isDisabled:c=!1,isSelected:p=!1,onClick:u,testId:h,children:m,description:v,iconAfter:f,iconBefore:g,overrides:b,onMouseDown:y,shouldTitleWrap:w,shouldDescriptionWrap:x}=e,E=(0,r.Z)(e,["component","cssFn","isDisabled","isSelected","onClick","testId","children","description","iconAfter","iconBefore","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]);const S=y;return i?(0,a.tZ)(l.Z,(0,s.Z)({},E,{overrides:b,description:v,iconAfter:f,title:m,iconBefore:g,isSelected:p,isDisabled:c,shouldTitleWrap:w,shouldDescriptionWrap:x,css:(0,a.iv)(n({isDisabled:c,isSelected:p}))}),(({children:e,className:r})=>(0,a.tZ)(i,(0,s.Z)({"data-testid":h},E,{className:r,ref:t,draggable:!1,onDragStart:d,onMouseDown:c?d:S,onClick:c?d:u,tabIndex:c?-1:void 0,"aria-disabled":c}),e))):null})))},800544:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(415911),s=i(953307),n=i(122551),a=i(321534),o=i(437705),l=i(131436),d=i(171945);const c=d.$G.h100.lineHeight,p=d.$G.h100.size,u=(0,a.iv)({color:`var(--ds-text-subtle, ${l.hH})`,fontSize:p,fontWeight:"var(--ds-font-weight-bold, 700)",lineHeight:c/p,paddingBlock:"var(--ds-space-0, 0px)",paddingInline:"var(--ds-space-200, 16px)",textTransform:"uppercase"}),h=(0,n.memo)((e=>{let{children:t,testId:i,id:n,cssFn:l=o.Z}=e,d=(0,r.Z)(e,["children","testId","id","cssFn"]);return(0,a.tZ)("div",(0,s.Z)({css:[u,(0,a.iv)(l(void 0))],"data-testid":i,"data-ds--menu--heading-item":!0,id:n},d),t)}))},225385:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(415911),s=i(953307),n=i(122551),a=i(321534),o=i(437705),l=i(299548);const d=e=>{e.preventDefault()},c=(0,n.memo)((0,n.forwardRef)(((e,t)=>{const{children:i,href:n,cssFn:c=o.Z,description:p,iconAfter:u,iconBefore:h,isDisabled:m=!1,isSelected:v=!1,onClick:f,testId:g,overrides:b,onMouseDown:y,shouldTitleWrap:w,shouldDescriptionWrap:x}=e,E=(0,r.Z)(e,["children","href","cssFn","description","iconAfter","iconBefore","isDisabled","isSelected","onClick","testId","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap"]),S=y;return i?(0,a.tZ)(l.Z,(0,s.Z)({},E,{overrides:b,iconBefore:h,iconAfter:u,isSelected:v,isDisabled:m,description:p,shouldTitleWrap:w,shouldDescriptionWrap:x,css:c({isSelected:v,isDisabled:m}),title:i}),(({children:e,className:i})=>(0,a.tZ)("a",(0,s.Z)({"data-testid":g},E,{className:i,href:m?void 0:n,draggable:!1,onDragStart:d,onMouseDown:m?d:S,onClick:m?d:f,"aria-current":v?"page":void 0,"aria-disabled":m,ref:t}),e))):null})))},824464:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const r=i(657881).G},657881:(e,t,i)=>{"use strict";i.d(t,{G:()=>x});var r=i(122551),s=i(321534),n=i(38952),a=i(307271),o=i(52054),l=i(676424),d=i(953307),c=i(485855),p=i(131436);const u=({children:e,update:t})=>{const i=(0,r.useRef)(!0);return(0,r.useLayoutEffect)((()=>{i.current?i.current=!1:t()}),[t]),r.createElement(r.Fragment,null,e)};var h=i(451598),m=i(437705);var v=i(450509),f=i.n(v);const g=(0,s.iv)({display:"block",boxSizing:"border-box",zIndex:l.ug.layer(),flex:"1 1 auto",backgroundColor:`var(--ds-surface-overlay, ${p.N0})`,borderRadius:`${(0,l.E0)()}px`,boxShadow:`var(--ds-shadow-overlay, 0 4px 8px -2px ${p.Nx}, 0 0 1px ${p.VG})`,overflow:"auto",":focus":{outline:"none"}}),b=(0,r.forwardRef)(((e,t)=>(0,s.tZ)("div",(0,d.Z)({css:g},e,{ref:t}))));const y=function({isOpen:e,id:t,offset:i,testId:n,content:a,fallbackPlacements:o,onClose:l,boundary:d,rootBoundary:p,shouldFlip:v,placement:g="auto",popupComponent:y=b,autoFocus:w=!0,triggerRef:x,shouldUseCaptureOnOutsideClick:E}){const[S,C]=(0,r.useState)(null),[I,Z]=(0,r.useState)(null);(({popupRef:e,initialFocusRef:t})=>{(0,r.useEffect)((()=>{if(!e)return m.Z;const i={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:t||e,fallbackFocus:e,returnFocusOnDeactivate:!0},r=f()(e,i);let s=requestAnimationFrame((()=>{s=null,r.activate()}));return()=>{null!=s&&(cancelAnimationFrame(s),s=null),r.deactivate()}}),[e,t])})({initialFocusRef:I,popupRef:S}),(({isOpen:e,onClose:t,popupRef:i,triggerRef:s,shouldUseCaptureOnOutsideClick:n})=>{(0,r.useEffect)((()=>{if(!e||!i)return m.Z;const r=e=>{t&&t(e)};return(0,h.Ev)(window,[{type:"click",listener:e=>{const{target:t}=e;if(!document.body.contains(t))return;const n=i&&i.contains(t),a=s&&s.contains(t);n||a||r(e)},options:{capture:n}},{type:"keydown",listener:e=>{const{key:t}=e;"Escape"!==t&&"Esc"!==t||r(e)}}])}),[e,t,i,s,n])})({isOpen:e,onClose:l,popupRef:S,triggerRef:x,shouldUseCaptureOnOutsideClick:E});const R=(0,r.useMemo)((()=>[{name:"flip",enabled:v,options:{rootBoundary:p,boundary:d,fallbackPlacements:o}}]),[v,p,d,o]);return(0,s.tZ)(c.r,{placement:g,offset:i,modifiers:R},(({ref:i,style:r,placement:o,update:d})=>(0,s.tZ)(y,{id:t,"data-placement":o,"data-testid":n,ref:e=>{e&&("function"==typeof i?i(e):i.current=e,C(e))},style:r,tabIndex:w?0:void 0},(0,s.tZ)(u,{update:d},a({update:d,isOpen:e,onClose:l,setInitialFocusRef:Z})))))},w=l.ug.layer(),x=(0,r.memo)((({isOpen:e,id:t,offset:i,testId:l,trigger:d,content:c,onClose:p,boundary:u,rootBoundary:h="viewport",shouldFlip:m=!0,placement:v="auto",fallbackPlacements:f,popupComponent:g,autoFocus:b=!0,zIndex:x=w,shouldUseCaptureOnOutsideClick:E=!1})=>{const[S,C]=(0,r.useState)(null);return(0,s.tZ)(n.dK,null,(0,s.tZ)(a.s,null,(({ref:i})=>d({ref:t=>{t&&e&&("function"==typeof i?i(t):i.current=t,C(t))},"aria-controls":t,"aria-expanded":e,"aria-haspopup":!0}))),e&&(0,s.tZ)(o.Z,{zIndex:x},(0,s.tZ)(y,{content:c,isOpen:e,placement:v,fallbackPlacements:f,boundary:u,rootBoundary:h,shouldFlip:m,offset:i,popupComponent:g,id:t,testId:l,onClose:p,autoFocus:b,shouldUseCaptureOnOutsideClick:E,triggerRef:S})))}))},396428:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});const r="0.1.5"},592532:(e,t,i)=>{"use strict";i.d(t,{ur:()=>n,oY:()=>a,o5:()=>o,US:()=>l,sG:()=>d});var r=i(152129),s=i(508687);const n=()=>{if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){const e=(()=>{const e=[];return{__buffer_only__:!0,push:t=>{e.length<250&&e.push(t)},getStream:()=>e}})();globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},a=e=>{var t,i;!globalThis.__UFO_GLOBAL_EVENT_STREAM__||null!==(t=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==t&&t.__buffer_only__?(null!==(i=globalThis.__UFO_GLOBAL_EVENT_STREAM__)&&void 0!==i&&i.__buffer_only__&&globalThis.__UFO_GLOBAL_EVENT_STREAM__.getStream().forEach(e.push.bind(e)),globalThis.__UFO_GLOBAL_EVENT_STREAM__=e):(0,r.hl)("Global Event Stream already initialised. Ignoring new event stream setup")},o=(e,t)=>({type:s.pp.SUBSCRIBE,payload:{experienceId:e,callback:t}}),l=(e,t)=>({type:s.pp.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}),d=e=>({type:s.pp.EXPERIENCE_PAYLOAD,payload:e})},152129:(e,t,i)=>{"use strict";i.d(t,{b6:()=>n,Hw:()=>a,hl:()=>o});var r=i(29298);class s{constructor(){(0,r.Z)(this,"enabled",!1)}log(...e){this.enabled&&console.log(s.UFOprefix,...e)}warn(...e){this.enabled&&console.warn(s.UFOprefix,...e)}enable(){this.enabled=!0}disable(){this.enabled=!1}}(0,r.Z)(s,"UFOprefix","[ufo]");const n=new s,a=(...e)=>{n.log(...e)},o=(...e)=>{n.warn(...e)}},90934:(e,t,i)=>{"use strict";i.d(t,{m:()=>n});var r=i(29298),s=i(244819);const n=new class{constructor(){(0,r.Z)(this,"started",!1),(0,r.Z)(this,"observers",[]),(0,r.Z)(this,"broadcast",(()=>{this.observers.forEach((e=>e())),this.observers=[]}))}start(){this.started||(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),(0,s.d)()&&window.addEventListener("pagehide",this.broadcast))}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}}},827883:(e,t,i)=>{"use strict";i.d(t,{F:()=>g,G:()=>f});var r=i(991332),s=i(29298),n=i(781095),a=i(396428),o=i(592532),l=i(152129),d=i(90934),c=i(508687);var p=i(244819),u=i(978671);const h={[u.h.NOT_STARTED.id]:[u.h.STARTED.id],[u.h.STARTED.id]:[u.h.IN_PROGRESS.id,u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.IN_PROGRESS.id]:[u.h.BLOCKED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.BLOCKED.id]:[u.h.RECOVERED.id,u.h.ABORTED.id],[u.h.RECOVERED.id]:[u.h.STARTED.id,u.h.SUCCEEDED.id,u.h.SUCCEEDED_WAITING_FOR_DEPS.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.SUCCEEDED.id]:[u.h.STARTED.id],[u.h.SUCCEEDED_WAITING_FOR_DEPS.id]:[u.h.SUCCEEDED.id,u.h.FAILED.id,u.h.ABORTED.id],[u.h.FAILED.id]:[u.h.STARTED.id],[u.h.ABORTED.id]:[u.h.STARTED.id]};var m=i(253851);const v=()=>(0,p.d)()&&window.document&&"visible"!==window.document.visibilityState?c.Qx.HIDDEN:c.Qx.VISIBLE,f=e=>void 0!==e?~~e:~~performance.now();class g{constructor(e,t,i=null){(0,s.Z)(this,"state",u.h.NOT_STARTED),(0,s.Z)(this,"instanceId",null),(0,s.Z)(this,"parent",null),(0,s.Z)(this,"category",null),(0,s.Z)(this,"metadata",{}),(0,s.Z)(this,"onDoneCallbacks",[]),(0,s.Z)(this,"childExperiences",[]),(0,s.Z)(this,"explicitTimings",{}),(0,s.Z)(this,"isSSROutputAsFMP",!1),(0,s.Z)(this,"uuid",null),(0,s.Z)(this,"_until",null),(0,s.Z)(this,"metrics",{startTime:null,endTime:null,marks:[]}),(0,s.Z)(this,"performanceConfig",{}),(0,s.Z)(this,"setPageVisibleStateToMixed",(()=>{this.pageVisibleState=c.Qx.MIXED,d.m.unsubscribe(this.setPageVisibleStateToMixed)})),this.id=e,this.category=(null==t?void 0:t.category)||null,this.until=(null==t?void 0:t.until)||null,this.instanceId=i,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=t.type,this.performanceType=t.performanceType,this.performanceConfig=t.performanceConfig||{},this.config=t,this.pageVisibleState=v(),this.featureFlags=t.featureFlags||[],this.timings=t.timings||[],t.performanceType!==m.R.PageLoad&&t.performanceType!==m.R.PageSegmentLoad||(this.isSSROutputAsFMP=t.isSSROutputAsFMP||!1)}async transition(e,t){if((0,l.Hw)("async transition",this.id,this.state.id,e.id),i=this.state,r=e,h[i.id]&&h[i.id].includes(r.id)){if((0,l.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} successful`,this.state.final,!e.final),e===u.h.STARTED&&this._reset(),this.state.final&&!e.final&&(this.metrics.startTime=f(t),this.uuid=(0,n.v4)()),this.state=e,e.final){this.metrics.endTime=f(t),this._isManualStateEnabled()||(0,o.ur)().push((0,o.US)(c.lS,this.handleDoneBind));const e=await this.exportData();(0,l.Hw)("this.parent",this.parent),(0,o.ur)().push((0,o.sG)(e))}return!0}var i,r;return(0,l.Hw)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} unsuccessful`),(0,l.hl)(`transition of ${this.id} from ${this.state} to ${e} is not possible`),!1}async start(e){await this.transition(u.h.STARTED,e)&&(this.pageVisibleState=v(),d.m.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||((0,l.Hw)("subscribed",this.id),(0,o.ur)().push((0,o.o5)(c.lS,this.handleDoneBind))))}mark(e,t){e!==c.WR&&e!==c.j3?this._mark(e,t):(0,l.hl)("please use markFMP or markInlineResponse for specialised marks")}_mark(e,t){this.metrics.marks.push({name:e,time:f(t)}),this.transition(u.h.IN_PROGRESS)}markFMP(e){this._mark(c.WR,e)}markInlineResponse(e){this._mark(c.j3,e)}_isManualStateEnabled(){return null===this.until}_validateManualState(){return!!this._isManualStateEnabled()||((0,l.hl)('manual change of state not allowed as "until" is defined'),!1)}switchToEndState(e,t){return null!=t&&t.force||this._validateManualState()?(null!=t&&t.metadata&&this.addMetadata(t.metadata),d.m.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}async success(e){return this.switchToEndState(u.h.SUCCEEDED,e)}async failure(e){return this.switchToEndState(u.h.FAILED,e)}async abort(e){return this.switchToEndState(u.h.ABORTED,e)}addMetadata(e){Object.assign(this.metadata,e)}_handleDoneExperience(e){if((0,l.Hw)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){const{done:t,state:i}=this._until(e);t&&!this.state.final&&this.transition(i)}}async getId(){return this.id}async exportData(){return{id:await this.getId(),uuid:this.uuid,type:this.type,schemaVersion:a.q||"unknown",performanceType:this.performanceType,category:this.category,state:this.state,metadata:(0,r.Z)({},this.metadata),metrics:(0,r.Z)({},this.metrics),children:[...this.childExperiences],result:{success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},platform:this.config.platform||null,pageVisibleState:this.pageVisibleState,featureFlags:this.featureFlags,isSSROutputAsFMP:this.isSSROutputAsFMP,timings:this.timings,explicitTimings:this.explicitTimings,performanceConfig:this.performanceConfig}}_reset(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}}},849278:(e,t,i)=>{"use strict";i.d(t,{I:()=>a});var r=i(29298),s=i(152129),n=i(938141);class a{constructor(e,t){(0,r.Z)(this,"instances",{}),this.experienceId=e,this.config=t}getInstance(e){return this.instances[e]||(this.instances[e]=new n.Q(this.experienceId,this.config,e)),this.instances[e]}release(e){(0,s.Hw)("instanceId",e),this.instances[e]&&this.instances[e].abort(),delete this.instances[e]}}},978671:(e,t,i)=>{"use strict";i.d(t,{h:()=>r});const r={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}}},253851:(e,t,i)=>{"use strict";let r,s;i.d(t,{Z:()=>r,R:()=>s}),function(e){e.Load="load",e.Experience="experience",e.Operation="operation"}(r||(r={})),function(e){e.PageLoad="page-load",e.PageSegmentLoad="page-segment-load",e.InlineResult="inline-result",e.Custom="custom"}(s||(s={}))},938141:(e,t,i)=>{"use strict";i.d(t,{Q:()=>s});var r=i(827883);class s extends r.F{}},244819:(e,t,i)=>{"use strict";i.d(t,{d:()=>r});const r=()=>"undefined"!=typeof window},508687:(e,t,i)=>{"use strict";let r,s,n,a,o,l;i.d(t,{pp:()=>r,Qx:()=>s,lS:()=>d,WR:()=>c,j3:()=>p}),function(e){e[e.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE"}(r||(r={})),function(e){e.VISIBLE="visible",e.HIDDEN="hidden",e.MIXED="mixed"}(s||(s={})),function(e){e.fmp="fmp",e.tti="tti"}(n||(n={})),function(e){e.fmp="fmp",e.tti="tti"}(a||(a={})),function(e){e.response="response",e.result="result"}(o||(o={})),function(e){e.duration="duration"}(l||(l={}));const d="__SUBSCRIBE_ALL__",c="fmp",p="inline-response"},852665:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(321534);const s=(0,r.iv)({width:"1px",height:"1px",padding:"0",position:"absolute",border:"0",clip:"rect(1px, 1px, 1px, 1px)",overflow:"hidden",whiteSpace:"nowrap"}),n=({children:e,testId:t,role:i,id:n})=>(0,r.tZ)("span",{id:n,"data-testid":t,css:s,role:i},e)}}]);
//# sourceMappingURL=50926.4z4UGCv2yK.js.map