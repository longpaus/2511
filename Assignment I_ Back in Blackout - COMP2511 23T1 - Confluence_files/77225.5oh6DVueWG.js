(self._cf=self._cf||[]).push([[77225],{564013:(e,t,n)=>{var i=n(935813);e.exports=function(e){return e&&e.length?i(e):[]}},682934:(e,t,n)=>{"use strict";n.d(t,{V:()=>g});var i=n(991332),o=n(415911),r=n(122551),s=n(28201),a=n(499082),l=n(331377);const c=l.ZP`query User($accountId:ID!){user(id:$accountId){id displayName}}`,d=l.ZP`query ContentType($contentId:ID!){content(id:$contentId){nodes{id type}}}`,u=(0,s.tM)({__loadable_id__:"UJOj6",name:"GrantAccessDialogPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(38639),n.e(49149),n.e(17262)]).then(n.bind(n,417883))).GrantAccessDialog}),g=e=>{let{contentId:t,accountId:l,legacyInfo:g,shouldSSRGrantAccessRestrictions:S,buttonPlaceholder:m}=e,_=(0,o.Z)(e,["contentId","accountId","legacyInfo","shouldSSRGrantAccessRestrictions","buttonPlaceholder"]);const h=(0,s.ui)({__loadable_id__:"V-X0h",name:"GrantAccessDialog",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(38639),n.e(49149),n.e(17262)]).then(n.bind(n,417883))).GrantAccessDialog,loading:()=>m}),R=S&&window.__SSR_RENDERED__,p=((e,t,n)=>{var i,o,r,s;const{data:l,loading:u,error:g}=(0,a.aM)(d,{variables:{contentId:e||""},skip:!e,fetchPolicy:n?"cache-first":"cache-and-network"}),{data:S,loading:m,error:_}=(0,a.aM)(c,{variables:{accountId:t},skip:!e,fetchPolicy:n?"cache-first":"cache-and-network"});return{isError:Boolean(g||_),isLoading:!l&&u||!S&&m,contentType:(null==l||null===(i=l.content)||void 0===i||null===(o=i.nodes)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type)||"page",displayName:(null==S||null===(s=S.user)||void 0===s?void 0:s.displayName)||""}})(t,l||(null==g?void 0:g.username)||"",R);return S?r.createElement(u,(0,i.Z)((0,i.Z)((0,i.Z)({contentId:t,accountId:l,legacyInfo:g},_),p),{},{shouldSSRGrantAccessRestrictions:S})):r.createElement(h,(0,i.Z)((0,i.Z)({contentId:t,accountId:l,legacyInfo:g},_),p))}},955749:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var i=n(122551);function o(){return i.createElement("div",{"data-testid":"restrictions-button-placeholder",style:{width:32,height:32}})}o.displayName="RestrictionsButtonPlaceholder"},902943:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var i=n(29298),o=n(507080);class r extends o.W2{constructor(...e){super(...e),(0,i.Z)(this,"state",{isOpen:!1,triggeredFrom:null,hideRestrictionsButtonSpinner:!1}),(0,i.Z)(this,"initState",(()=>{this.setState({isOpen:!1,triggeredFrom:null,hideRestrictionsButtonSpinner:!1})})),(0,i.Z)(this,"setHideRestrictionsButtonSpinner",(()=>{this.setState({hideRestrictionsButtonSpinner:!0})}))}getIsOpen(){return this.state.isOpen}getTriggeredFrom(){return this.state.triggeredFrom}getHideRestrictionsButtonSpinner(){return this.state.hideRestrictionsButtonSpinner}setIsOpen(e,t=null,n){this.setState({isOpen:e,triggeredFrom:t},(()=>{n&&setTimeout(n,0)}))}}},799998:(e,t,n)=>{"use strict";n.d(t,{G:()=>k,L:()=>T});var i=n(991332),o=n(790632),r=n(122551),s=n(507080),a=n(621070),l=n(451379),c=n(199319),d=n(175413),u=n(944997),g=n(526938),S=n(28201);const m=(0,S.ui)({__loadable_id__:"XiNhl",name:"ChangeEditionInlineDialogLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(38639),n.e(28201),n.e(84786),n.e(15677),n.e(72522),n.e(95192),n.e(12466)]).then(n.bind(n,119488))).ChangeEditionInlineDialog}),_=(0,S.tM)({__loadable_id__:"abKR2",name:"ChangeEditionInlineDialogPaintLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(38639),n.e(28201),n.e(84786),n.e(15677),n.e(72522),n.e(95192),n.e(12466)]).then(n.bind(n,119488))).ChangeEditionInlineDialog});var h=n(340575),R=n(682934),p=n(330828),E=n(772610),I=n(597936),D=n(402493),v=n(158466),w=n(216952),f=n(955749),y=n(717599);const B=()=>{return Boolean(null===(e=window.__SSR_EVENTS_CAPTURE__)||void 0===e?void 0:e.restrictionsButton)?r.createElement(y.C,{spinnerId:"restrictions-loading-spinner",actionType:"restrictionsButton"}):r.createElement(f.D,null);var e},b=(0,S.tM)({__loadable_id__:"DZnYq",name:"RestrictionsButtonLoaderPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(38639),n.e(28201),n.e(84786),n.e(98650),n.e(28648)]).then(n.bind(n,616519))).RestrictionsButton,loading:B}),C=(0,S.ZR)({__loadable_id__:"RQyf9",name:"RestrictionsButtonLoaderAfterPaint",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(38639),n.e(28201),n.e(84786),n.e(98650),n.e(28648)]).then(n.bind(n,616519))).RestrictionsButton,loading:f.D});var A=n(902943);const P=(0,o.Z)("div",{target:"eywtb1e0"})({name:"1hp6i1l",styles:"display:inline-block;vertical-align:top;"}),F="bottom-end",k=(0,r.memo)((e=>{const t=(0,I.k)(e.contentId),{edition:n}=(0,v.D)(),[o,c]=(0,r.useState)({grantAccessClicked:!1,hasAutoOpenedRestrictionDialog:!1,showFreeRestrictionDialog:!1}),d=(0,a._)(),u=(0,r.useContext)(l.F),S=e=>()=>T((0,i.Z)((0,i.Z)({},d),{},{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:n,experienceTracker:u})),y=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{grantAccessClicked:!0}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)},k=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{showFreeRestrictionDialog:!0}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)},Z=()=>{var e,t,n;(c((e=>(0,i.Z)((0,i.Z)({},e),{},{showFreeRestrictionDialog:!1}))),null!==(e=window)&&void 0!==e&&null!==(t=e.__SSR_EVENTS_CAPTURE__)&&void 0!==t&&t.restrictionsButton)&&(null===(n=window.__SSR_EVENTS_CAPTURE__)||void 0===n||delete n.restrictionsButton)};return r.createElement(s.xs,{to:[A.j]},(s=>r.createElement(P,null,r.createElement(g.q,{key:`start-${t}`,metric:w.j}),n?r.createElement(E.M.Consumer,null,(({getQueryParams:a})=>{const{accountId:l,grantAccess:d,username:u}=a(),g=Boolean(d&&l||u);return n===h.m.FREE?((n,s)=>{const{isDisabled:a,triggeredFrom:l}=e,d="fromView"===l;return r.createElement(D.Jv,null,(({loading:e,error:u,restrictions:g})=>{if(!g&&e||u)return r.createElement(f.D,null);const h=Boolean((null==g?void 0:g.hasRestrictions)||(null==g?void 0:g.hasInheritedRestrictions)),R=Boolean((null==g?void 0:g.hasInheritedRestrictions)&&!(null!=g&&g.hasRestrictions)),p=((null==g?void 0:g.ancestors.length)||0)-1>0;if(h){if(p&&R){const e=(e=>{const t=(null==e?void 0:e.ancestors)||[];for(let n=t.length-1;n>=0;n--)if(t[n].hasRestrictions)return t[n]})(g);return d?r.createElement(_,{isOpen:o.showFreeRestrictionDialog,onClose:Z,parentData:e,isChildPage:p,placement:F},r.createElement(b,{contentId:t,isDisabled:a,shouldHideSpinner:o.showFreeRestrictionDialog,onClick:k,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free inherited",triggeredFrom:l})):r.createElement(m,{isOpen:o.showFreeRestrictionDialog,onClose:Z,parentData:e,isChildPage:p,placement:F},r.createElement(C,{contentId:t,isDisabled:a,shouldHideSpinner:!0,onClick:k,restrictionsButtonSSRLocation:"free inherited",triggeredFrom:l}))}return s&&!o.hasAutoOpenedRestrictionDialog&&(S(n)(),c((e=>(0,i.Z)((0,i.Z)({},e),{},{hasAutoOpenedRestrictionDialog:!0})))),d?r.createElement(b,{contentId:t,isDisabled:a,shouldHideSpinner:n.getHideRestrictionsButtonSpinner(),resetDialogState:()=>n.initState(),onClick:S(n),restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free grandfather",triggeredFrom:l}):r.createElement(C,{contentId:t,isDisabled:a,shouldHideSpinner:!0,onClick:S(n),restrictionsButtonSSRLocation:"free grandfather",triggeredFrom:l})}return d?r.createElement(_,{isOpen:o.showFreeRestrictionDialog,onClose:Z,placement:F},r.createElement(b,{contentId:t,shouldHideSpinner:o.showFreeRestrictionDialog,isDisabled:a,onClick:k,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"free",triggeredFrom:l})):r.createElement(m,{isOpen:o.showFreeRestrictionDialog,onClose:Z,placement:F},r.createElement(C,{contentId:t,shouldHideSpinner:!0,isDisabled:a,onClick:k,restrictionsButtonSSRLocation:"free",triggeredFrom:l}))}))})(s,g):((n,i,s)=>{const{markItemAsLoaded:a,isDisabled:l,triggeredFrom:c}=e,d=n(),u="fromView"===c;return s&&!o.grantAccessClicked?r.createElement(R.V,{isOpen:!0,contentId:t,onActionClick:y,accessType:"edit"===(0,p.r)(d,"accessType")?"edit":"view",accountId:(0,p.r)(d,"accountId"),legacyInfo:{username:(0,p.r)(d,"username")||""},shouldSSRGrantAccessRestrictions:u,buttonPlaceholder:r.createElement(f.D,null)},u?r.createElement(b,{contentId:t,isDisabled:l,shouldHideSpinner:i.getHideRestrictionsButtonSpinner(),resetDialogState:()=>i.initState(),onClick:S(i),markItemAsLoaded:a,restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"default grant access",triggeredFrom:c}):r.createElement(C,{contentId:t,isDisabled:l,shouldHideSpinner:!0,onClick:S(i),markItemAsLoaded:a,restrictionsButtonSSRLocation:"default grant access",triggeredFrom:c})):c&&"fromView"===c?r.createElement(b,{contentId:t,isDisabled:l,shouldHideSpinner:i.getHideRestrictionsButtonSpinner(),onClick:S(i),markItemAsLoaded:a,resetDialogState:()=>i.initState(),restrictionsButtonSSRRendered:!0,restrictionsButtonSSRLocation:"default",triggeredFrom:c}):r.createElement(C,{contentId:t,isDisabled:l,shouldHideSpinner:!0,onClick:S(i),markItemAsLoaded:a,restrictionsButtonSSRLocation:"default",triggeredFrom:c})})(a,s,g)})):r.createElement(B,null))))}));function T({actionSubjectId:e,createAnalyticsEvent:t,dialogStateContainer:n,edition:i,experienceTracker:o,triggeredFrom:r}){o.start({name:c.IP6,collect(e,t){t.stopOn(e.find((({action:e,name:t})=>"taskFail"===e&&t===c.$sg))),t.stopOn(e.find((e=>(0,d.K)(e)&&e.name===c.fbA)))}}),o.start({name:c.$sg,timeout:u.O.DEFAULT}),n.setIsOpen(!0,r),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:r,edition:i}}}).fire(),w.w.start()}k.displayName="RestrictionsDialogTrigger"},717599:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var i=n(991332),o=n(790632),r=n(122551),s=n(685753),a=n(407552);const l=(0,o.Z)("div",{target:"e1ghqyl70"})("display:",(({showSpinner:e})=>e?"flex":"none"),";font-size:14px;width:32px;height:32px;justify-content:center;align-items:center;",(({styleOverride:e})=>null!=e?e:"")),c=({actionType:e,spinnerId:t,showSpinner:n,spinnerSize:o="small",style:c})=>{const d=Boolean(window.__SSR_EVENTS_CAPTURE__&&window.__SSR_EVENTS_CAPTURE__[`${e}`]||n),u=r.useRef(Date.now()%860);return r.createElement(l,{"data-id":t,showSpinner:d,"data-testid":t,styleOverride:c},r.createElement(a.ZP,null,(e=>r.createElement(s.Z,(0,i.Z)((0,i.Z)({size:o,delay:-u.current},e),{},{testId:`${t}-spinner`})))))};c.displayName="SSRActionLoadingSpinner"}}]);
//# sourceMappingURL=77225.5oh6DVueWG.js.map