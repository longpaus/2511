(self._cf=self._cf||[]).push([[26127],{807892:(t,e,n)=>{"use strict";var a=n(730436);Object.defineProperty(e,"Z",{enumerable:!0,get:function(){return(t=a,t&&t.__esModule?t:{default:t}).default;var t}})},307271:(t,e,n)=>{"use strict";n.d(e,{s:()=>c});var a=n(122551),s=n(474258),o=n.n(s),i=n(38952),r=n(60244);function c(t){var e=t.children,n=t.innerRef,s=a.useContext(i.mq),c=a.useCallback((function(t){(0,r.k$)(n,t),(0,r.DL)(s,t)}),[n,s]);return a.useEffect((function(){return function(){return(0,r.k$)(n,null)}}),[]),a.useEffect((function(){o()(Boolean(s),"`Reference` should not be used outside of a `Manager` component.")}),[s]),(0,r.$p)(e)({ref:c})}},461654:t=>{t.exports=function(t,e){e=e||{};var n,a,s,o=t.ownerDocument||t,i=[],r=[],c=function(t){var e=[];function n(a,s){if(a===t.documentElement)return!1;for(var o=0,i=e.length;o<i;o++)if(e[o][0]===a)return e[o][1];var r=!1;return"none"===(s=s||t.defaultView.getComputedStyle(a)).display?r=!0:a.parentNode&&(r=n(a.parentNode)),e.push([a,r]),r}return function(e){if(e===t.documentElement)return!1;var a=t.defaultView.getComputedStyle(e);return!!n(e,a)||"hidden"===a.visibility}}(o),l=["input","select","a[href]","textarea","button","[tabindex]"],u=t.querySelectorAll(l.join(","));if(e.includeContainer){var d=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;l.some((function(e){return d.call(t,e)}))&&(u=Array.prototype.slice.apply(u)).unshift(t)}for(var h=0,p=u.length;h<p;h++)n=u[h],a=parseInt(n.getAttribute("tabindex"),10),(s=isNaN(a)?n.tabIndex:a)<0||"INPUT"===n.tagName&&"hidden"===n.type||n.disabled||c(n,o)||(0===s?i.push(n):r.push({index:h,tabIndex:s,node:n}));var g=r.sort((function(t,e){return t.tabIndex===e.tabIndex?t.index-e.index:t.tabIndex-e.tabIndex})).map((function(t){return t.node}));return Array.prototype.push.apply(g,i),g}},259220:(t,e,n)=>{"use strict";n.d(e,{M:()=>u});var a=n(991332),s=n(122551),o=n(257848),i=n(574409),r=n(118140),c=n(379128);const l=()=>{},u=(0,s.memo)((({customData:t={},metric:e,onComplete:n=l,stopTime:u,timing:d})=>{const h=(0,s.useCallback)((()=>{e&&(o.n.getPageLoadMetric().mark(`${c.T}:${e.key}`),e.stop({customData:(0,a.Z)((0,a.Z)({},t),{},{pageLoadInfo:(0,i.aX)()}),stopTime:u}),n())}),[e,n]);return(0,r.G)(h,d),null}))},818443:(t,e,n)=>{"use strict";n.d(e,{L:()=>d});var a=n(29298),s=n(991332),o=n(790632),i=n(122551),r=n(685753);const c={small:12,medium:26,large:36},l=(0,o.Z)("div",{target:"ewi4oqc0"})([],(t=>(0,s.Z)({width:"100%",height:"100%",position:"relative"},t.style))),u=(0,o.Z)("div",{target:"ewi4oqc1"})("position:absolute;left:50%;top:50%;margin-left:",(t=>t.marginLeft),"px;margin-top:",(t=>t.marginTop),"px;z-index:100;");class d extends i.PureComponent{render(){const{style:t,size:e}=this.props;return i.createElement(l,{style:t,"data-test-id":"wrapper-spinner"},i.createElement(u,{"data-test-id":"spinner",marginLeft:-c[e]/2,marginTop:-c[e]/2},i.createElement(r.Z,{size:c[e]})))}}d.displayName="CenteredSpinner",(0,a.Z)(d,"displayName","CenteredSpinner"),(0,a.Z)(d,"defaultProps",{size:"small"})},982791:(t,e,n)=>{"use strict";n.d(e,{L:()=>a});const a=()=>{const t=Array.from(document.getElementsByClassName("atlaskit-portal")).filter((t=>t.firstChild));return Boolean(t.filter((t=>t.querySelectorAll('[role="dialog"]').length)).length)}},806297:(t,e,n)=>{"use strict";n.d(e,{q:()=>l,S:()=>u});var a=n(991332),s=n(122551),o=n(275513),i=n(147543),r=n(28201),c=n(72055);const l=(0,r.ZR)({__loadable_id__:"IzFuP",name:"ErrorComponent",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(89990),n.e(12953),n.e(96068),n.e(99735)]).then(n.bind(n,743037))).ErrorComponent}),u=({attribution:t,attributes:e,children:n,modal:r})=>{const u=(0,s.useCallback)((t=>s.createElement(l,(0,a.Z)((0,a.Z)({},t),{},{modal:r}))),[r]),d=(0,s.useCallback)((t=>{(0,i.OG)(t)||(0,o.OV)().fail({error:t,attributes:e})}),[e]);return s.createElement(c.O,{attribution:t,renderOnError:u,onError:d},n)};u.displayName="ErrorBoundary"},990862:(t,e,n)=>{"use strict";let a;n.d(e,{k:()=>a}),function(t){t.SHARE_PAGE="share-page",t.PAGE_RESTRICTIONS="page-restrictions",t.CONTENT_TOOLS="content-tools",t.PAGE_FAVOURITE="page-favourite",t.WATCH_PAGE="watch-page",t.EDIT_PAGE="edit-page",t.PAGE_COMMENTS="page-comments"}(a||(a={}))},494609:(t,e,n)=>{"use strict";n.d(e,{F:()=>c});var a=n(991332),s=n(29298),o=n(507080),i=n(275513),r=n(199319);class c extends o.W2{constructor(...t){super(...t),(0,s.Z)(this,"state",{items:[],itemsLoaded:!1}),(0,s.Z)(this,"loadTimeout",null),(0,s.Z)(this,"addItem",(t=>{if(this.state.items.filter((e=>e.key===t)).length)return!1;const e={key:t,loaded:!1};return this.state.items.push(e),!0})),(0,s.Z)(this,"getItem",(t=>{const e=this.state.items.find((e=>e.key===t));return e?(0,a.Z)({},e):void 0})),(0,s.Z)(this,"markItem",(async t=>{var e;null!==(e=this.getItem(t))&&void 0!==e&&e.loaded||this.setState((e=>({items:e.items.map((e=>e.key!==t?e:{key:e.key,loaded:!0}))})),this.checkAllItems)})),(0,s.Z)(this,"checkAllItems",(()=>{let t=!0;this.state.items.length&&(this.state.items.forEach((e=>{e.loaded||(t=!1)})),t&&((0,i.OV)().succeed({name:r.eYX}),this.state.itemsLoaded||(this.setState((()=>({itemsLoaded:!0}))),clearTimeout(this.loadTimeout))))})),(0,s.Z)(this,"initItems",(()=>{this.state.items=[],this.state.itemsLoaded=!1,clearTimeout(this.loadTimeout),this.startTimer(),(0,i.OV)().start({name:r.eYX})})),(0,s.Z)(this,"startTimer",(()=>{this.loadTimeout=setTimeout((()=>{(0,i.OV)().fail({name:r.eYX,error:new Error("Grouped Page Buttons loading exceeded 5000 milliseconds")}),this.setState((()=>({itemsLoaded:!0})))}),5e3)}))}}},510555:(t,e,n)=>{"use strict";n.d(e,{jb:()=>i,g6:()=>r,bs:()=>l,Es:()=>u,Nd:()=>d,RW:()=>h});const a=(0,n(616158).j)("session-data"),s="confluence-frontend-next.featureFlagLocalOverrides",o=(()=>{try{const t="__random__local__storage__test__key__";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}})(),i=()=>{let t;t=o?window.localStorage.getItem(s):window.sessionStorage.getItem(s);try{return t?JSON.parse(t):{}}catch(e){return{}}},r=()=>o?null!=window.localStorage.getItem(s):null!=window.sessionStorage.getItem(s),c=t=>{const e=t(i());if(Object.keys(e).length)if(o)try{window.localStorage.setItem(s,JSON.stringify(e))}catch(n){a.error`Unable to set local storage. key = "${s}", value = "${JSON.stringify(e)}"`}else window.sessionStorage.setItem(s,JSON.stringify(e));else o?window.localStorage.removeItem(s):window.sessionStorage.removeItem(s);return e},l=(t,e)=>c((n=>(n[t]=e,n))),u=t=>c((e=>(delete e[t],e))),d=()=>c((()=>({}))),h=(t,e)=>{if(!r())return t;const n=i();return Object.keys(t).reduce(((a,s)=>(a[s]=e(s,n,t),a)),{})}},917068:(t,e,n)=>{"use strict";n.d(e,{e:()=>d,g:()=>u});var a=n(29298),s=n(122551),o=n(913879),i=n(158238),r=n(991332),c=n(997811),l=n(115181);const u=()=>window.__SESSION_DATA_PROMISE__?window.__SESSION_DATA_PROMISE__:window.__SESSION_DATA_PROMISE__=(0,o.LW)(async function(t={}){if(window.USE_MOCKED_SESSION_DATA)return new Promise((t=>{window.MOCK_SESSION_DATA_RESOLVE=t}));if(window.__SESSION_DATA__)return window.__SESSION_DATA__;const e=window.GLOBAL_APOLLO_CLIENT_URI||"/cgraphql";return window.__SESSION_DATA__=l.H.run("fetch:SessionDataQuery",(()=>fetch(`${e}?q=SessionDataQuery`,(0,c.I)({method:"POST",credentials:"include",referrerPolicy:"same-origin",headers:(0,r.Z)({"X-APOLLO-OPERATION-NAME":"SessionDataQuery","Content-Type":"application/json"},t.headers),body:JSON.stringify({query:"\nquery SessionDataQuery @SLA {\n  tenant {\n    shard\n    cloudId\n    environment\n    activationId\n    editions {\n      edition\n    }\n  }\n  userForAnalytics: user {\n    id\n  }\n  user(current: true) {\n    id\n    displayName\n    confluence {\n      accountId\n      userKey\n      locale\n    }\n    timeZone\n  }\n  featureFlags(extraTargeting: true) {\n    nodes {\n      id\n      value\n      explanation {\n        ruleIndex\n        ruleId\n        kind\n      }\n    }\n  }\n}\n"})})).then((async t=>{if(!t.ok)throw new Error(`Cannot load session data: ${t.statusText}`);const e=(await t.json()).data;return window.__SESSION_DATA__=e,e}))))}().then(i.K));class d extends s.Component{constructor(t){super(t),(0,a.Z)(this,"_mount",void 0),(0,a.Z)(this,"state",{});const e=u();this._mount=!0,(0,o.wp)(e)?this.state={sessionData:(0,o.NA)(e)}:e.then((t=>{this._mount&&this.setState({sessionData:t})}))}componentWillUnmount(){this._mount=!1}render(){const{sessionData:t}=this.state;return t?this.props.children(t):!0===this.props.renderChildrenWhenLoading?this.props.children({loading:!0}):null}}d.displayName="SessionData"},505841:(t,e,n)=>{"use strict";n.d(e,{B:()=>_});var a=n(991332),s=n(69210),o=n(405124),i=n.n(o),r=n(937613),c=n(443033);const l={sendOperationalEvent:t=>(0,c.getAnalyticsWebClient)().then((e=>{e.sendOperationalEvent(t)}))},u=(0,s.default)(((t={})=>new r.Z({flags:t,analyticsHandler:l})),i());var d=n(510555),h=n(596207);let p={},g={};const m=(t,e)=>{const n=(t=>{if(!t&&!window.location.href)return{};const e=new URL(t||window.location.href);return new URLSearchParams(e.search)})(e);for(const a in p)void 0!==t[a]&&("true"!==n.get(p[a])?"false"===n.get(p[a])&&(t[a]=!1):t[a]=!0)};function f(t){return"true"===t||"false"!==t&&("object"==typeof t?JSON.stringify(t):t)}function S(t,e){return t.reduce(((t,n)=>(t[n.id]=e(n),t)),{})}const w=(t,e,n)=>e.hasOwnProperty(t)?(0,a.Z)((0,a.Z)({},n[t]),{},{value:e[t]}):n[t];function E(t){return"object"==typeof t&&"value"in t?(0,a.Z)((0,a.Z)({},t.explanation?{explanation:(0,a.Z)({},t.explanation)}:{}),{},{value:f(t.value)}):{value:f(t),explanation:void 0}}const _=(0,s.default)(((t,e)=>{const n=t?S(t,E):{},a=(0,d.RW)(n,w),s=u();s.setFlags(a);const{original:o,withOverrides:i}=(t=>{const e=S(t,(t=>f(t.value)));return{original:e,withOverrides:(0,d.RW)(e,((t,e,n)=>e.hasOwnProperty(t)?e[t]:n[t]))}})(t);return((t,e)=>{for(const s in g){const o=t[g[s].rolloutFF];if("string"==typeof o)try{const a=JSON.parse(o);var n;t[s]=e?t[s]&&(a.enabledLastDigits.includes(e.substr(-1))||(null===(n=a.enabledUserIds)||void 0===n?void 0:n.includes(e))):t[s]&&a.includeAnonUsers}catch(a){(0,h.U)().submitError(a,{attribution:"backbone"})}}})(i,e),m(i),{originalFeatureFlags:o,featureFlagsWithOverrides:i,featureFlagClient:s}}))},414762:(t,e,n)=>{"use strict";n.r(e),n.d(e,{EDITOR2_SHORTCUTS:()=>a,BROWSER_SAVE_SHORTCUT:()=>s,COMMENT_EDITOR_SHORTCUT:()=>o,INLINE_COMMENTS_SHORTCUT:()=>i,BLOG_SHORTCUT:()=>r,GLOBAL_CREATE_SHORTCUT:()=>c,STAR_BUTTON_SHORTCUT:()=>l,CREATE_COMMENT_SHORTCUT:()=>u,LINK_TO_THIS_PAGE_SHORTCUT:()=>d,EDIT_SHORTCUT:()=>h,PRESENTATION_MODE_SHORTCUT:()=>p,WATCH_PAGE_SHORTCUT:()=>g,SHARE_PAGE_SHORTCUT:()=>m,LABELS_SHORTCUT:()=>f,VIEW_ATTACHMENTS_SHORTCUT:()=>S,NEXT_COMMENT_SHORTCUT:()=>w,PREV_COMMENT_SHORTCUT:()=>E,SUBMIT_FEEDBACK_SHORTCUT:()=>_,NAVIGATION_SHORTCUT:()=>T,GO_HOME_SHORTCUT:()=>C,NOTIFICATIONS_SHORTCUT:()=>y,GO_TO_RECENT_SHORTCUT:()=>I,SPACE_OVERVIEW_SHORTCUT:()=>O,NAVIGATION_SLASH_SHORTCUT:()=>b,SIDE_NAVIGATION_SHORTCUT:()=>v,CLOSE_INLINE_COMMENTS_SHORTCUT:()=>A,UNDO_SHORTCUT:()=>R,PREV_TEMPLATE_SHORTCUT:()=>P,NEXT_TEMPLATE_SHORTCUT:()=>U,HELP_SHORTCUT:()=>W});const a={PUBLISH:"mod+enter",PUBLISH_WITH_COMMENT:"mod+shift+enter",EDIT:"e",PREVIEW:"mod+shift+e"},s="mod+s",o="command+enter",i="mod+enter",r="b",c="c",l="f",u="m",d="k",h="e",p="r",g="w",m="s",f="l",S="t",w="n",E="p",_="g f",T="g g",C="g d",y="g n",I="g r",O="g s",b="/",v="[",A="]",R="mod+z",P="left",U="right",W="?"},604343:(t,e,n)=>{"use strict";n.d(e,{j3:()=>o,Mm:()=>i,qX:()=>r,fK:()=>c,HU:()=>l});var a=n(414762);const s=(t,e)=>("string"==typeof e?t.push(e):"object"==typeof e&&t.push(...Object.values(e).reduce(s,[])),t),o="shortcuts-are-allowed",i="shortcuts-are-allowed-in-modal",r=["ProseMirror-focused",o],c=[i],l=Object.values(a).reduce(s,[])},271128:(t,e,n)=>{"use strict";n.d(e,{y:()=>s});let a="undefined"!=typeof window&&window.__SSR_FEATURE_FLAGS__||{};function s(t){return t in a?a[t]:null}},822770:(t,e,n)=>{"use strict";n.r(e),n.d(e,{WatchDialog:()=>J});var a=n(29298),s=n(122551),o=n(923813),i=n(507080),r=n(644960),c=n(401487),l=n(917068),u=n(259220),d=n(185346),h=n(806297),p=n(170915),g=n(213489),m=n(375313),f=n(464984),S=n(603494),w=n(824464),E=n(559214),_=n(414762),T=n(818443),C=n(28201),y=n(991332),I=n(415911),O=n(358280),b=n(395937),v=n(27006),A=n(890436),R=n(112261),P=n(920818),U=n(271128),W=n(661315),Z=n(940362),N=n(417130);n(679928);const D=(0,f.defineMessages)({startWatchingIconLabel:{id:"watch-dialog.watch-button.start.watching.label",defaultMessage:"Start watching"},stopWatchingIconLabel:{id:"watch-dialog.watch-button.stop.watching.label",defaultMessage:"Stop watching"},watchStopTooltip:{id:"watch-dialog.stop.button.tooltip",defaultMessage:"Stop watching"},watchStartTooltip:{id:"watch-dialog.start.button.tooltip",defaultMessage:"Watch"}}),B=(0,s.forwardRef)(((t,e)=>{let{as:n=b.Z,style:a}=t,o=(0,I.Z)(t,["as","style"]);return s.createElement(n,(0,y.Z)((0,y.Z)({},o),{},{style:a,ref:e,className:(0,O.Z)(["_701w1ul9",o.className])}))}));const M=(0,r.Z)()((0,S.ZP)(class extends s.PureComponent{constructor(...t){super(...t),(0,a.Z)(this,"handleClick",(()=>{this.clickAnalyticsEvent(),this.props.onClick()}))}componentDidMount(){var t,e;const{shouldSSRWatchButton:n}=this.props;n&&null!==(t=window)&&void 0!==t&&null!==(e=t.__SSR_EVENTS_CAPTURE__)&&void 0!==e&&e.watchButton&&(this.handleClick(),delete window.__SSR_EVENTS_CAPTURE__.watchButton)}clickAnalyticsEvent(){const{createAnalyticsEvent:t,isWatching:e}=this.props;t({type:"sendUIEvent",data:{action:e?"unwatched":"watched",actionSubject:"page-watch-button",source:"viewPageScreen"}}).fire()}render(){const{isSelected:t,intl:e,isDisabled:n,isWatching:a,onMouseOver:o,triggerProps:i,defaultTab:r}=this.props;m.A.PAGE,(0,U.y)("confluence.ssr.space-watch-button")&&m.A.SPACE;return s.createElement(P.Z,{name:"page-watch-spotlight"},s.createElement(R.Z,{tag:"span",content:s.createElement(N.oW,{shortcut:_.WATCH_PAGE_SHORTCUT,contentBefore:a?e.formatMessage(D.watchStopTooltip):e.formatMessage(D.watchStartTooltip)})},!1,s.createElement(W.u,{metricName:Z.yG},s.createElement(B,(0,y.Z)({"data-id":"page-watch-button","data-test-id":"page-watch-button",appearance:"subtle",isDisabled:n,isSelected:t,onClick:this.handleClick,onMouseOver:o,onFocus:o,iconBefore:a?s.createElement(v.default,{label:e.formatMessage(D.stopWatchingIconLabel)}):s.createElement(A.default,{label:e.formatMessage(D.startWatchingIconLabel)})},i)))))}})),k=(0,f.defineMessages)({watchPageNotification:{id:"watch-dialog.notification.start.watching.page",defaultMessage:"You started watching this page."},unwatchPageNotification:{id:"watch-dialog.notification.stop.watching.page",defaultMessage:"You stopped watching this page."},watchBlogNotification:{id:"watch-dialog.notification.start.watching.blog",defaultMessage:"You started watching this blog."},unwatchBlogNotification:{id:"watch-dialog.notification.stop.watching.blog",defaultMessage:"You stopped watching this blog."}}),x=(0,C.ui)({__loadable_id__:"uZIhO",name:"LazyWatchDialogContent",loader:async()=>(await Promise.all([n.e(12705),n.e(6944)]).then(n.bind(n,363859))).WatchDialogContent,loading:({shouldSSRWatchButton:t})=>s.createElement("div",{style:{width:"325px",height:"180px"}},!t&&s.createElement(T.L,{size:"medium"}))}),L=(0,S.ZP)(class extends s.PureComponent{constructor(...t){super(...t),(0,a.Z)(this,"state",{dialogOpen:!1}),(0,a.Z)(this,"toggleDialog",(()=>{this.props.isDisabled||this.setState((t=>({dialogOpen:!t.dialogOpen})))})),(0,a.Z)(this,"handleShortcutClick",(()=>{const{contentId:t,params:e,watchContent:n,unwatchContent:a,flagsContainer:s,intl:o}=this.props;e.isWatchingSpace?this.setState({dialogOpen:!0}):e.isWatchingPage?a({variables:{id:t}}).then((()=>{s.showSuccessFlag({title:o.formatMessage(e.isBlogPost?k.unwatchBlogNotification:k.unwatchPageNotification),close:"auto"})})):n({variables:{id:t}}).then((()=>{s.showSuccessFlag({title:o.formatMessage(e.isBlogPost?k.watchBlogNotification:k.watchPageNotification),close:"auto"})}))})),(0,a.Z)(this,"closeDialog",(()=>{this.setState({dialogOpen:!1})})),(0,a.Z)(this,"renderPopupTrigger",(t=>{const{dialogOpen:e}=this.state,{isDisabled:n,customTrigger:a,shouldSSRWatchButton:o,defaultTab:i}=this.props,r=a||M;return s.createElement(r,{isDisabled:n,isWatching:this.isWatching(),isSelected:e,onMouseOver:x.preload,onClick:this.toggleDialog,triggerProps:t,shouldSSRWatchButton:o,defaultTab:i})})),(0,a.Z)(this,"renderPopupContent",(()=>{const{contentId:t,spaceId:e,params:n,watchContent:a,defaultTab:o,unwatchContent:i,watchSpace:r,unwatchSpace:c,watchBlogs:l,unwatchBlogs:u,shouldSSRWatchButton:d}=this.props;return s.createElement("div",{style:{padding:"24px 16px"}},s.createElement(x,{contentId:t,spaceId:e,defaultTab:o,params:n,watchContent:a,unwatchContent:i,watchSpace:r,unwatchSpace:c,watchBlogs:l,unwatchBlogs:u,closeWatchDialog:this.closeDialog,shouldSSRWatchButton:d}))}))}isWatching(){const{isDisabled:t,params:e}=this.props;return!t&&(e.isWatchingPage||e.isBlogPost&&e.isWatchingBlogs||e.isWatchingSpace)}render(){const{dialogOpen:t}=this.state,{isDisabled:e,useShortcut:n,customPlacement:a}=this.props;return s.createElement(s.Fragment,null,n&&!e&&s.createElement(E.S,{accelerator:_.WATCH_PAGE_SHORTCUT,listener:this.handleShortcutClick}),s.createElement(w.Z,{isOpen:t,onClose:this.closeDialog,content:()=>this.renderPopupContent(),trigger:this.renderPopupTrigger,placement:a}))}});var H=n(35908),G=n(349705),F=n(331377);const q=F.ZP`mutation WatchDialogWatchContentMutation($id:ID!){watchContent(watchContentInput:{contentId:$id currentUser:true}){content{id currentUserIsWatching}}}`,$=F.ZP`mutation WatchDialogUnwatchContentMutation($id:ID!){unwatchContent(watchContentInput:{contentId:$id currentUser:true}){content{id currentUserIsWatching}}}`,V=F.ZP`mutation WatchDialogWatchSpaceMutation($spaceId:ID!){watchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`,j=F.ZP`mutation WatchDialogUnwatchSpaceMutation($spaceId:ID!){unwatchSpace(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatched}}}}`,Q=F.ZP`mutation WatchDialogWatchBlogsMutation($spaceId:ID!){watchBlogs(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatchingBlogs}}}}`,z=F.ZP`mutation WatchDialogUnwatchBlogsMutation($spaceId:ID!){unwatchBlogs(watchSpaceInput:{spaceId:$spaceId currentUser:true}){space{id currentUser{isWatchingBlogs}}}}`;var X,K=n(584020);const J=(0,r.Z)()((X=class extends s.PureComponent{constructor(...t){super(...t),(0,a.Z)(this,"updateUnwatchBlogs",((t,{data:{unwatchBlogs:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.space.currentUser.isWatchingBlogs=e.space.currentUser.isWatchingBlogs,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"updateWatchBlogs",((t,{data:{watchBlogs:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.space.currentUser.isWatchingBlogs=e.space.currentUser.isWatchingBlogs,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"updateWatchSpace",((t,{data:{watchSpace:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.space.currentUser.isWatched=e.space.currentUser.isWatched,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"updateUnwatchSpace",((t,{data:{unwatchSpace:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.space.currentUser.isWatched=e.space.currentUser.isWatched,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"updateWatchContent",((t,{data:{watchContent:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.currentUserIsWatching=e.content.currentUserIsWatching,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"updateUnwatchContent",((t,{data:{unwatchContent:e}})=>{const{contentId:n}=this.props,a=t.readQuery({query:G.G,variables:{contentId:n}});a.singleContent.currentUserIsWatching=e.content.currentUserIsWatching,t.writeQuery({query:G.G,data:a})})),(0,a.Z)(this,"unwatchBlogAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","blogs")})),(0,a.Z)(this,"watchBlogAnalytics",(()=>{this.fireAnalyticsEvent("watch","blogs")})),(0,a.Z)(this,"unwatchSpaceAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","space")})),(0,a.Z)(this,"watchSpaceAnalytics",(()=>{this.fireAnalyticsEvent("watch","space")})),(0,a.Z)(this,"unwatchContentAnalytics",(()=>{this.fireAnalyticsEvent("unwatch","content")})),(0,a.Z)(this,"watchContentAnalytics",(()=>{this.fireAnalyticsEvent("watch","content")}))}fireAnalyticsEvent(t,e){const{contentId:n,createAnalyticsEvent:a}=this.props;a({type:"sendTrackEvent",data:{action:t,actionSubject:e,actionSubjectId:n,source:"WatchDialog",attributes:{componentVersion:"v2"}}}).fire()}render(){const{contentId:t,defaultTab:e,customPlacement:n,onRender:a,customTrigger:r,compact:f,useShortcut:S,isPreloadingData:w}=this.props;if(!t)return null;const E=Boolean(window.__SSR_RENDERED__&&(e===m.A.PAGE||e===m.A.SPACE));return s.createElement(h.S,{attribution:p.x.COLLABORATION},s.createElement(l.e,null,(({isLicensed:l,userId:h})=>h?s.createElement(i.xs,{to:[d.Q]},(i=>s.createElement(o.AE,{query:G.G,variables:{contentId:t},skip:!l,fetchPolicy:w||E?"cache-first":"cache-and-network"},(({data:d,loading:h,error:p})=>{var m,w,_,T,C,y;if(p)return(0,g.T)(p)&&(0,c.Xb)(p),null;if(h)return s.createElement(H.z,{compact:f});const I=null!=(y=d)&&null!=(y=y.singleContent)&&null!=(y=y.space)?y.id:y,O={isWatchingPage:null!=(C=d)&&null!=(C=C.singleContent)?C.currentUserIsWatching:C,isWatchingSpace:null!=(T=d)&&null!=(T=T.singleContent)&&null!=(T=T.space)&&null!=(T=T.currentUser)?T.isWatched:T,isBlogPost:"blogpost"===(null!=(_=d)&&null!=(_=_.singleContent)?_.type:_),isWatchingBlogs:null!=(w=d)&&null!=(w=w.singleContent)&&null!=(w=w.space)&&null!=(w=w.currentUser)?w.isWatchingBlogs:w,isAdmin:(b=(null!=(m=d)&&null!=(m=m.singleContent)&&null!=(m=m.space)?m.operations:m)||[],Boolean(b.find((t=>"space"===t.targetType&&"administer"===t.operation))))};var b;return s.createElement(o.mm,{mutation:z,onCompleted:this.unwatchBlogAnalytics,update:this.updateUnwatchBlogs},(c=>s.createElement(o.mm,{mutation:Q,onCompleted:this.watchBlogAnalytics,update:this.updateWatchBlogs},(d=>s.createElement(o.mm,{mutation:j,onCompleted:this.unwatchSpaceAnalytics,update:this.updateUnwatchSpace},(h=>s.createElement(o.mm,{mutation:V,onCompleted:this.watchSpaceAnalytics,update:this.updateWatchSpace},(p=>s.createElement(o.mm,{mutation:$,onCompleted:this.unwatchContentAnalytics,update:this.updateUnwatchContent},(g=>s.createElement(o.mm,{mutation:q,onCompleted:this.watchContentAnalytics,update:this.updateWatchContent},(o=>(a(),s.createElement(s.Fragment,null,s.createElement(L,{contentId:t,spaceId:I,params:O,defaultTab:e,watchContent:o,unwatchContent:g,watchSpace:p,unwatchSpace:h,watchBlogs:d,unwatchBlogs:c,flagsContainer:i,customPlacement:n,isDisabled:!l,customTrigger:r,useShortcut:S,shouldSSRWatchButton:E}),s.createElement(u.M,{key:t,metric:K.V})))))))))))))))})))):null)))}},(0,a.Z)(X,"defaultProps",{onRender:()=>{},useShortcut:!0}),X))},941735:(t,e,n)=>{"use strict";n.r(e),n.d(e,{WatchDialogWrapper:()=>l});var a=n(29298),s=n(122551),o=n(507080),i=n(990862),r=n(494609),c=n(822770);class l extends s.PureComponent{constructor(...t){super(...t),(0,a.Z)(this,"isItemMarked",!1),(0,a.Z)(this,"markItem",null),(0,a.Z)(this,"buttonRendered",(()=>{this.isItemMarked||(this.isItemMarked=!0,this.markItem(i.k.WATCH_PAGE))}))}render(){const{contentId:t,defaultTab:e,headerSticky:n,isPreloadingData:a}=this.props,l=n?"auto":void 0;return s.createElement(o.xs,{to:[r.F]},(({addItem:n,markItem:o})=>(n(i.k.WATCH_PAGE),this.markItem=o,s.createElement(c.WatchDialog,{contentId:t,defaultTab:e,customPlacement:l,onRender:this.buttonRendered,isPreloadingData:a}))))}}l.displayName="WatchDialogWrapper"},27006:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,s=(a=n(122551))&&a.__esModule?a:{default:a},o=n(386056);const i=t=>s.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill="currentColor" fill-rule="evenodd"><path d="M11.983 15.984a4.005 4.005 0 01-4.002-4c0-2.206 1.795-4 4.002-4a4.005 4.005 0 014.002 4c0 2.206-1.795 4-4.002 4M12 4C6.48 4 2 8.84 2 12c0 3.086 4.577 8 10 8s10-4.914 10-8c0-3.16-4.481-8-10-8"/><circle cx="12" cy="12" r="2"/></g></svg>'},t));i.displayName="WatchFilledIcon";var r=i;e.default=r},920818:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var a=n(122551),s=n(807892),o=n(452557);const i=({children:t,name:e})=>a.createElement(o.l4,null,(n=>n?a.createElement(s.Z,{innerRef:n(e)},t):t))},824464:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=n(657881).G},657881:(t,e,n)=>{"use strict";n.d(e,{G:()=>T});var a=n(122551),s=n(321534),o=n(38952),i=n(307271),r=n(52054),c=n(676424),l=n(953307),u=n(485855),d=n(131436);const h=({children:t,update:e})=>{const n=(0,a.useRef)(!0);return(0,a.useLayoutEffect)((()=>{n.current?n.current=!1:e()}),[e]),a.createElement(a.Fragment,null,t)};var p=n(451598),g=n(437705);var m=n(450509),f=n.n(m);const S=(0,s.iv)({display:"block",boxSizing:"border-box",zIndex:c.ug.layer(),flex:"1 1 auto",backgroundColor:`var(--ds-surface-overlay, ${d.N0})`,borderRadius:`${(0,c.E0)()}px`,boxShadow:`var(--ds-shadow-overlay, 0 4px 8px -2px ${d.Nx}, 0 0 1px ${d.VG})`,overflow:"auto",":focus":{outline:"none"}}),w=(0,a.forwardRef)(((t,e)=>(0,s.tZ)("div",(0,l.Z)({css:S},t,{ref:e}))));const E=function({isOpen:t,id:e,offset:n,testId:o,content:i,fallbackPlacements:r,onClose:c,boundary:l,rootBoundary:d,shouldFlip:m,placement:S="auto",popupComponent:E=w,autoFocus:_=!0,triggerRef:T,shouldUseCaptureOnOutsideClick:C}){const[y,I]=(0,a.useState)(null),[O,b]=(0,a.useState)(null);(({popupRef:t,initialFocusRef:e})=>{(0,a.useEffect)((()=>{if(!t)return g.Z;const n={clickOutsideDeactivates:!0,escapeDeactivates:!0,initialFocus:e||t,fallbackFocus:t,returnFocusOnDeactivate:!0},a=f()(t,n);let s=requestAnimationFrame((()=>{s=null,a.activate()}));return()=>{null!=s&&(cancelAnimationFrame(s),s=null),a.deactivate()}}),[t,e])})({initialFocusRef:O,popupRef:y}),(({isOpen:t,onClose:e,popupRef:n,triggerRef:s,shouldUseCaptureOnOutsideClick:o})=>{(0,a.useEffect)((()=>{if(!t||!n)return g.Z;const a=t=>{e&&e(t)};return(0,p.Ev)(window,[{type:"click",listener:t=>{const{target:e}=t;if(!document.body.contains(e))return;const o=n&&n.contains(e),i=s&&s.contains(e);o||i||a(t)},options:{capture:o}},{type:"keydown",listener:t=>{const{key:e}=t;"Escape"!==e&&"Esc"!==e||a(t)}}])}),[t,e,n,s,o])})({isOpen:t,onClose:c,popupRef:y,triggerRef:T,shouldUseCaptureOnOutsideClick:C});const v=(0,a.useMemo)((()=>[{name:"flip",enabled:m,options:{rootBoundary:d,boundary:l,fallbackPlacements:r}}]),[m,d,l,r]);return(0,s.tZ)(u.r,{placement:S,offset:n,modifiers:v},(({ref:n,style:a,placement:r,update:l})=>(0,s.tZ)(E,{id:e,"data-placement":r,"data-testid":o,ref:t=>{t&&("function"==typeof n?n(t):n.current=t,I(t))},style:a,tabIndex:_?0:void 0},(0,s.tZ)(h,{update:l},i({update:l,isOpen:t,onClose:c,setInitialFocusRef:b})))))},_=c.ug.layer(),T=(0,a.memo)((({isOpen:t,id:e,offset:n,testId:c,trigger:l,content:u,onClose:d,boundary:h,rootBoundary:p="viewport",shouldFlip:g=!0,placement:m="auto",fallbackPlacements:f,popupComponent:S,autoFocus:w=!0,zIndex:T=_,shouldUseCaptureOnOutsideClick:C=!1})=>{const[y,I]=(0,a.useState)(null);return(0,s.tZ)(o.dK,null,(0,s.tZ)(i.s,null,(({ref:n})=>l({ref:e=>{e&&t&&("function"==typeof n?n(e):n.current=e,I(e))},"aria-controls":e,"aria-expanded":t,"aria-haspopup":!0}))),t&&(0,s.tZ)(r.Z,{zIndex:T},(0,s.tZ)(E,{content:u,isOpen:t,placement:m,fallbackPlacements:f,boundary:h,rootBoundary:p,shouldFlip:g,offset:n,popupComponent:S,id:e,testId:c,onClose:d,autoFocus:w,shouldUseCaptureOnOutsideClick:C,triggerRef:y})))}))}}]);
//# sourceMappingURL=26127.WKsQtMVT9z.js.map