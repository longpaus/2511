(self._cf=self._cf||[]).push([[16558],{330472:e=>{e.exports=function(e,t,n,a){var r=-1,o=null==e?0:e.length;for(a&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}},293618:(e,t,n)=>{"use strict";n.d(t,{W:()=>f});var a=n(991332),r=n(122551),o=n(927831),s=n(499947),i=n(172328),c=n(844151),l=n(960094),d=n(944997),u=n(993417),m=n(597019),p=n(633883);const f=({contentId:e,contextProviders:t})=>(0,s.V)((n=>{if(!n)return null;const{extensionKey:s,parameters:f}=n,{ClassicEditorContextProvider:v=(({children:e})=>e)}=t,E=(0,c.iQ)(n),y={contentId:e,mode:c._B,extensionKey:s,attributes:E,node:n};let I;switch(s){case i.rI.INVALID:const e=f;I=r.createElement(v,null,r.createElement(u.E,(0,a.Z)((0,a.Z)({},e),y)));break;case i.rI.INLINE_EXTERNAL_IMAGE:const t=f;I=r.createElement(m.a,(0,a.Z)((0,a.Z)({},t),y));break;case i.rI.INLINE_MEDIA_IMAGE:const n=f,{link:o}=f;I=r.createElement(p.i,(0,a.Z)((0,a.Z)((0,a.Z)({},n),y),{},{link:o}))}return r.createElement(r.Fragment,null,r.createElement(l.t,{name:(0,c.ag)(c._B,n),mode:c._B,extensionKey:s,attributes:E,timeout:d.O.MACRO_LOAD,contentId:e}),r.createElement(o.DF,null,I))}))},136169:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var a=n(122551),r=n(839676);const o=({parameters:e})=>a.createElement("span",null,a.createElement(r.AH,null,a.createElement(r.zx,{"data-testid":"variable-name"},e.name)),a.createElement(r.Lq,{"data-testid":"variable-type"},`| ${null==e?void 0:e.type}`));o.displayName="TemplateVariableComponent"},645729:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});var a=n(122551),r=n(28201),o=n(818443);const s=(0,r.ui)({__loadable_id__:"Zvqj7",name:"TemplateVariableDialogLoader",loader:async()=>(await Promise.all([n.e(78248),n.e(54936),n.e(11216),n.e(78149)]).then(n.bind(n,438074))).TemplateVariableDialogComponent,loading:()=>a.createElement(o.L,{size:"medium"})})},480315:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(634794);const r=e=>{const{invokeSingle:t,invokeList:n}=(0,a.Z)(e);return{getExtensions:()=>n("getExtensions"),getExtension:(e,n)=>t("getExtension",[e,n]),search:e=>n("search",[e]),getAutoConverter:()=>n("getAutoConverter")}}},634794:(e,t,n)=>{"use strict";let a;n.d(t,{Z:()=>l}),function(e){e.FULFILLED="fulfilled",e.FAILED="failed"}(a||(a={}));const r=e=>e.status===a.FULFILLED,o=e=>({status:a.FULFILLED,value:e}),s=e=>({status:a.FAILED,reason:e}),i=e=>Promise.all(e.map((e=>e.then(o).catch(s)))),c=e=>e.filter(r).map((e=>e.value)),l=e=>{if(0===e.length)throw new Error("At least one provider must be provided");const t=async t=>(await(async()=>{const t=await i(e.map((e=>Promise.resolve(e))));return c(t)})()).map((e=>t(e))),n=(e,t)=>n=>{const a=n[e];if("function"==typeof a)return a.apply(n,t);throw new Error(`"${e}" isn't a function of the provider`)};return{invokeSingle:async(e,a)=>{const r=n(e,a);return(e=>{const t=[];return new Promise(((n,a)=>{e.forEach((r=>r.then((e=>{if(null==e)throw new Error("Result was not found but the method didn't reject/throw. Please ensure that it doesn't return null or undefined.");n(e)})).catch((n=>{t.push(n),t.length===e.length&&a(n)}))))}))})(await t(r))},invokeList:async(e,a)=>{const r=n(e,a),o=await i(await t(r)),s=c(o);return(l=s,[].concat(...l)).filter((e=>e));var l}}}},641688:(e,t,n)=>{"use strict";n.d(t,{R:()=>y});var a=n(788669),r=n(480315),o=n(266260),s=n(172328),i=n(339452),c=n(242749),l=n(812893),d=n(661013),u=n(443033),m=n(500810),p=n(492790),f=n(100903);const v=(e={})=>Boolean(e[l.L4]),E=(e={})=>Boolean(e[l.rA]),y=(e,{intl:t,containerId:n,accountId:l,cloudId:y,spaceKey:I,contentId:w,contentType:h,environment:_,featureFlags:g,extensionHandlers:b,showTemplateInputInPreview:P,showTemplateVariablesInPreview:x,setManifestReadyState:A,createAnalyticsEvent:M})=>{const R=[],T=(0,i.u)({contentId:w,spaceKey:I,features:{}},b,m.s,p.ce,p.hb,t,g,M);R.push(T),(P||x)&&R.push(new a.Z([(0,f.u)(t,P?f.N.INPUT:f.N.CONFIG)]));const Z=(0,o.$G)(),C=[`ari:cloud:confluence::site/${y}`],L=(0,c.ZP)({accountId:null!=l?l:void 0,cloudId:y,apolloClient:Z,contextIds:C,dataProviders:e,environment:(0,o.a)(_),product:"confluence",page:"confluence:macroRenderer",isEditing:!1,analyticsWebClient:(0,u.getAnalyticsWebClient)(),forgeUIAnalyticsContext:(0,o.dN)({objectId:w,objectType:h,containerId:n,containerType:"space"}),extensionData:(0,o.YQ)({spaceKey:null!=I?I:"",contentId:w}),extensionHandlerWithReference:null!=g&&g[d.mE]?b[s.UE.MACRO_WITH_REFERENCES]:void 0,temporaryContext:(0,o.Ti)(null!=l?l:"",y,w,null!=I?I:""),shouldRenderHostedResources:!0,egressConsentFlowEnabled:!0,isConnectToForgeMigrationEnabled:v(g),isSaveConnectMacroAsForgeEnabled:E(g),connectExtensionProvider:Promise.resolve(T)});R.push(L),R.length>0&&e.setProvider("extensionProvider",Promise.resolve((0,r.Z)(R))),Promise.all(R).then((()=>{null==A||A(!0)}))}},492790:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>y,dm:()=>I,wk:()=>h,ce:()=>g,hb:()=>b});var a=n(991332),r=n(917068),o=n(724421),s=n.n(o),i=n(347819),c=n(208757),l=n(668410),d=n(123474),u=n(172328),m=n(616158),p=n(130428),f=n(803671),v=n(767658);const E={type:"extension",content:u.D4};function y(){return(0,i.Z)().then((e=>e.filter((e=>u.KJ.includes(e.macroName)))))}function I(e,t,n){const a=e.macroName;return e.anyParameterRequired||"children"===a||"tasks-report-macro"===a?b(e,t,void 0,n):(0,c.T)({macroDefinition:{name:a,body:"",params:{}},contentId:t.contentId})}async function w(e,t,n,a,o,i){const p=await(0,d.KD)(e);let E;return{autoClose:!1,onComplete:async d=>{E=!0,e.UI.showBrowserSpinner(!0);const y=function(e){const{name:t,body:n,params:a,defaultParameterValue:r,schemaVersion:o}=e;return{name:t||"",body:n||"",params:a,defaultParameterValue:r||"",schemaVersion:o}}(d);try{var I;let o=await async function(e,t,n){if("anchor"===e.name){let t=e.params[""].replace(/^\s+/g,"");if(t=t.replace(/\s+$/g,""),t=t.replace(/\s+/g,"-"),t=t.replace(/[\"\']+/g,""),n&&n.createAnalyticsEvent){let e;if(""===t)e="missing";else{t=t.substring(0,f.c0);try{decodeURIComponent(t),e="valid"}catch(a){e="invalid"}}((e,t,n,a)=>{e({type:"sendUIEvent",data:{action:t,actionSubject:`${t}Anchor`,source:"extensions-editor",attributes:{contentId:n,nameStatus:a}}}).fire()})(n.createAnalyticsEvent,n.action,null==n?void 0:n.contentId,e)}return{type:"inlineExtension",attrs:{extensionType:"com.atlassian.confluence.macro.core",extensionKey:"anchor",parameters:{macroParams:{"":{value:t}},macroMetadata:{title:"Anchor"}}}}}if("jiraroadmap"===e.name){let n=!1;try{const{featureFlags:e}=await(0,r.g)();n=String(e["confluence.frontend.fabric.editor.smartcards.macro-override"]).split(",").indexOf("jiraroadmap")>-1}catch(o){}if(n&&!t)return function(e){return{type:"embedCard",attrs:{url:e.params&&e.params.url,layout:"wide"}}}(e)}else if("jira"===e.name&&e.params.key&&(0,v.J)("confluence/jim/jira/applinks-bridge-for-spa"))try{const t=s().require("confluence/jim/jira/applinks-bridge-for-spa"),n=await t.getUrlForKey(e.params.key,e.params.serverId);if(await t.isCloudAppLink(e.params.serverId)&&n&&-1!==n.indexOf("atlassian.net")==(-1!==s().location.origin.indexOf("atlassian.net")))return{type:"inlineCard",attrs:{url:n}}}catch(o){}return null}(y,"jiraroadmap"===(null==n||null===(I=n.attrs)||void 0===I?void 0:I.extensionKey),i);var w,h;if(!o)if(o=await async function(e,t,n){const a=await(0,c.T)({macroDefinition:e,contentId:t,selectedMacro:null});if(a.type===u.x9)if("string"==typeof e.body){let o;try{o=await(0,l.Mj)("storage","atlas_doc_format",e.body,t)||"",a.content=JSON.parse(o).content}catch(r){(0,m.j)("getMacroBrowserSettings.onComplete").error`Can't convert provided body from storage format to ADF: ${o}`,null!=n&&n.content&&(a.content=null==n?void 0:n.content)}}else null!=n&&n.content&&(a.content=null==n?void 0:n.content);return a}(y,t.contentId,n),"jira"===(null==n||null===(w=n.attrs)||void 0===w?void 0:w.extensionKey)&&i&&i.createAnalyticsEvent)((e,t,n,a)=>{const r="extension"===t&&"inlineExtension"===n,o="inlineExtension"===t&&"extension"===n;(r||o)&&a({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"changedJiraIssueMacroExtensionView",source:"JiraIssueMacro",objectId:e,attributes:{tableToIssueCount:r,issueCountToTable:o}}}).fire()})(t.contentId,null==n?void 0:n.type,null===(h=o)||void 0===h?void 0:h.type,null==i?void 0:i.createAnalyticsEvent);a(o),e.close(),p()}catch(_){o(_)}},onCancel:()=>{p(),E||o({reason:"cancel"})}}}function h(e,t,n){return new Promise((async(r,o)=>{const s=await(0,p.ik)();t&&(s.metadataList=s.metadataList.filter(t));const i=await w(s,e,null,r,o,n);try{s.open((0,a.Z)((0,a.Z)({},i),{},{selectedMacro:null}))}catch(c){o(c)}}))}async function _(){const{featureFlagClient:e}=await(0,r.g)();return e.getBooleanValue("confluence.frontend.enrich-content-context",{default:!1})}function g(e,t,n,r){return new Promise((async(o,s)=>{const i=await(0,l.XF)(e||E),c=await(0,p.ik)();n&&(c.metadataList=c.metadataList.filter(n)),r&&(r.action="update");const d=await w(c,t,e,o,s,r);try{const e=await _();c.open((0,a.Z)((0,a.Z)({},d),{},{selectedMacro:e?(0,a.Z)((0,a.Z)({},i),{},{productContext:{"content.id":t.contentId,"enrich-content-context-parameters":!0}}):i}))}catch(u){s(u)}}))}function b(e,t,n,r){return new Promise((async(o,s)=>{const i=await(0,p.ik)();n&&(i.metadataList=i.metadataList.filter(n)),r&&(r.action="insert");const c=await w(i,t,e,o,s,r);try{const n=await _();i.open((0,a.Z)((0,a.Z)({},c),{},{presetMacroMetadata:n?(0,a.Z)((0,a.Z)({},e),{},{productContext:{"content.id":t.contentId,"enrich-content-context-parameters":!0}}):e}))}catch(l){s(l)}}))}},757749:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,a:()=>c});var a=n(122551),r=n(172328),o=n(136169),s=n(641792);const i=e=>{if(!e)return null;const{extensionKey:t,parameters:n}=e;return t===r.rI.TEMPLATE?a.createElement(o.V,{parameters:n}):null},c=e=>{if(!e)return null;const{extensionKey:t,parameters:n}=e;return t===r.rI.TEMPLATE?a.createElement(s.q,{parameters:n}):null}},809415:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>l,Ob:()=>d,rw:()=>u,Km:()=>p,VO:()=>f});var a=n(991332),r=n(405124),o=n.n(r),s=n(645729),i=n(664566),c=n(172328);const l="text",d="variable_name";function u(e=d){return{type:c.gU,attrs:{extensionType:c.UE.TEMPLATE,extensionKey:c.rI.TEMPLATE,parameters:{type:l,name:e}}}}function m(e){return e.attrs&&e.attrs.extensionType===c.UE.TEMPLATE}function p(e,t){return new Promise(((n,r)=>{if(!e.attrs||!t.setActiveModal)return void r(new Error("Cannot open editing template variable dialog"));const o=e.attrs.parameters;t.setActiveModal(s.i,{defaultVariableType:o.type,defaultVariableName:o.name,defaultRows:o.params&&o.params.rows,defaultColumns:o.params&&o.params.columns,defaultListOptions:o.params&&o.params.options,onSave:t=>{const r=(0,i.tr)(e,t);let o=c.OR;r.type===c.x9?o=c.x9:r.type===c.gU&&(o=c.gU),n((0,a.Z)((0,a.Z)({},r),{},{type:o,attrs:r.attrs||{}}))},onClose:()=>{t.closeActiveModal&&t.closeActiveModal()}})}))}function f(e){return(0,i.EK)(e,c.gU).filter(m).reduce(((e,t)=>{const{name:n,type:a,params:r={}}=t.attrs.parameters;if(!e.groupedByName[n])return e.groupedByName[n]=t,e;const s=e.groupedByName[n].attrs.parameters;return(s.type!==a||!o()(s.params||{},r))&&(e.invalidNodes.push(t),e.invalidUniqueNames.includes(n)||e.invalidUniqueNames.push(n)),e}),{groupedByName:{},invalidNodes:[],invalidUniqueNames:[]})}},100903:(e,t,n)=>{"use strict";n.d(t,{N:()=>d,u:()=>m});var a=n(122551),r=n(464984),o=n(174012),s=n(641792),i=n(136169),c=n(172328),l=n(809415);let d;!function(e){e[e.CONFIG=0]="CONFIG",e[e.INPUT=1]="INPUT"}(d||(d={}));const u=(0,r.defineMessages)({templateVariablesAdd:{id:"confluence-fabric-editor.template.variables.add",defaultMessage:"New variable"},templateVariablesAddTooltip:{id:"confluence-fabric-editor.template.variables.add.tooltip",defaultMessage:"Add a new field into the page for the template user to fill out."}});function m(e,t=d.CONFIG,n,r){const m="inlineExtension",p=e.formatMessage(u.templateVariablesAdd),f=t===d.INPUT?s.q:i.V;return{key:c.rI.TEMPLATE,type:c.UE.TEMPLATE,title:p,description:e.formatMessage(u.templateVariablesAddTooltip),icons:{48:async()=>()=>a.createElement(o.default,{label:p,size:"medium"})},modules:{quickInsert:r&&[{key:c.rI.TEMPLATE,featured:!0,action:{type:"node",key:"default",parameters:{type:l.Xi,name:l.Ob}}}],nodes:{default:{type:m,render:async()=>({node:e})=>a.createElement(f,{parameters:e.parameters}),update:n&&(async e=>{try{const{attrs:t}=await(0,l.Km)({type:m,attrs:{parameters:e}},n);return t.parameters||e}catch(t){return e}})}}}}}},664566:(e,t,n)=>{"use strict";n.d(t,{tr:()=>o,EK:()=>i});var a=n(991332);function r(e){return e.type.name||e.type}function o(e,t){return{type:r(e),attrs:(0,a.Z)((0,a.Z)({},e.attrs),{},{parameters:(0,a.Z)((0,a.Z)({},e.attrs.parameters),t)})}}function s(e,t){for(const n of Object.keys(e)){const a=e[n];t(n,a),null!==a&&"object"==typeof a&&s(e[n],t)}}function i(e,t){const n=[];return s(e,((e,a)=>{a&&a.type===t&&n.push(a)})),n}},130428:(e,t,n)=>{"use strict";n.d(t,{ik:()=>s});var a=n(724421),r=n.n(a),o=n(675253);function s(){return new Promise((e=>{o.W.require(["wrc!fabric-editor-macro-browser","wr!com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-macro-browser","wr!com.atlassian.confluence.plugins.gadgets:macro-browser-for-gadgetsplugin","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:editor-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources","wrc!com.atlassian.confluence.extra.team-calendars:amd","wrc!com.atlassian.confluence.extra.team-calendars:user-timezone-setup","wrc!com.atlassian.confluence.extra.team-calendars:calendar-init-editor","wrc!com.atlassian.confluence.extra.team-calendars:macro-browser-web-resources"],(()=>{const t=r().require("confluence-macro-browser/macro-browser");Promise.all([n.e(11216),n.e(4035)]).then(n.bind(n,796424)).then((e=>{e.default()})).then((()=>{r().AJS.trigger("reset.rte"),e(t)}))}))}))}},500810:(e,t,n)=>{"use strict";n.d(t,{s:()=>d});var a=n(122551),r=n(151768),o=n(172328);const s=(0,n(28201).ZR)({__loadable_id__:"ImR1z",name:"UnmodifiableMacroDialogLoader",loader:async()=>(await Promise.all([n.e(78248),n.e(54936),n.e(11216),n.e(22863)]).then(n.bind(n,655057))).UnmodifiableMacroDialog});var i=n(487857),c=n(293618),l=n(922949);function d(e,t,n){const d="inlineExtension",u=t?i.s:c.W;return[o.rI.INVALID,o.rI.INLINE_MEDIA_IMAGE,o.rI.INLINE_EXTERNAL_IMAGE].map((t=>({title:"Migration Extension",key:t,type:o.UE.MIGRATION,icons:{48:async()=>()=>a.createElement(r.default,{label:"Migration Extension",size:"medium"})},modules:{nodes:{default:{type:d,render:async()=>({node:t})=>u({contentId:e,contextProviders:{ClassicEditorContextProvider:l.W}})(t,{}),update:n&&(e=>((e,t)=>new Promise(((n,a)=>{e&&e.attrs&&t.setActiveModal?t.setActiveModal(s,{onClose:()=>{a("cancel"),t.closeActiveModal&&t.closeActiveModal()}}):a(new Error("Cannot open unmodifiable macro dialog"))})))({type:d,attrs:{parameters:e}},n))}}}})))}},548560:(e,t,n)=>{"use strict";n.d(t,{Vv:()=>q});var a=n(991332),r=n(122551),o=n(927831),s=n(922949),i=n(445488),c=n(111059),l=n(28201);const d=()=>null,u=(0,l.ZR)({__loadable_id__:"FuDix",name:"RedactedPlaceholderExtensionHandler",loader:async()=>{const{RedactedPlaceholder:e}=await Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(38639),n.e(35031)]).then(n.bind(n,538063));return e},loading:()=>r.createElement(d,null)});var m=n(917068),p=n(944997),f=n(844151),v=n(960094),E=n(293618),y=n(533763),I=n(58925),w=n(172328),h=n(499947),_=n(968948),g=n(644960),b=n(574409);const P=(0,g.Z)()(class extends r.Component{componentDidMount(){const{createAnalyticsEvent:e,extensionKey:t,attributes:n}=this.props;e&&e({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:t,source:"viewPageScreen",attributes:n,pageLoadInfo:(0,b.aX)()}}).fire()}render(){const{children:e}=this.props;return r.createElement(r.Fragment,null,e)}});var x=n(757749),A=n(852039);const M=({adf:e,macroDefaultProps:t,cloudId:n,userId:o,isPreviewMode:s,contentType:i,shouldLoadAfterPaint:c})=>e?c||s?r.createElement(A.p,{userId:o,cloudId:n,adf:e,macroDefaultProps:t,isPreviewMode:s,contentType:i}):r.createElement(A.Q,{userId:o,cloudId:n,adf:e,macroDefaultProps:t,isPreviewMode:s,contentType:i}):r.createElement(y.b,(0,a.Z)({},t));var R=n(668410),T=n(429218);const Z=({hasADF:e,macroDefaultProps:t,shouldLoadAfterPaint:n})=>{if(!e)return r.createElement(y.b,(0,a.Z)({},t));const{node:o}=t,s=(0,R.MK)(o);return n?r.createElement(T.$,{macroNode:s}):r.createElement(T.q,{macroNode:s})};var C=n(987027);const L=({adf:e,macroDefaultProps:t,cloudId:n,userId:o,shouldLoadAfterPaint:s})=>e?s?r.createElement(C.I,{userId:o,cloudId:n,adf:e,macroDefaultProps:t}):r.createElement(C.w,{userId:o,cloudId:n,adf:e,macroDefaultProps:t}):r.createElement(y.b,(0,a.Z)({},t));var N=n(441232),S=n(158466),D=n(661013);const O=({adf:e,extensionParams:t,referentialityDataSourceProvider:n,children:a})=>{const{featureFlagClient:r}=(0,S.D)();if(!r.getBooleanValue(D.mE,{default:!1}))return a({references:[]});let o=e;if("string"==typeof e)try{o=JSON.parse(e)}catch(i){o={version:1,type:"doc",content:[]}}const{references:s}=(0,N.d8)({adf:o,extensionParams:t,dataSourceProvider:n});return a({references:s})};var F=n(271128),k=n(471017),K=n(197791),U=n(972449),V=n(243543),j=n(496314),B=n(920785);const W={insertCss:e=>e._insertCss()},q=({adf:e,contentId:t,appearance:n,showTemplateVariablesInPreview:r,showTemplateInputInPreview:o,spaceKey:i,shouldIncludeMacroHandlers:c=!0,macroRenderedOutput:l,shouldIncludeMacroWithReferencesHandlers:d=!1,referentialityDataSourceProvider:u,fromFabricEditor:m=!1,isPreviewMode:p=!1,contentType:f},v)=>{const y=$,I=o?x.a:x.X,h=r?{[w.UE.TEMPLATE]:I}:{},_=d?{[w.UE.MACRO_WITH_REFERENCES]:H({adf:e,referentialityDataSourceProvider:u})}:{};return c?(0,a.Z)((0,a.Z)({[w.UE.MACRO_CORE]:y({adf:e,appearance:n,contentId:t,showTemplateVariablesInPreview:r,showTemplateInputInPreview:o,spaceKey:i,macroRenderedOutput:l,referentialityDataSourceProvider:u,fromFabricEditor:m,isPreviewMode:p,contentType:f},v),[w.UE.MIGRATION]:(0,E.W)({contentId:t,contextProviders:{ClassicEditorContextProvider:s.W}})},_),h):{}},G={getExtensionHandlers:q,EditorLoaderLoader:c.Z},H=({adf:e,referentialityDataSourceProvider:t})=>(n,a)=>r.createElement(O,{adf:e,extensionParams:n,referentialityDataSourceProvider:t},a),$=({adf:e,contentId:t,appearance:n,showTemplateVariablesInPreview:s,showTemplateInputInPreview:c,spaceKey:l,macroRenderedOutput:d,referentialityDataSourceProvider:E,fromFabricEditor:w,isPreviewMode:g,contentType:b},x)=>(0,h.V)((h=>{var A,R,T,C;const{extensionKey:N}=h,S=(0,f.iQ)(h),D=null==h||null===(A=h.parameters)||void 0===A?void 0:A.macroParams;if("toc"!==N&&D){const e=Object.entries(D),n=0===e.length||1===e.length&&"_parentId"===e[0][0];x&&!n&&((e,t,n,r)=>{n({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:e,source:"on page view",attributes:(0,a.Z)({pageID:r},t),eventType:"track"}}).fire()})(N,D,x,t)}const q="redactedMacroPlaceholder"===N?{extensionKey:(null==D||null===(R=D.redactedMacroPluginKey)||void 0===R?void 0:R.value)||(null==D||null===(T=D.redactedMacroExtensionKey)||void 0===T?void 0:T.value)}:void 0,H="excerpt-include"===N?{isExcerptNamePresent:!(null==D||!D.name)}:void 0,$=null==D||null===(C=D.isMissingRequiredParameters)||void 0===C?void 0:C.value,X=(o,s,c,m)=>{var p;const f=(0,a.Z)((0,a.Z)({},o),{},{appearance:n}),v=null!=s&&s.getBooleanValue("confluence.frontend.use.macro.output",{default:!1})?null==h||null===(p=h.parameters)||void 0===p?void 0:p.macroOutput:null,E=null==s?void 0:s.getBooleanValue("confluence.frontend.anchor-extension",{default:!1}),P=()=>{const e=window.__SSR_RENDERED__&&(e=>{var t,n;const{attributes:{macroId:a}}=e;return Boolean(null===(t=window)||void 0===t||null===(n=t.__LEGACY_MACRO_RENDERED_OUTPUT__)||void 0===n?void 0:n.find((e=>e.key===a)))})(o)&&!$;return((e,t)=>{var n;if(!(0,F.y)("confluence.ssr.fabric.macros")||!window.__SSR_RENDERED__||null===(n=window)||void 0===n||!n.__SSR_MACROS_INFO__)return;const{extensionKey:a}=t;var r,o;e?(window.__SSR_MACROS_INFO__.successes[a]=(null!==(r=window.__SSR_MACROS_INFO__.successes[a])&&void 0!==r?r:0)+1,window.__SSR_MACROS_INFO__.successCount+=1):(window.__SSR_MACROS_INFO__.failures[a]=(null!==(o=window.__SSR_MACROS_INFO__.failures[a])&&void 0!==o?o:0)+1,window.__SSR_MACROS_INFO__.failureCount+=1)})(e,o),r.createElement(k.w.Provider,{value:G},r.createElement(y.b,(0,a.Z)((0,a.Z)({},o),{},{macroRenderedOutputFromSSR:e&&d,macroOutput:v})))};switch(N){case"redactedMacroPlaceholder":return r.createElement(u,(0,a.Z)((0,a.Z)({},o),{},{redactedAttributes:q}));case"details":return r.createElement(K.L,(0,a.Z)((0,a.Z)({},o),{},{spaceKey:l,Renderer:B.Z,isLegacyRenderer:!0}));case"excerpt":return r.createElement(U.G,(0,a.Z)((0,a.Z)({},f),{},{spaceKey:l,Renderer:B.Z,isLegacyRenderer:!0}));case"expand":return r.createElement(V.f,(0,a.Z)((0,a.Z)({},o),{},{Renderer:B.Z,isLegacyRenderer:!0}));case"create-from-template":return r.createElement(M,{adf:e,macroDefaultProps:o,cloudId:c,userId:m,isPreviewMode:g,contentType:b,shouldLoadAfterPaint:w});case"toc":return r.createElement(L,{adf:e,macroDefaultProps:o,cloudId:c,userId:m,shouldLoadAfterPaint:w});case"livesearch":return r.createElement(Z,{hasADF:!!e,macroDefaultProps:o,shouldLoadAfterPaint:w});case"anchor":return E?r.createElement(j.r,(0,a.Z)((0,a.Z)({},o),{},{isSSR:!1})):P();case"excerpt-include":if(t)return r.createElement(i.n,null,r.createElement(I.c,(0,a.Z)((0,a.Z)({},o),{},{Renderer:_.Y})));default:return P()}};return r.createElement(o.DF,null,r.createElement(O,{adf:e,extensionParams:h,referentialityDataSourceProvider:E},(({references:e})=>{const n={node:h,references:e,contentId:t,showTemplateVariablesInPreview:s||!1,showTemplateInputInPreview:c||!1,spaceKey:l||"",mode:f._B,context:W,extensionKey:N,attributes:S};return r.createElement(r.Fragment,null,r.createElement(v.t,{contentId:t,name:(0,f.ag)(f._B,h),mode:f._B,extensionKey:N,attributes:S,timeout:p.O.MACRO_LOAD}),r.createElement(P,{extensionKey:N,attributes:(0,a.Z)((0,a.Z)({},q),H)},r.createElement(m.e,null,(({featureFlagClient:e,cloudId:t,userId:a})=>X(n,e,t,a)))))})))}))},922949:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});const a=(0,n(28201).ui)({__loadable_id__:"3686B",name:"ClassicEditorContextProviderLazyLoader",loader:()=>Promise.all([n.e(12705),n.e(61769),n.e(78248),n.e(54936),n.e(11216),n.e(89990),n.e(12953),n.e(97996),n.e(61201),n.e(91306),n.e(46003),n.e(40611),n.e(93964),n.e(1054),n.e(43101),n.e(24751),n.e(33079),n.e(77586),n.e(80241),n.e(86888),n.e(82985),n.e(46810),n.e(80256),n.e(13156),n.e(41780),n.e(51514),n.e(79551),n.e(76701),n.e(76530),n.e(99751),n.e(1235),n.e(95491),n.e(63313),n.e(41232),n.e(37213),n.e(65300),n.e(64288),n.e(33763),n.e(13810),n.e(99987),n.e(16558),n.e(803)]).then(n.bind(n,942917))})},111059:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});n(122551);const a=(0,n(28201).ZR)({__loadable_id__:"DsTZh",name:"EditorLoaderLoader",loader:()=>Promise.all([n.e(78248),n.e(54936),n.e(11216),n.e(96207),n.e(99319),n.e(38639),n.e(15677),n.e(20484),n.e(95368),n.e(40295),n.e(71249),n.e(48542)]).then(n.bind(n,323346))})},675253:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,F:()=>c});var a=n(275758);const r={require:(e,t)=>new Promise((n=>{(0,a.N)(e,(e=>{n(e),t&&t(e)}),(()=>{0}))}))};var o=n(29298),s=n(991332),i=n(122551);const c=function(e,t){const n=(0,s.Z)({isBlocking:!0},t);return t=>{class r extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{dependenciesLoaded:!1}),(0,o.Z)(this,"markAsLoaded",(()=>{this.mounted&&this.setState({dependenciesLoaded:!0})}))}componentDidMount(){this.mounted=!0,e&&e.length>0?(0,a.N)(e,this.markAsLoaded,(()=>{0})):this.markAsLoaded()}componentWillUnmount(){this.mounted=!1}render(){const{dependenciesLoaded:e}=this.state;return e||!n.isBlocking?i.createElement(t,(0,s.Z)((0,s.Z)({},this.props),{},{wrmDependenciesLoaded:e})):null}}return r.displayName="WRMComponent",r.displayName=`WRMComponent(${t.displayName||t.name})`,r}}}}]);
//# sourceMappingURL=16558.AykFq2Pmtt.js.map