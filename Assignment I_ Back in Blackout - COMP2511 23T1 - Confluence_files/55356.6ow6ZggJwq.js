(self._cf=self._cf||[]).push([[55356],{170250:(e,t,a)=>{var l=a(725719);e.exports=function(e,t){return!!(null==e?0:e.length)&&l(e,t,0)>-1}},904408:e=>{e.exports=function(e,t,a){for(var l=-1,n=null==e?0:e.length;++l<n;)if(a(t,e[l]))return!0;return!1}},697729:e=>{e.exports=function(e,t,a,l){for(var n=e.length,o=a+(l?1:-1);l?o--:++o<n;)if(t(e[o],o,e))return o;return-1}},725719:(e,t,a)=>{var l=a(697729),n=a(999079),o=a(545324);e.exports=function(e,t,a){return t==t?o(e,t,a):l(e,n,a)}},999079:e=>{e.exports=function(e){return e!=e}},935813:(e,t,a)=>{var l=a(630652),n=a(170250),o=a(904408),r=a(788370),s=a(939752),i=a(439363);e.exports=function(e,t,a){var d=-1,c=n,u=e.length,p=!0,b=[],m=b;if(a)p=!1,c=o;else if(u>=200){var v=t?null:s(e);if(v)return i(v);p=!1,c=r,m=new l}else m=t?[]:b;e:for(;++d<u;){var f=e[d],h=t?t(f):f;if(f=a||0!==f?f:0,p&&h==h){for(var y=m.length;y--;)if(m[y]===h)continue e;t&&m.push(h),b.push(f)}else c(m,h,a)||(m!==b&&m.push(h),b.push(f))}return b}},939752:(e,t,a)=>{var l=a(215867),n=a(231307),o=a(439363),r=l&&1/o(new l([,-0]))[1]==1/0?function(e){return new l(e)}:n;e.exports=r},545324:e=>{e.exports=function(e,t,a){for(var l=a-1,n=e.length;++l<n;)if(e[l]===t)return l;return-1}},231307:e=>{e.exports=function(){}},724260:(e,t,a)=>{var l=a(818114),n=a(420879),o=a(957857),r=a(935813),s=a(830104),i=a(659945),d=o((function(e){var t=i(e);return s(t)&&(t=void 0),r(l(e,1,s,!0),n(t,2))}));e.exports=d},430244:(e,t,a)=>{"use strict";a.d(t,{X:()=>s.u,Z:()=>i});var l=a(953307),n=a(122551),o=a(138504),r=a(74201),s=a(962957);a(833486),a(615188);const i=(0,n.forwardRef)((function(e,t){var a=(0,r.u)(e),i=(0,s.u)(a);return n.createElement(o.S,(0,l.Z)({ref:t},i))}))},962957:(e,t,a)=>{"use strict";a.d(t,{u:()=>p});var l=a(991332),n=a(484612),o=a(415911),r=a(122551),s=a(229154),i=a(138504),d=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,l=String(e).toLowerCase(),n=String(a.getOptionValue(t)).toLowerCase(),o=String(a.getOptionLabel(t)).toLowerCase();return n===l||o===l},u={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,a,l){return!(!e||t.some((function(t){return c(e,t,l)}))||a.some((function(t){return c(e,t,l)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};function p(e){var t=e.allowCreateWhileLoading,a=void 0!==t&&t,c=e.createOptionPosition,p=void 0===c?"last":c,b=e.formatCreateLabel,m=void 0===b?u.formatCreateLabel:b,v=e.isValidNewOption,f=void 0===v?u.isValidNewOption:v,h=e.getNewOptionData,y=void 0===h?u.getNewOptionData:h,g=e.onCreateOption,Z=e.options,L=void 0===Z?[]:Z,_=e.onChange,E=(0,o.Z)(e,d),I=E.getOptionValue,C=void 0===I?i.g:I,w=E.getOptionLabel,x=void 0===w?i.b:w,S=E.inputValue,M=E.isLoading,O=E.isMulti,N=E.value,P=E.name,R=(0,r.useMemo)((function(){return f(S,(0,s.I)(N),L,{getOptionValue:C,getOptionLabel:x})?y(S,m(S)):void 0}),[m,y,x,C,S,f,L,N]),V=(0,r.useMemo)((function(){return!a&&M||!R?L:"first"===p?[R].concat((0,n.Z)(L)):[].concat((0,n.Z)(L),[R])}),[a,p,M,R,L]),D=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return _(e,t);var a=Array.isArray(e)?e:[e];if(a[a.length-1]!==R)_(e,t);else if(g)g(S);else{var l=y(S,S),o={action:"create-option",name:P,option:l};_((0,s.D)(O,[].concat((0,n.Z)((0,s.I)(N)),[l]),l),o)}}),[y,S,O,P,R,g,_,N]);return(0,l.Z)((0,l.Z)({},E),{},{options:V,onChange:D})}},286108:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LabelsSelect:()=>Ie});var l=a(991332),n=a(415911),o=a(358280),r=a(122551),s=a(464984),i=a(883383),d=a(524798),c=a(229154),u=a(138504),p=a(865518),b=a(131436),m=a(171945),v=a(621070),f=a(112261),h=a(973369),y=a(28201),g=a(186483),Z=a(499082),L=a(197728),_=a.n(L),E=a(724260),I=a.n(E),C=a(26011),w=a.n(C),x=a(451379),S=a(199319),M=a(158466),O=a(315677),N=a(401487),P=a(954510),R=a.n(P);const V=/\[messageKey=((?:\w|\.)+){1},\s*args=\[((?:.)+)?\]\]\]/;var D=a(15648),T=a(331377);const k=T.ZP`query LabelSearchQuery($contentId:ID!$searchText:String!){contentLabelSearch(contentId:$contentId searchText:$searchText){suggestedLabels{prefix name id label}otherLabels{prefix name id label}}}`,Q=T.ZP`mutation AddLabelsMutation($contentId:ID!$labels:[LabelInput!]!){addLabels(input:{contentId:$contentId labels:$labels}){labels{count nodes{id prefix name label}}}}`,$=T.ZP`mutation DeleteLabelMutation($contentId:ID!$label:String!){deleteLabel(input:{contentId:$contentId label:$label}){contentId label}}`,A=T.ZP`query LabelsQuery($contentId:ID!$refetchQuery:Boolean!$status:[String]){content(id:$contentId status:$status){nodes{id type operations@skip(if:$refetchQuery){operation targetType}space{id}labels(orderBy:{sortField:LABELLING_CREATIONDATE direction:ASCENDING}){count nodes{id label name prefix}}}}}`,j=T.ZP`query RecommendedLabelsQuery($contentId:ID!$spaceId:ID){getRecommendedLabels(entityId:$contentId entityType:"page" spaceId:$spaceId){recommendedLabels{id name namespace strategy}}}`,F=(0,s.defineMessages)({suggestedLabels:{id:"labels.use-labels-select-props.suggested-labels",defaultMessage:"Suggested labels"}}),z=e=>{const t=e.replace(/^my:/,"");return t.match(D.xd)?"labelsValidationInvalidCharacter":t.match(/^~/)?"labelsValidationTilde":t.length>255?"labelsValidationLength":""},B=e=>/No label found with name/.test(function(e){let t="",a="";const l=[];if("object"==typeof e&&e.message&&(t=e.message),"string"==typeof t&&t.indexOf("messageKey")>=0&&V.test(t)){const e=V.exec(t);a=e[1];const n=e[2]?e[2].split(","):[];n&&(l[0]=R()(n),l[1]=n.slice(1).join(", "))}return{message:t,messageKey:a,args:l}}(e).message),K=(e="")=>{var t;return null===(t=e.match(/my|global|team/))||void 0===t?void 0:t[0]},W=e=>"my:favourite"===e||"my:favorite"===e,q=(e,t)=>(e||[]).filter((e=>(null==e?void 0:e.prefix)===t)),U=(e,t)=>`${e&&"global"!==e?`${e}:`:""}${t}`,Y=e=>{var t;return null==e||null===(t=e.getRecommendedLabels)||void 0===t?void 0:t.recommendedLabels},G=e=>t=>{const a=U(t.prefix,t.label);return{id:t.id,label:a,value:a,prefix:t.prefix,name:t.name,strategy:e}},H=e=>{const t=U(e.namespace,e.name);return{id:e.id,label:t,value:t,prefix:e.namespace,name:e.name,strategy:"recommended",subStrategy:e.strategy}},X=({contentId:e,source:t,onUpdateSuccess:a})=>{var n,o,s,i,c,p,b,m,f,h,y;const{createAnalyticsEvent:g}=(0,v._)(),L=(0,r.useContext)(x.F),{featureFlagClient:E,activationId:C}=(0,M.D)(),[P,R]=(0,r.useState)(""),[V,T]=(0,r.useState)(""),U=E.getBooleanValue("confluence.frontend.add.labels.recommendations",{default:!1,shouldTrackExposureEvent:!0}),{data:X,loading:J,error:ee}=(0,Z.aM)(A,{variables:{contentId:e,refetchQuery:!1,status:D.sY},fetchPolicy:"cache-and-network"}),te=(0,r.useMemo)((()=>{return(e=X)?((null==e||null===(t=e.content)||void 0===t||null===(a=t.nodes)||void 0===a||null===(l=a[0])||void 0===l||null===(n=l.labels)||void 0===n?void 0:n.nodes)||[]).map(G("current")).filter((({label:e})=>!W(e))):[];var e,t,a,l,n}),[X]),ae=null==X||null===(n=X.content)||void 0===n||null===(o=n.nodes)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.type,le=null==X||null===(i=X.content)||void 0===i||null===(c=i.nodes)||void 0===c||null===(p=c[0])||void 0===p||null===(b=p.space)||void 0===b?void 0:b.id,ne=!(null!=X&&null!==(m=X.content)&&void 0!==m&&null!==(f=m.nodes)&&void 0!==f&&null!==(h=f[0])&&void 0!==h&&null!==(y=h.operations)&&void 0!==y&&y.find((e=>"update"===(null==e?void 0:e.operation)&&(null==e?void 0:e.targetType)===ae)));(0,r.useEffect)((()=>{!J&&g({type:"sendTrackEvent",data:{action:"rendered",actionSubject:"labels",containerId:le,containerType:"space",objectId:e,objectType:ae,source:t,attributes:{count:{global:q(te,"global").length,personal:q(te,"my").length,total:te.length}}}}).fire()}),[J,te,le,e,ae,t,g]);const[oe,{error:re}]=(0,Z.Db)(Q,{update(t,{data:{addLabels:a}}){var l,n;const o=t.readQuery({query:A,variables:{contentId:e,refetchQuery:!1,status:D.sY}});if(null!=o&&null!==(l=o.content)&&void 0!==l&&null!==(n=l.nodes)&&void 0!==n&&n[0]&&null!=a&&a.labels){var r;const l=I()(null===(r=o.content.nodes[0].labels)||void 0===r?void 0:r.nodes,a.labels.nodes,"id");o.content.nodes[0].labels={count:l.length,nodes:l,__typename:"PaginatedLabelList"},t.writeQuery({query:A,variables:{contentId:e,refetchQuery:!1,status:D.sY},data:o})}},onCompleted:()=>{a&&a()}}),se=(0,r.useCallback)(((t,{data:a})=>{var n,o,r,s,i,d,c,u;const p=t.readQuery({query:A,variables:{contentId:e,refetchQuery:!1,status:D.sY}});if(null!=p&&null!==(n=p.content)&&void 0!==n&&null!==(o=n.nodes)&&void 0!==o&&null!==(r=o[0])&&void 0!==r&&null!==(s=r.labels)&&void 0!==s&&s.nodes&&null!=(null==p||null===(i=p.content)||void 0===i||null===(d=i.nodes)||void 0===d||null===(c=d[0])||void 0===c||null===(u=c.labels)||void 0===u?void 0:u.count)){const n=p.content.nodes[0].labels.nodes.filter((e=>{var t;return(null==e?void 0:e.label)!==(null==a||null===(t=a.deleteLabel)||void 0===t?void 0:t.label)}));t.writeQuery({query:A,variables:{contentId:e,refetchQuery:!1,status:D.sY},data:{content:{nodes:[(0,l.Z)((0,l.Z)({},p.content.nodes[0]),{},{labels:{nodes:n,count:n.length,__typename:"PaginatedLabelList"}})],__typename:"PaginatedContentListWithChild"}}})}}),[e]),[ie,{error:de}]=(0,Z.Db)($,{update:se,onCompleted:()=>{a&&a()}}),ce=B(de)?void 0:de,[ue,{data:pe,loading:be,error:me}]=(0,Z.td)(k,{onCompleted:()=>{L.succeed({name:S.Ts0})},onError:e=>{L.fail({error:e,name:S.Ts0})}}),[ve,{data:fe,loading:he}]=(0,Z.td)(j,{variables:{contentId:e,spaceId:le},onCompleted:a=>{L.succeed({name:S.KD});const l=Y(a);l&&g({type:"sendTrackEvent",data:{action:"shown",actionSubject:"labelRecommendations",source:t,containerId:le,containerType:"space",objectId:e,objectType:ae,attributes:{count:null==l?void 0:l.length}}}).fire()},onError:e=>{L.fail({error:e,name:S.KD})}}),ye=(0,r.useCallback)((()=>{U&&"page"===ae&&!ne&&(L.start({name:S.KD}),ve())}),[U,ae,L,ve,ne]),ge=Y(fe),Ze=(({searchLabelQueryResults:e,recommendedLabelsQueryResults:t,hasInput:a})=>{const l=(0,d.Z)();return(0,r.useMemo)((()=>{if(a){var n,o;const t=((null==e||null===(n=e.contentLabelSearch)||void 0===n?void 0:n.otherLabels)||[]).map(G("searched_other"));return[...((null==e||null===(o=e.contentLabelSearch)||void 0===o?void 0:o.suggestedLabels)||[]).map(G("searched_suggested")),...t]}{const e=(Y(t)||[]).map(H);return[{label:l.formatMessage(F.suggestedLabels),options:e}]}}),[e,t,a,l])})({searchLabelQueryResults:pe,recommendedLabelsQueryResults:fe,hasInput:Boolean(V)}),Le=(0,r.useMemo)((()=>w()(ue,150,{leading:!0})),[ue]),_e=(0,r.useCallback)((({action:a,labels:l})=>{l.map((({id:l,name:n,prefix:o,strategy:r,subStrategy:s})=>{const i=null==ge?void 0:ge.findIndex((({id:e})=>e===l));let d;var c;i>=0&&(d=i,null!==(c=r)&&void 0!==c&&c.startsWith("searched")&&(r="recommended_searched",s=ge[i].strategy));g({type:"sendTrackEvent",data:{action:a,actionSubject:"label",source:t,objectType:ae,objectId:e,containerType:"space",containerId:le,attributes:{contentId:e,labelId:l,strategy:r,subStrategy:s,isNewLabel:"newly_created"===r,privacySafeLabelPrefix:K(o),activationId:C,recommendedCount:null==ge?void 0:ge.length,hasRecommendations:!(null==ge||!ge.length),recommendedRanking:d},nonPrivacySafeAttributes:{labelName:n,labelPrefix:o}}}).fire()}))}),[ae,t,e,le,g,C,ge]),Ee=(0,r.useCallback)((async t=>{L.start({name:S.Sz0});try{var a,l,n,o,r,s,i,d;await oe({variables:{labels:[{name:t.name,prefix:t.prefix}],contentId:e},optimisticResponse:{addLabels:{__typename:"AddLabelsPayload",labels:{__typename:"PaginatedLabelList",count:((null==X||null===(a=X.content)||void 0===a||null===(l=a.nodes)||void 0===l||null===(n=l[0])||void 0===n||null===(o=n.labels)||void 0===o?void 0:o.count)||0)+1,nodes:[...(null==X||null===(r=X.content)||void 0===r||null===(s=r.nodes)||void 0===s||null===(i=s[0])||void 0===i||null===(d=i.labels)||void 0===d?void 0:d.nodes)||[],{__typename:"Label",id:t.id,prefix:t.prefix,name:t.name,label:t.name}]}}}}),L.succeed({name:S.Sz0}),_e({action:"add",labels:[t]})}catch(c){L.fail({error:c,name:S.Sz0})}}),[L,oe,X,_e,e]),Ie=(0,r.useCallback)((async t=>{L.start({name:S.CZ5});try{var a,l,n,o,r,s,i,d,c,u;const{data:p}=await oe({variables:{labels:[{name:t.value,prefix:""}],contentId:e},optimisticResponse:{addLabels:{__typename:"AddLabelsPayload",labels:{__typename:"PaginatedLabelList",count:((null==X||null===(a=X.content)||void 0===a||null===(l=a.nodes)||void 0===l||null===(n=l[0])||void 0===n||null===(o=n.labels)||void 0===o?void 0:o.count)||0)+1,nodes:[...(null==X||null===(r=X.content)||void 0===r||null===(s=r.nodes)||void 0===s||null===(i=s[0])||void 0===i||null===(d=i.labels)||void 0===d?void 0:d.nodes)||[],{name:t.value,prefix:"",__typename:"Label",id:_()(),label:t.value}]}}}});L.succeed({name:S.CZ5}),_e({action:"add",labels:((null==p||null===(c=p.addLabels)||void 0===c||null===(u=c.labels)||void 0===u?void 0:u.nodes)||[]).map(G("newly_created")).filter((({value:e})=>t.value===e))})}catch(p){L.fail({error:p,name:S.CZ5})}}),[L,oe,X,_e,e]),Ce=(0,r.useCallback)((async t=>{const a={deleteLabel:{__typename:"DeleteLabelPayload",contentId:e,label:null==t?void 0:t.name}};if(t){L.start({name:S.u7L});try{await ie({variables:{label:t.name,contentId:e},optimisticResponse:a}),L.succeed({name:S.u7L}),_e({action:"deleted",labels:[t]})}catch(l){B(l)?((0,N.Xb)(l),se((0,O.WQ)(),{data:a}),L.abort({name:S.u7L,reason:"label already deleted"})):L.fail({error:l,name:S.u7L})}}}),[L,ie,_e,e,se]),we=(0,r.useCallback)((()=>{ye(),g({type:"sendTrackEvent",data:{action:"open",actionSubject:"labelsSelect",source:t,containerId:le,containerType:"space",objectId:e,objectType:ae,attributes:{isRecommendationsEnabled:U}}}).fire()}),[t,le,e,ae,g,U,ye]),xe=be||he;return{options:xe?[]:Ze,value:J?[]:te,filterOption:({value:e})=>!me&&(0,u.c)({})&&!W(e)&&!z(e),onChange:async(e,{action:t,option:a,removedValue:l})=>{t===D.MF.SELECT_OPTION?Ee(a):t===D.MF.CREATE_OPTION?Ie(a):t!==D.MF.REMOVE_VALUE&&t!==D.MF.POP_VALUE||Ce(l)},onMenuOpen:we,onInputChange:t=>{const a=z(t);R(a),T(t.toLowerCase().replace(/\s/g,"-")),Boolean(t)?(L.start({name:S.Ts0}),P||Le({variables:{searchText:t,contentId:e}})):ye()},inputValue:V,isLoading:xe,isDisabled:ne,labelsQueryLoading:J,labelsQueryError:ee,labelsMutationError:re||ce,labelsSearchQueryError:me,validationError:P,fetchRecommendedLabels:ye}};var J=a(892637);a(456928),a(186231),a(525286),a(683559),a(354326),a(655013),a(140296),a(234119),a(527354),a(991532),a(873933),a(370306),a(144961),a(413076),a(66777),a(563952);const{ValueContainer:ee,Input:te,Control:ae,MultiValueContainer:le,MultiValueLabel:ne,Option:oe}=c.c,re=(0,y.ui)({__loadable_id__:"aFYo2",name:"LabelsQueryErrorDisplayLoader",loader:async()=>(await Promise.all([a.e(61769),a.e(78248),a.e(54936),a.e(11216),a.e(46003),a.e(98689)]).then(a.bind(a,695201))).LabelsQueryErrorDisplay}),se=(0,y.ui)({__loadable_id__:"1ThvE",name:"LabelsMutationErrorDisplayLoader",loader:async()=>(await Promise.all([a.e(61769),a.e(78248),a.e(54936),a.e(11216),a.e(46003),a.e(98689)]).then(a.bind(a,695201))).LabelsMutationErrorDisplay}),ie=(0,y.ui)({__loadable_id__:"IbGu1",name:"LabelsValidationErrorLoader",loader:async()=>(await Promise.all([a.e(61769),a.e(78248),a.e(54936),a.e(11216),a.e(46003),a.e(98689)]).then(a.bind(a,695201))).LabelsValidationError}),de=(0,s.defineMessages)({inputPlaceholder:{id:"labels.labels-select.input-placeholder",defaultMessage:"Search or create a label"},createNewLabel:{id:"labels.labels-select.create-new-label",defaultMessage:"Create new label"},labelAlreadyAddedMessage:{id:"labels.labels-select.create-new-label-already-added",defaultMessage:"{inputValue} was already added to the page"},labelSearchErrorMessage:{id:"labels.labels-select.labels-search-error",defaultMessage:"Suggestions aren't loading. Try writing it again."},addLabelPlaceholder:{id:"labels.view-page-labels.placeholder",defaultMessage:"Add label"}}),ce=(0,r.forwardRef)(((e,t)=>{let{as:a="span",style:s}=e,i=(0,n.Z)(e,["as","style"]);return r.createElement(a,(0,l.Z)((0,l.Z)({},i),{},{style:s,ref:t,className:(0,o.Z)(["_1e0c1o8l _k48p1nn1 _1wybdlk8 _vwz4gktf _ca0qidpf _u5f31y44 _n3tdidpf _19bv1y44 _2rko1l7b _bfhk1hxd _1d261kby",i.className])}))}));const ue=(0,r.forwardRef)(((e,t)=>{let{as:a="div",style:s}=e,i=(0,n.Z)(e,["as","style"]);return r.createElement(a,(0,l.Z)((0,l.Z)({},i),{},{style:s,ref:t,className:(0,o.Z)(["_1e0c1txw _zulpftgi",i.className])}))}));const pe=(0,r.forwardRef)(((e,t)=>{let{as:a="div",style:s}=e,i=(0,n.Z)(e,["as","style"]);return r.createElement(a,(0,l.Z)((0,l.Z)({},i),{},{style:s,ref:t,className:(0,o.Z)(["_1o9zidpf",i.className])}))}));const be={valueContainer:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingLeft:"4px",paddingRight:"4px",paddingTop:"4px",paddingBottom:"4px",display:"flex"}),group:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingTop:"0"}),groupHeading:e=>(0,l.Z)((0,l.Z)((0,l.Z)({},e),(0,m.qm)()),{},{marginTop:"0",marginBottom:"8px"}),multiValueLabel:e=>(0,l.Z)((0,l.Z)({},e),{},{fontWeight:400,fontSize:"14px",lineHeight:"20px",paddingLeft:"4px",paddingRight:"2px",padding:0,maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis"}),multiValue:e=>(0,l.Z)((0,l.Z)({},e),{},{margin:"4px",backgroundColor:b.IR,"&:hover, &:focus-within":{backgroundColor:b.uv},"&:hover .labels__multi-value__label span":{backgroundColor:b.uv},borderRadius:"3px","&:hover a, &:focus-within a":{textDecoration:"none"},pointerEvents:"auto",overflow:"hidden",flexDirection:"row-reverse","div:hover + div":{backgroundColor:b.Xd},"a > .labels__multi-value__label":{color:b.q2}}),option:e=>(0,l.Z)((0,l.Z)({},e),{},{width:"max-content",minWidth:"100%"}),input:e=>(0,l.Z)((0,l.Z)({},e),{},{input:{fontFamily:"inherit","::placeholder":{color:b.iw},width:"auto !important"},maxWidth:0})},me=e=>e?{control:e=>(0,l.Z)((0,l.Z)({},e),{},{"&:hover, &:focus, &:active, &:focus-within":{borderColor:"white"},"&:focus-within, :hover":{borderColor:"white"},cursor:"default !important",borderWidth:"0px"}),multiValueLabel:e=>(0,l.Z)((0,l.Z)({},e),{},{paddingRight:"4px"})}:{},ve=e=>{let{children:t}=e,a=(0,n.Z)(e,["children"]);const{isFocused:o}=a;return r.createElement(ae,(0,l.Z)({},a),r.Children.map(t,(e=>(null==e?void 0:e.type)===ge?(0,r.cloneElement)(e,{isFocused:o}):e)))};ve.displayName="CustomControl";const fe=(0,r.forwardRef)(((e,t)=>{let{as:a="div",style:s}=e,i=(0,n.Z)(e,["as","style"]);return r.createElement(a,(0,l.Z)((0,l.Z)({},i),{},{style:s,ref:t,className:(0,o.Z)(["_syaz9sh9",i.className])}))}));const he=(0,r.forwardRef)(((e,t)=>{let{as:a="div",style:s}=e,i=(0,n.Z)(e,["as","style"]);return r.createElement(a,(0,l.Z)((0,l.Z)({},i),{},{style:s,ref:t,className:(0,o.Z)(["_1e0c1txw _4cvr1h6o",i.className])}))}));const ye=()=>r.createElement(he,null,r.createElement(h.default,{label:""}),r.createElement(i.Z,(0,l.Z)({},de.addLabelPlaceholder)));ye.displayName="AddLabelPlaceholder";const ge=e=>{let{children:t,isFocused:a}=e,o=(0,n.Z)(e,["children","isFocused"]);return r.createElement(ee,(0,l.Z)({},o),r.Children.map(t,(e=>(null==e?void 0:e.type)===Ze?(0,r.cloneElement)(e,{isFocused:a}):e)),r.createElement(fe,null,a?null:o.selectProps.placeholder))};ge.displayName="CustomValueContainer";const Ze=e=>{let{isFocused:t}=e,a=(0,n.Z)(e,["isFocused"]);const o=(0,d.Z)();return r.createElement(te,(0,l.Z)((0,l.Z)({},a),{},{placeholder:t?o.formatMessage(de.inputPlaceholder):void 0}))};Ze.displayName="CustomInput";const Le=e=>{let{children:t}=e,a=(0,n.Z)(e,["children"]);return r.createElement(le,(0,l.Z)({},a),r.Children.toArray(t).reverse())};Le.displayName="CustomMultiValueContainer";const _e=e=>{let{spaceKey:t,source:a}=e,o=(0,n.Z)(e,["spaceKey","source"]);const{createAnalyticsEvent:s}=(0,v._)(),i=(0,r.useCallback)((()=>{s({type:"sendUIEvent",data:{action:"clicked",actionSubject:"label",source:a,attributes:{privacySafePrefix:K(o.data.prefix)}}}).fire()}),[a,o.data.prefix,s]);return r.createElement("div",{onMouseDown:e=>e.stopPropagation()},r.createElement(f.Z,{content:String(o.data.value).length>=50?o.data.value:""},(e=>r.createElement("a",(0,l.Z)((0,l.Z)({href:`/wiki/label/${t}/${o.data.value}`},e),{},{onClick:i}),r.createElement(ne,(0,l.Z)({},o))))))};_e.displayName="CustomMultiValueLabel";const Ee=e=>{let{children:t}=e,a=(0,n.Z)(e,["children"]);const{data:{__isNew__:o},value:s}=a;return r.createElement(oe,(0,l.Z)({},a),o?r.createElement(ue,null,r.createElement(pe,null,r.createElement(i.Z,(0,l.Z)({},de.createNewLabel))),r.createElement(ce,null,s)):r.createElement(ce,null,s))};Ee.displayName="CustomOption";const Ie=(0,r.forwardRef)(((e,t)=>{let{contentId:a,source:o,experienceName:s,components:i,styles:c,spaceKey:b,forwardedRef:m,isInDialog:v,onUpdateSuccess:f}=e,h=(0,n.Z)(e,["contentId","source","experienceName","components","styles","spaceKey","forwardedRef","isInDialog","onUpdateSuccess"]);const y=X({contentId:a,source:o,onUpdateSuccess:f}),{isDisabled:Z,labelsQueryLoading:L,labelsQueryError:_,labelsMutationError:E,labelsSearchQueryError:I,validationError:C,fetchRecommendedLabels:w}=y,x=(0,n.Z)(y,["isDisabled","labelsQueryLoading","labelsQueryError","labelsMutationError","labelsSearchQueryError","validationError","fetchRecommendedLabels"]),S=(0,d.Z)();return r.createElement(r.Fragment,null,_?r.createElement(re,{experienceName:s,error:_}):v||!L?r.createElement("div",{onMouseEnter:w},r.createElement(p.Z,(0,l.Z)((0,l.Z)({components:(0,l.Z)((0,l.Z)((0,l.Z)({DropdownIndicator:null,Placeholder:()=>null,Control:ve},!Z&&{ValueContainer:ge}),{},{Input:Ze,MultiValueContainer:Le,MultiValueLabel:e=>r.createElement(_e,(0,l.Z)({spaceKey:b,source:o},e))},Z&&{MultiValueRemove:()=>null}),{},{Option:Ee},i),ref:t,noOptionsMessage:({inputValue:e})=>(e=>!e||W(e)||C?null:I?S.formatMessage(de.labelSearchErrorMessage):S.formatMessage(de.labelAlreadyAddedMessage,{inputValue:e}))(e),styles:(0,u.m)(be,(0,u.m)(me(Boolean(Z)),c||{})),isClearable:!1,openMenuOnClick:!0,"aria-label":S.formatMessage(de.addLabelPlaceholder),isSearchable:!Z,closeMenuOnSelect:!1,defaultOptions:!0,isMulti:!0,classNamePrefix:"labels",placeholder:r.createElement(ye,null),validationState:C?"error":"default"},x),h)),E&&r.createElement(se,{error:E}),C&&r.createElement(ie,{error:C,input:x.inputValue}),!L&&r.createElement(g.F,{name:s})):r.createElement(J.O,null))}))},973369:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,n=(l=a(122551))&&l.__esModule?l:{default:l},o=a(386056);const r=e=>n.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M13 11V7a1 1 0 00-2 0v4H7a1 1 0 000 2h4v4a1 1 0 002 0v-4h4a1 1 0 000-2h-4z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));r.displayName="EditorAddIcon";var s=r;t.default=s},791681:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,n=(l=a(122551))&&l.__esModule?l:{default:l},o=a(386056);const r=e=>n.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><circle fill="currentColor" cx="12" cy="12" r="9"/><path d="M16.155 14.493a1.174 1.174 0 11-1.662 1.663L12 13.662l-2.494 2.494a1.172 1.172 0 01-1.662 0 1.176 1.176 0 010-1.663L10.337 12 7.844 9.507a1.176 1.176 0 011.662-1.662L12 10.338l2.493-2.493a1.174 1.174 0 111.662 1.662L13.662 12l2.493 2.493z" fill="inherit"/></g></svg>'},e));r.displayName="SelectClearIcon";var s=r;t.default=s},865518:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var l=a(430244);const n=(0,a(470810).Z)(l.Z)},470810:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var l={};a.r(l),a.d(l,{ClearIndicator:()=>y,DropdownIndicator:()=>g,IndicatorSeparator:()=>I,LoadingIndicator:()=>Z,MultiValueRemove:()=>E});var n=a(415911),o=a(991332),r=a(953307),s=a(29298),i=a(122551),d=a(138504),c=a(429185),u=a(413250),p=a.n(u),b=a(321534),m=a(791681),v=a(229154),f=a(685753),h=a(615139);const y=e=>(0,b.tZ)(v.c.ClearIndicator,e,(0,b.tZ)(m.default,{size:"small",label:"clear"})),g=e=>(0,b.tZ)(v.c.DropdownIndicator,e,(0,b.tZ)(h.default,{label:"open"})),Z=e=>{const t=(0,b.iv)(e.getStyles("loadingIndicator",e));return(0,b.tZ)("div",(0,r.Z)({css:t},e.innerProps),(0,b.tZ)(f.Z,{size:"small"}))},L=b.iv`
  display: none;
`,_=b.iv`
  display: inherit;
`,E=e=>{const{isDisabled:t}=e.selectProps;return(0,b.tZ)(v.c.MultiValueRemove,e,(0,b.tZ)("div",{css:t?L:_,"data-testid":t?"hide-clear-icon":"show-clear-icon"},(0,b.tZ)(m.default,{label:"Clear",size:"small",primaryColor:"transparent",secondaryColor:"inherit"})))},I=null;var C=a(174055);function w(e){var t;return t=class extends i.Component{constructor(e){super(e),(0,s.Z)(this,"components",{}),(0,s.Z)(this,"select",null),(0,s.Z)(this,"cacheComponents",(e=>{this.components=(0,o.Z)((0,o.Z)({},l),e)})),(0,s.Z)(this,"onSelectRef",(e=>{this.select=e})),this.cacheComponents=(0,c.Z)(this.cacheComponents,p()).bind(this),this.cacheComponents(e.components||{})}UNSAFE_componentWillReceiveProps(e){this.cacheComponents(e.components)}focus(){this.select&&this.select.focus()}blur(){this.select&&this.select.blur()}render(){const t=this.props,{styles:a,validationState:l,isInvalid:o,spacing:s,isMulti:c,appearance:u}=t,p=(0,n.Z)(t,["styles","validationState","isInvalid","spacing","isMulti","appearance"]),b="compact"===s;return i.createElement(e,(0,r.Z)({ref:this.onSelectRef,isMulti:c,"aria-live":"assertive"},p,{components:this.components,styles:(0,d.m)((0,C.Z)(void 0!==o?o?"error":"default":l,b,this.props.appearance||"default"),a)}))}},(0,s.Z)(t,"defaultProps",{validationState:"default",spacing:"default",onClickPreventDefault:!0,tabSelectsValue:!1,components:{},styles:{}}),t}},517299:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var l=a(319926);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,o,r,s=[],i=!0,d=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(l=o.call(a)).done)&&(s.push(l.value),s.length!==t);i=!0);}catch(c){d=!0,n=c}finally{try{if(!i&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(d)throw n}}return s}}(e,t)||(0,l.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},731864:(e,t,a)=>{"use strict";function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}a.d(t,{Z:()=>l})}}]);
//# sourceMappingURL=55356.6ow6ZggJwq.js.map